{
  "code": "import ClothChange, { clothtype } from \"../../ClothChange\";\r\nimport BagListController from \"./BagListController\";\r\nimport GameDataController from \"../../GameDataController\";\r\nimport { UIMgr } from \"../../../Frame/Core\";\r\nimport ADManager, { TaT } from \"../../../Admanager\";\r\nimport ZJADMgr, { ShieldLevel } from \"../../../ZJADMgr\";\r\nexport default class SkinItem extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.HeightMax = 85;\r\n        this.WidthtMax = 80;\r\n        this.count = 2;\r\n    }\r\n    onAwake() {\r\n        console.log(ZJADMgr.ins.shieldLevel + \"风险等级\");\r\n        this.SkinChose = this.owner;\r\n        this.BG = this.SkinChose.getChildByName(\"BG\");\r\n        this.IconParent = this.SkinChose.getChildByName(\"IconParent\");\r\n        this.Icon = this.IconParent.getChildByName(\"Icon\");\r\n        this.Lock = this.SkinChose.getChildByName(\"Lock\");\r\n        this.Adimage = this.Lock.getChildAt(1);\r\n        this.smallLock = this.Lock.getChildAt(0);\r\n        this.Icon.anchorX = this.Icon.anchorY = 0.5;\r\n        this.Star = this.SkinChose.getChildByName(\"Star\");\r\n        this.Select = this.SkinChose.getChildByName(\"Select\");\r\n        if (ZJADMgr.ins.shieldLevel == ShieldLevel.high) {\r\n            this.SkinChose.on(Laya.Event.CLICK, this, this.onClickTest);\r\n        }\r\n        if (ZJADMgr.ins.shieldLevel == ShieldLevel.mid) {\r\n            if (ZJADMgr.ins.CheckPlayVideo()) {\r\n                this.SkinChose.on(Laya.Event.MOUSE_DOWN, this, this.onClickTest);\r\n            }\r\n            else {\r\n                this.SkinChose.on(Laya.Event.CLICK, this, this.onClickTest);\r\n            }\r\n        }\r\n        if (ZJADMgr.ins.shieldLevel == ShieldLevel.low) {\r\n            this.SkinChose.on(Laya.Event.MOUSE_DOWN, this, this.onClickTest);\r\n        }\r\n    }\r\n    fell(data) {\r\n        this.ID = data.ID;\r\n        this.type = data.Type;\r\n        this.skinname = data.Name;\r\n        this.Select.visible = false;\r\n        this.type2 = data.GetType2;\r\n        this.Star.skin = \"Btnbar/xing\" + data.Star + \".png\";\r\n        console.log(data.ID + \"\" + data.Star);\r\n        this.Lock.visible = !GameDataController.ClothCanUse(data.ID);\r\n        if (data.GetType2 != null || data.ID == 50404) {\r\n            this.Adimage.visible = false;\r\n            this.smallLock.visible = true;\r\n        }\r\n        else {\r\n            this.Adimage.visible = true;\r\n            this.smallLock.visible = false;\r\n        }\r\n        console.log(GameDataController.ClothDataRefresh[data.ID], data.ID);\r\n        switch (this.type) {\r\n            case clothtype.Hair:\r\n                if (ClothChange.Instance.nowclothData.Hair == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Dress:\r\n                if (ClothChange.Instance.nowclothData.Dress == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Coat:\r\n                if (ClothChange.Instance.nowclothData.Coat == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Shirt:\r\n                if (ClothChange.Instance.nowclothData.Shirt == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Trousers:\r\n                if (ClothChange.Instance.nowclothData.Trousers == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Socks:\r\n                if (ClothChange.Instance.nowclothData.Socks == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Shose:\r\n                if (ClothChange.Instance.nowclothData.Shose == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Ornament:\r\n                if (ClothChange.Instance.nowclothData.Ornament == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Pet:\r\n                if (ClothChange.Instance.nowclothData.Pet == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n        }\r\n        this.Icon.skin = data.GetPath1();\r\n        let imageHeight = parseFloat(this.Icon.height.toString());\r\n        let imagewidth = parseFloat(this.Icon.width.toString());\r\n        this.IconParent.width = 100;\r\n        this.IconParent.height = 100;\r\n        let pr = 0;\r\n        if (imagewidth > imageHeight) {\r\n            pr = this.WidthtMax / imagewidth;\r\n        }\r\n        else {\r\n            pr = this.HeightMax / imageHeight;\r\n        }\r\n        this.Icon.scaleX = pr;\r\n        this.Icon.scaleY = pr;\r\n        this.Icon.centerX = 0;\r\n        this.Icon.centerY = 0;\r\n    }\r\n    onClickTest() {\r\n        ADManager.TAPoint(TaT.BtnClick, \"ADhair\" + this.ID + \"_click\");\r\n        if (this.Lock.visible) {\r\n            if (this.Adimage.visible) {\r\n                ADManager.ShowReward(() => {\r\n                    this.Select.visible = true;\r\n                    ClothChange.Instance._ClothChange(this.ID, this.type);\r\n                    BagListController.Instance.getlist(this.type)._refresh();\r\n                    let dataall = GameDataController.ClothDataRefresh;\r\n                    dataall[this.ID] = 0;\r\n                    GameDataController.ClothDataRefresh = dataall;\r\n                    UIMgr.tip(\"恭喜获得一件装扮\");\r\n                }, () => {\r\n                    UIMgr.show(\"UITip\", () => {\r\n                        this.Select.visible = true;\r\n                        ClothChange.Instance._ClothChange(this.ID, this.type);\r\n                        BagListController.Instance.getlist(this.type)._refresh();\r\n                        let dataall = GameDataController.ClothDataRefresh;\r\n                        dataall[this.ID] = 0;\r\n                        GameDataController.ClothDataRefresh = dataall;\r\n                        UIMgr.tip(\"恭喜获得一件装扮\");\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                UIMgr.tip(\"当前装扮未解锁\");\r\n            }\r\n        }\r\n        else {\r\n            console.log(\"点击选择衣服-------\", this.ID, \"------\", this.skinname);\r\n            console.log(\"                                                     \");\r\n            this.Select.visible = true;\r\n            ClothChange.Instance._ClothChange(this.ID, this.type);\r\n            BagListController.Instance.getlist(this.type)._refresh();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SkinItem.js.map",
  "references": [
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/ClothData.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/ClothChange.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/UI/Bag/BagListController.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/GameDataController.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Frame/Core.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Admanager.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/Formula.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/Game/PickClothChange.ts",
    "C:/Users/tomato/Downloads/Baby/NewProject/src/script/ZJADMgr.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SkinItem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/script/Game/UI/Bag/SkinItem.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
