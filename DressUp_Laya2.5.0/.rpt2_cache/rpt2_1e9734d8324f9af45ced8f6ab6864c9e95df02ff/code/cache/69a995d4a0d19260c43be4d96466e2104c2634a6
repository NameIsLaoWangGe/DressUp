{
  "code": "import PromoItem from \"./PromoItem\";\r\nimport Behaviour from \"./Behaviour\";\r\nexport default class P201 extends Behaviour {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.promoItem = null;\r\n        this.shake = false;\r\n        this.animTime = 0;\r\n        this.refrTime = 0;\r\n    }\r\n    async OnAwake() {\r\n        this.promoItem = this.owner.getComponent(PromoItem);\r\n        TJ.Develop.Yun.Promo.Data.ReportAwake(P201.style);\r\n        this.promoItem.style = P201.style;\r\n        this.active = false;\r\n        if (Laya.Browser.onIOS && TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (P201.promoList == null) {\r\n            let list = await TJ.Develop.Yun.Promo.List.Get(P201.style);\r\n            if (P201.promoList == null)\r\n                P201.promoList = list;\r\n        }\r\n        if (P201.promoList.count > 0) {\r\n            TJ.Develop.Yun.Promo.Data.ReportStart(P201.style);\r\n            this.active = true;\r\n        }\r\n        else {\r\n            this.owner.destroy();\r\n        }\r\n    }\r\n    OnEnable() {\r\n        this.LoadAndShowIcon();\r\n    }\r\n    OnDisable() {\r\n        if (P201.promoList != null) {\r\n            P201.promoList.Unload(this.promoItem.data);\r\n        }\r\n    }\r\n    OnUpdate() {\r\n        let deltaTime = Laya.timer.delta / 1000;\r\n        this.refrTime += deltaTime;\r\n        if (this.refrTime > 5) {\r\n            this.refrTime -= 5;\r\n            this.LoadAndShowIcon();\r\n        }\r\n        if (!this.shake)\r\n            return;\r\n        this.animTime += deltaTime;\r\n        this.animTime %= 2.5;\r\n        if (this.animTime <= .75) {\r\n            this.promoItem.owner.rotation = Math.sin(this.animTime * 6 * Math.PI) * 25 * (1 - this.animTime / .75);\r\n        }\r\n        else {\r\n            this.promoItem.owner.rotation = 0;\r\n        }\r\n    }\r\n    LoadIcon() {\r\n        let data = P201.promoList.Load();\r\n        if (data != null) {\r\n            P201.promoList.Unload(this.promoItem.data);\r\n            this.promoItem.data = data;\r\n            this.promoItem.onClick_ = () => { this.LoadAndShowIcon(); };\r\n            this.promoItem.DoLoad();\r\n        }\r\n        return data;\r\n    }\r\n    LoadAndShowIcon() {\r\n        if (this.LoadIcon() != null) {\r\n            this.promoItem.OnShow();\r\n        }\r\n        else {\r\n            if (this.promoItem.data == null) {\r\n                this.owner.destroy();\r\n            }\r\n        }\r\n    }\r\n}\r\nP201.style = \"P201\";\r\nP201.promoList = null;\r\n//# sourceMappingURL=P201.js.map",
  "references": [
    "D:/Game/project/DressUp/Project_Laya2.5.0/DressUp_Laya2.5.0/src/TJ/Promo/script/PromoItem.ts",
    "D:/Game/project/DressUp/Project_Laya2.5.0/DressUp_Laya2.5.0/src/TJ/Promo/script/Behaviour.ts"
  ],
  "map": "{\"version\":3,\"file\":\"P201.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/TJ/Promo/script/P201.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
