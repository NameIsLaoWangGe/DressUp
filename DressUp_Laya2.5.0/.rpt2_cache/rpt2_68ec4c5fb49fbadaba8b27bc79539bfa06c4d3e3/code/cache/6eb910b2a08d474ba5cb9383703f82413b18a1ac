{
  "code": "import ADManager, { TaT } from \"../../Admanager\";\r\nimport { UIBase, OpenType, UIMgr } from \"../../Frame/Core\";\r\nimport ClothSkinItem from \"../ClothSkinItem\";\r\nimport GameDataController from \"../GameDataController\";\r\nimport RecommendChange from \"../RecommendChange\";\r\nimport BagListController from \"./Bag/BagListController\";\r\nexport default class UIRecommend extends UIBase {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._openType = OpenType.Attach;\r\n        this.Data = [];\r\n        this.Num = 0;\r\n        this.str = {};\r\n        this.count = 0;\r\n        this.data = [];\r\n    }\r\n    onInit() {\r\n        this.FemaleRoot = this.vars(\"FemaleRoot\");\r\n        this._RecommendChange = this.FemaleRoot.getComponent(RecommendChange);\r\n        this.ADBtn = this.vars(\"ADBtn\");\r\n        this.TaskPre = this.ADBtn.getChildByName(\"TaskPre\");\r\n        this.btnEv(\"CloseBtn\", () => {\r\n            this.hide();\r\n        });\r\n        this.ClothList = this.vars(\"ClothList\");\r\n        this.ClothList.hScrollBarSkin = \"\";\r\n        this.Refresh();\r\n        this.Data.forEach((v, i) => {\r\n            this._RecommendChange._ClothChange(this.Data[i].ID, this.Data[i].Type);\r\n        });\r\n        this.ClothList.renderHandler = new Laya.Handler(this, this.onWarpItem);\r\n        this.ClothList.refresh();\r\n        this.btnEv(\"ADBtn\", () => {\r\n            console.log(\"播放了广告\");\r\n            this.ADBtnClick();\r\n        });\r\n    }\r\n    onWarpItem(cell, index) {\r\n        cell.getComponent(ClothSkinItem).fell(this.Data, index);\r\n    }\r\n    onShow() {\r\n        ADManager.TAPoint(TaT.PageEnter, \"tuijianpage\");\r\n        ADManager.TAPoint(TaT.BtnShow, \"ADchuanda_click\");\r\n        this.Refresh();\r\n    }\r\n    Refresh() {\r\n        for (let index = 0; index < GameDataController.ClothPackge4.cloths1.length; index++) {\r\n            this.Data[index] = GameDataController.ClothPackge4.cloths1[index];\r\n        }\r\n        this.ClothList.refresh();\r\n        this.ClothList.array = this.Data;\r\n        this.Data.forEach((v, i) => {\r\n            let nv = GameDataController.ClothDataRefresh[this.Data[i].ID];\r\n            this.str[this.Data[i].ID] = nv;\r\n        });\r\n        this.Num = GameDataController.ClothAlllockNum(this.str);\r\n        this.Now = (this.Data.length - this.Num) + \"\";\r\n        this.Need = (this.Data.length) + \"\";\r\n        this.TaskPre.text = this.Now + \" / \" + this.Need;\r\n        this.ADBtn.visible = this.Num > 0;\r\n    }\r\n    onHide() {\r\n        ADManager.TAPoint(TaT.PageLeave, \"tuijianpage\");\r\n        this.hide();\r\n    }\r\n    ADBtnClick() {\r\n        ADManager.TAPoint(TaT.BtnClick, \"ADchuanda_click\");\r\n        ADManager.ShowReward(() => {\r\n            this.GetAward();\r\n        }, () => {\r\n            UIMgr.show(\"UITip\", () => {\r\n                this.GetAward();\r\n            });\r\n        });\r\n    }\r\n    GetAward() {\r\n        for (let k in this.str) {\r\n            if (this.str[k] == 1) {\r\n                let dataall = GameDataController.ClothDataRefresh;\r\n                dataall[k] = 0;\r\n                GameDataController.ClothDataRefresh = dataall;\r\n                Laya.LocalStorage.setJSON(this.Data[0].GetType2, this.str);\r\n                this.Refresh();\r\n                BagListController.Instance.refresh();\r\n                console.log(\"获取一件装扮\");\r\n                UIMgr.tip(\"恭喜获得新衣服\");\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=UIRecommend.js.map",
  "references": [
    "D:/NewProject/src/script/Admanager.ts",
    "D:/NewProject/src/script/Frame/Core.ts",
    "D:/NewProject/src/script/Game/ClothData.ts",
    "D:/NewProject/src/script/Game/ClothSkinItem.ts",
    "D:/NewProject/src/script/Game/GameDataController.ts",
    "D:/NewProject/src/script/Game/RecommendChange.ts",
    "D:/NewProject/src/script/Game/UI/Bag/BagListController.ts"
  ],
  "map": "{\"version\":3,\"file\":\"UIRecommend.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/script/Game/UI/UIRecommend.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
