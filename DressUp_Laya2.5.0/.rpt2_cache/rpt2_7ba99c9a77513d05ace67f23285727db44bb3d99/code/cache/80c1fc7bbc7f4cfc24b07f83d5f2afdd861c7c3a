{
  "code": "import ADManager from \"../../../Admanager\";\r\nimport { UIMgr } from \"../../../Frame/Core\";\r\nimport GameDataController from \"../../GameDataController\";\r\nexport default class CollectionItem extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.WidthtMax = 210;\r\n        this.HeightMax = 270;\r\n        this.count = 0;\r\n        this.str = {};\r\n    }\r\n    onAwake() {\r\n        let item = this.owner;\r\n        this.event = item.getChildByName(\"event\");\r\n        this.IconParent = item.getChildByName(\"IconParent\");\r\n        this.Icon = this.IconParent.getChildByName(\"Icon\");\r\n        this.name = item.getChildByName(\"name\");\r\n        this.description = item.getChildByName(\"description\");\r\n        this.Lock = item.getChildByName(\"Lock\");\r\n        this.charm = this.Lock.getChildByName(\"charm\");\r\n        this.condition = this.charm.getChildByName(\"condition\");\r\n        this.ad = this.Lock.getChildByName(\"ad\");\r\n        this.adNum = this.ad.getChildByName(\"adNum\");\r\n        this.StarBox = item.getChildByName(\"StarBox\");\r\n        this.event.on(Laya.Event.CLICK, this, this.itemClick);\r\n    }\r\n    fell(data) {\r\n        this.Data = data;\r\n        this.ID = data.ID;\r\n        let star = GameDataController.ManStarRefresh[data.ID];\r\n        if (star <= 3) {\r\n            this.Icon.skin = data.GetIconPath(star - 1);\r\n        }\r\n        else {\r\n            this.Icon.skin = data.GetIconPath(2);\r\n        }\r\n        this.IconParent.centerX = 0;\r\n        this.IconParent.centerY = 0;\r\n        this.IconParent.width = 213;\r\n        this.IconParent.height = 274;\r\n        this.Icon.left = 0;\r\n        this.Icon.right = 0;\r\n        this.Icon.top = 0;\r\n        this.Icon.bottom = 0;\r\n        this.name.text = data.Name;\r\n        this.description.text = data.Des;\r\n        this.Lock.visible = !GameDataController.ManCanUse(data.ID);\r\n        if (data.WatchAD == 0) {\r\n            this.charm.visible = false;\r\n            this.ad.visible = true;\r\n            this.adNum.text = this.count + \"/\" + data.ADNum;\r\n        }\r\n        else {\r\n            this.charm.visible = true;\r\n            this.condition.text = \"魅力值:\" + data.Charm + \"解锁\";\r\n            this.ad.visible = false;\r\n        }\r\n        this.StarShow(GameDataController.ManStarRefresh[data.ID]);\r\n        this.Icon.centerX = 0;\r\n        this.Icon.centerY = 0;\r\n        this.str = GameDataController.ManDataRefresh;\r\n    }\r\n    StarShow(num) {\r\n        switch (num) {\r\n            case 0:\r\n                for (let index = 0; index < this.StarBox.numChildren; index++) {\r\n                    this.StarBox.getChildAt(index).visible = false;\r\n                }\r\n                break;\r\n            case 1:\r\n                for (let index = 0; index < this.StarBox.numChildren; index++) {\r\n                    this.StarBox.getChildAt(index).visible = false;\r\n                }\r\n                this.StarBox.getChildAt(0).visible = true;\r\n                break;\r\n            case 2:\r\n                for (let index = 0; index < this.StarBox.numChildren; index++) {\r\n                    this.StarBox.getChildAt(index).visible = false;\r\n                }\r\n                this.StarBox.getChildAt(0).visible = true;\r\n                this.StarBox.getChildAt(1).visible = true;\r\n                break;\r\n            case 3:\r\n                for (let index = 0; index < this.StarBox.numChildren; index++) {\r\n                    this.StarBox.getChildAt(index).visible = false;\r\n                }\r\n                this.StarBox.getChildAt(0).visible = true;\r\n                this.StarBox.getChildAt(1).visible = true;\r\n                this.StarBox.getChildAt(2).visible = true;\r\n                break;\r\n            case 4:\r\n                for (let index = 0; index < this.StarBox.numChildren; index++) {\r\n                    this.StarBox.getChildAt(index).visible = false;\r\n                }\r\n                this.StarBox.getChildAt(0).visible = true;\r\n                this.StarBox.getChildAt(1).visible = true;\r\n                this.StarBox.getChildAt(2).visible = true;\r\n                this.StarBox.getChildAt(3).visible = true;\r\n                break;\r\n        }\r\n    }\r\n    itemClick() {\r\n        if (this.Lock.visible) {\r\n            if (this.charm.visible) {\r\n                if (Number(GameDataController.CharmValue) >= this.Data.Charm) {\r\n                    this.str[this.Data.ID] = 0;\r\n                    GameDataController.ManDataRefresh = this.str;\r\n                    UIMgr.get(\"UICollection\").onRefresh();\r\n                    UIMgr.tip(\"恭喜解锁\");\r\n                    GameDataController.man = this.Data;\r\n                    UIMgr.show(\"UIDraw\");\r\n                    UIMgr.get(\"UICollection\").onHide();\r\n                }\r\n                else {\r\n                    UIMgr.tip(\"你的魅力值还不够哦\");\r\n                }\r\n            }\r\n            if (this.ad.visible) {\r\n                ADManager.ShowReward(() => {\r\n                    this.count += 1;\r\n                    this.adNum.text = this.count + \"/\" + this.Data.ADNum;\r\n                    if (this.count >= this.Data.ADNum) {\r\n                        this.str[this.Data.ID] = 0;\r\n                        GameDataController.ManDataRefresh = this.str;\r\n                        UIMgr.get(\"UICollection\").onRefresh();\r\n                        UIMgr.tip(\"恭喜解锁\");\r\n                        GameDataController.man = this.Data;\r\n                        UIMgr.show(\"UIDraw\");\r\n                        UIMgr.get(\"UICollection\").onHide();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            GameDataController.man = this.Data;\r\n            UIMgr.show(\"UIDraw\");\r\n            UIMgr.get(\"UICollection\").onHide();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=CollectionItem.js.map",
  "references": [
    "C:/Users/tomato/Downloads/Baby/Baby/src/script/Admanager.ts",
    "C:/Users/tomato/Downloads/Baby/Baby/src/script/Frame/Core.ts",
    "C:/Users/tomato/Downloads/Baby/Baby/src/script/Game/GameDataController.ts",
    "C:/Users/tomato/Downloads/Baby/Baby/src/script/Game/ManConfigData.ts",
    "C:/Users/tomato/Downloads/Baby/Baby/src/script/Game/UI/UICollection.ts"
  ],
  "map": "{\"version\":3,\"file\":\"CollectionItem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/script/Game/UI/Bag/CollectionItem.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
