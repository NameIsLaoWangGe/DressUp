{
  "code": "import { UIMgr } from \"../../Frame/Core\";\r\nexport default class RecordManager {\r\n    constructor() {\r\n        this.GRV = null;\r\n        this.isRecordVideoing = false;\r\n        this.isVideoRecord = false;\r\n        this.videoRecordTimer = 0;\r\n        this.isHasVideoRecord = false;\r\n    }\r\n    static Init() {\r\n        RecordManager.grv = new TJ.Platform.AppRt.DevKit.TT.GameRecorderVideo();\r\n    }\r\n    static startAutoRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.grv == null)\r\n            RecordManager.Init();\r\n        if (RecordManager.recording)\r\n            return;\r\n        RecordManager.autoRecording = true;\r\n        console.log(\"******************开始录屏\");\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    }\r\n    static stopAutoRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (!RecordManager.autoRecording) {\r\n            console.log(\"RecordManager.autoRecording\", RecordManager.autoRecording);\r\n            return false;\r\n        }\r\n        RecordManager.autoRecording = false;\r\n        RecordManager._end(false);\r\n        if (Date.now() - RecordManager.lastRecordTime > 6000) {\r\n            return true;\r\n        }\r\n        if (Date.now() - RecordManager.lastRecordTime < 3000) {\r\n            console.log(\"小于3秒\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    static startRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.autoRecording) {\r\n            this.stopAutoRecord();\r\n        }\r\n        RecordManager.recording = true;\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    }\r\n    static stopRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"time:\" + (Date.now() - RecordManager.lastRecordTime));\r\n        if (Date.now() - RecordManager.lastRecordTime <= 3000) {\r\n            return false;\r\n        }\r\n        RecordManager.recording = false;\r\n        RecordManager._end(true);\r\n        return true;\r\n    }\r\n    static _start() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180s  ？？？？？\");\r\n        RecordManager.grv.Start(180);\r\n    }\r\n    static _end(share) {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180结束 ？？？？？\");\r\n        RecordManager.grv.Stop(share);\r\n    }\r\n    static _share(successedAc, failAc = null, completedAc = null) {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************吊起分享 ？？？？？\", RecordManager.grv, RecordManager.grv.videoPath);\r\n        if (RecordManager.grv.videoPath) {\r\n            let p = new TJ.Platform.AppRt.Extern.TT.ShareAppMessageParam();\r\n            p.extra.videoTopics = [\"甩锅给队友\", \"回来吧刺激战场\", \"番茄小游戏\", \"抖音小游戏\"];\r\n            p.channel = \"video\";\r\n            p.success = () => {\r\n                successedAc();\r\n            };\r\n            p.fail = () => {\r\n                failAc();\r\n            };\r\n            RecordManager.grv.Share(p);\r\n        }\r\n        else {\r\n            UIMgr.tip(\"暂无录屏，玩一局游戏可以分享\");\r\n        }\r\n    }\r\n}\r\nRecordManager.recording = false;\r\nRecordManager.autoRecording = false;\r\n//# sourceMappingURL=RecordManager.js.map",
  "references": [
    "E:/ClothGame/src/script/Frame/Core.ts"
  ],
  "map": "{\"version\":3,\"file\":\"RecordManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/script/Game/UI/RecordManager.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
