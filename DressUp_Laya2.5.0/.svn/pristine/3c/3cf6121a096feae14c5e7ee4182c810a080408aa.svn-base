{
  "code": "import GameDataController from \"../GameDataController\";\r\nimport { UIMgr } from \"../../Frame/Core\";\r\nimport BagListController from \"./Bag/BagListController\";\r\nexport default class ActiveItem extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.Datas = [];\r\n        this.Icons = [];\r\n        this.Num = 0;\r\n        this.MaxHeight = 85;\r\n        this.MaxWeight = 85;\r\n        this.str = {};\r\n    }\r\n    onAwake() {\r\n        let item = this.owner;\r\n        this.Bg = item.getChildByName(\"Bg\");\r\n        this.TaskPre = item.getChildByName(\"TaskPre\");\r\n        this.Now = this.TaskPre.getChildByName(\"Now\");\r\n        this.Need = this.TaskPre.getChildByName(\"Need\");\r\n        this.IconAll = item.getChildByName(\"IconAll\");\r\n        this.ClothShow = item.getChildByName(\"ClothShow\");\r\n        for (let i = 0; i < this.ClothShow.numChildren; i++) {\r\n            this.Icons.push(this.ClothShow.getChildAt(i).getChildAt(0));\r\n        }\r\n        this.ADBtn = item.getChildByName(\"ADBtn\");\r\n        this.ADBtn.on(Laya.Event.CLICK, this, this.adclick);\r\n    }\r\n    fell(mes) {\r\n        this.Datas = mes;\r\n        console.log(this.Datas);\r\n        this.Icons.forEach((v, i) => {\r\n            if (i < this.Datas.length) {\r\n                v.visible = true;\r\n                v.skin = this.Datas[i].GetPath1();\r\n                let imageHeight = parseFloat(v.height.toString());\r\n                let imagewidth = parseFloat(v.width.toString());\r\n                let pr = 0;\r\n                if (imagewidth > imageHeight) {\r\n                    pr = this.MaxWeight / imagewidth;\r\n                }\r\n                else {\r\n                    pr = this.MaxHeight / imageHeight;\r\n                }\r\n                v.scaleX = pr;\r\n                v.scaleY = pr;\r\n                v.centerX = 0;\r\n                v.centerY = 0;\r\n            }\r\n            else {\r\n                v.visible = false;\r\n            }\r\n        });\r\n        this.Datas.forEach((v, i) => {\r\n            let nv = GameDataController.ClothDataRefresh[this.Datas[i].ID];\r\n            this.str[this.Datas[i].ID] = nv;\r\n        });\r\n        console.log(this.str);\r\n        GameDataController.ClothdatapackSet(this.Datas[0].GetType2, this.str);\r\n        this.Num = GameDataController.ClothAllUnlock(this.str);\r\n        console.log(\"未解锁数量\", this.Num);\r\n        this.Now.value = (this.Datas.length - this.Num) + \"\";\r\n        this.Need.value = (this.Datas.length) + \"\";\r\n        this.ADBtn.visible = this.Num > 0;\r\n    }\r\n    adclick() {\r\n        for (let k in this.str) {\r\n            console.log(k);\r\n            if (this.str[k] == 1) {\r\n                console.log(\"GameDataController.ClothDataRefresh[k]\", k, GameDataController.ClothDataRefresh[k]);\r\n                let dataall = GameDataController.ClothDataRefresh;\r\n                dataall[k] = 0;\r\n                GameDataController.ClothDataRefresh = dataall;\r\n                console.log(this.str, this.Datas[0].GetType2);\r\n                Laya.LocalStorage.setJSON(this.Datas[0].GetType2, this.str);\r\n                UIMgr.get(\"UIActive\").Refresh();\r\n                BagListController.Instance.showList();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=ActiveItem.js.map",
  "references": [
    "E:/ClothGame/src/script/Game/ClothData.ts",
    "E:/ClothGame/src/script/Game/GameDataController.ts",
    "E:/ClothGame/src/script/Frame/Core.ts",
    "E:/ClothGame/src/script/Game/UI/UIActive.ts",
    "E:/ClothGame/src/script/Game/UI/Bag/BagListController.ts"
  ],
  "map": "{\"version\":3,\"file\":\"ActiveItem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/script/Game/UI/ActiveItem.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
