!function(){"use strict";class t extends Laya.Script{constructor(){super(...arguments),this.target=null}onClick(){this.target.active=this.target.visible=!0}}class e extends Laya.Script{constructor(){super(...arguments),this.time=.1,this.ratio=1.04,this.startScaleX=1,this.startScaleY=1,this.scaled=!1}onAwake(){this.owner.on(Laya.Event.MOUSE_DOWN,null,()=>{this.ScaleBig()}),this.owner.on(Laya.Event.MOUSE_UP,null,()=>{this.ScaleSmall()}),this.owner.on(Laya.Event.MOUSE_OUT,null,()=>{this.ScaleSmall()})}ScaleBig(){this.scaled||(this.scaled=!0,Laya.Tween.to(this.owner,{scaleX:this.startScaleX*this.ratio,scaleY:this.startScaleY*this.ratio},1e3*this.time))}ScaleSmall(){this.scaled&&(this.scaled=!1,Laya.Tween.to(this.owner,{scaleX:this.startScaleX,scaleY:this.startScaleY},1e3*this.time))}}class i extends Laya.Script{constructor(){super(...arguments),this.bgImage=null,this.iconImage=null,this.nameText=null,this.infoText=null,this.flag1=null,this.flag2=null,this.flag3=null}onAwake(){this.bgImage=this.owner.getChildByName("bg"),this.iconImage=this.owner.getChildByName("icon"),null!=this.iconImage&&(this.flag1=this.iconImage.getChildByName("flag1"),this.flag2=this.iconImage.getChildByName("flag2"),this.flag3=this.iconImage.getChildByName("flag3")),this.nameText=this.owner.getChildByName("name"),this.infoText=this.owner.getChildByName("info")}DoLoad(){null!=this.data&&(null!=this.iconImage&&(this.iconImage.skin=this.data.icon),null!=this.nameText&&(this.nameText.text=this.data.title),this.SetFlag())}SetFlag(){switch(null!=this.flag1&&(this.flag1.active=this.flag1.visible=!1),null!=this.flag2&&(this.flag2.active=this.flag2.visible=!1),null!=this.flag3&&(this.flag3.active=this.flag3.visible=!1),this.data.tag){case 1:null!=this.flag1&&(this.flag1.active=this.flag1.visible=!0);break;case 2:null!=this.flag2&&(this.flag2.active=this.flag2.visible=!0);break;case 3:null!=this.flag3&&(this.flag3.active=this.flag3.visible=!0)}}OnShow(){this.data.ReportShow()}OnClick(){this.data.Click(),null!=this.onClick_&&this.onClick_(this)}onClick(){this.OnClick()}}class s extends Laya.Script{constructor(){super(...arguments),this.isAwake=!1,this.isStart=!1,this.isEnable=!1,this.isDestroy=!1}OnAwake(){}OnStart(){}OnUpdate(){}OnEnable(){}OnDisable(){}OnDestroy(){}DoAwake(){this.active&&(this.isAwake||(this.isAwake=!0,this.OnAwake()))}DoStart(){this.active&&(this.isStart||(this.isStart=!0,this.OnStart()))}DoUpdate(){this.active&&this.isStart&&this.OnUpdate()}DoEnable(){this.active&&(this.isEnable||(this.isEnable=!0,this.OnEnable()))}DoDisable(){this.isEnable&&(this.isEnable=!1,this.OnDisable())}DoDestroy(){this.isDestroy||(this.isDestroy=!0,this.OnDestroy())}onAwake(){this.DoAwake()}onStart(){this.DoAwake(),this.DoStart()}onUpdate(){this.DoAwake(),this.DoEnable(),this.DoStart(),this.DoUpdate()}onEnable(){this.DoAwake(),this.DoEnable(),this.DoStart()}onDisable(){this.DoDisable()}onDestroy(){this.DoDestroy()}static SetActive(t,e){null!=t&&(t.active=e,t instanceof Laya.Box&&(t.visible=e))}static GetActive(t){return null!=t&&(!!t.active&&!(t instanceof Laya.Box&&!t.visible))}get active(){return s.GetActive(this.owner)}set active(t){s.SetActive(this.owner,t),t?this.DoEnable():this.DoDisable()}}class a extends s{constructor(){super(...arguments),this.promoItem=null,this.shake=!1,this.animTime=0,this.refrTime=0}async OnAwake(){if(this.promoItem=this.owner.getComponent(i),TJ.Develop.Yun.Promo.Data.ReportAwake(a.style),this.promoItem.style=a.style,this.active=!1,!Laya.Browser.onIOS||TJ.API.AppInfo.Channel()!=TJ.Define.Channel.AppRt.ZJTD_AppRt){if(null==a.promoList){let t=await TJ.Develop.Yun.Promo.List.Get(a.style);null==a.promoList&&(a.promoList=t)}a.promoList.count>0?(TJ.Develop.Yun.Promo.Data.ReportStart(a.style),this.active=!0):this.owner.destroy()}}OnEnable(){this.LoadAndShowIcon()}OnDisable(){null!=a.promoList&&a.promoList.Unload(this.promoItem.data)}OnUpdate(){let t=Laya.timer.delta/1e3;this.refrTime+=t,this.refrTime>5&&(this.refrTime-=5,this.LoadAndShowIcon()),this.shake&&(this.animTime+=t,this.animTime%=2.5,this.animTime<=.75?this.promoItem.owner.rotation=25*Math.sin(6*this.animTime*Math.PI)*(1-this.animTime/.75):this.promoItem.owner.rotation=0)}LoadIcon(){let t=a.promoList.Load();return null!=t&&(a.promoList.Unload(this.promoItem.data),this.promoItem.data=t,this.promoItem.onClick_=(()=>{this.LoadAndShowIcon()}),this.promoItem.DoLoad()),t}LoadAndShowIcon(){null!=this.LoadIcon()?this.promoItem.OnShow():null==this.promoItem.data&&this.owner.destroy()}}a.style="P201",a.promoList=null;class h extends s{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingTop=10,this.paddingBottom=10,this.line=0,this.column=0,this.toTop=!1,this.showing=[]}async OnAwake(){this.scroll=this.owner.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0);let t=this.owner.width-this.paddingTop-this.paddingBottom;for(;t>=this.prefab.width;)t=t-this.prefab.width-this.layout.spaceX,this.column++;if(TJ.Develop.Yun.Promo.Data.ReportAwake(h.style),this.active=!1,!Laya.Browser.onIOS||TJ.API.AppInfo.Channel()!=TJ.Define.Channel.AppRt.ZJTD_AppRt)if(this.promoList=await TJ.Develop.Yun.Promo.List.Get(h.style),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(h.style),this.line=Math.ceil(this.promoList.count/this.column),this.layout.repeatX=this.column,this.layout.repeatY=this.line;for(let t=0;t<this.layout.cells.length;t++){let e=this.layout.getCell(t);if(t<this.promoList.count){let t=e.getComponent(i);t.onAwake(),null!=t&&(this.itemList.push(t),t.style=h.style),s.SetActive(e,!0)}else s.SetActive(e,!1)}this.line=Math.ceil(this.itemList.length/this.column);let t=this.paddingTop+this.paddingBottom;t+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1),this.layout.height=t,this.scroll.height<this.layout.height&&(this.scroll.vScrollBarSkin="",this.scroll.vScrollBar.rollRatio=0);for(let t of this.itemList)this.LoadIcon(t);this.active=!0}else this.owner.destroy()}async OnDisable(){this.promoList=await TJ.Develop.Yun.Promo.List.Get(h.style);for(let t of this.itemList)this.LoadIcon(t)}get maxTop(){return 0}get maxBottom(){let t=this.paddingTop+this.paddingBottom;return t+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1)-this.scroll.height}get scrollValue(){return null!=this.scroll.vScrollBar?this.scroll.vScrollBar.value:0}set scrollValue(t){null!=this.scroll.vScrollBar&&(this.scroll.vScrollBar.value=t)}OnUpdate(){let t=Laya.timer.delta/1e3;this.scroll.height<this.layout.height?(this.scrollValue<=this.maxTop?this.toTop=!1:this.scrollValue>=this.maxBottom&&(this.toTop=!0),this.toTop?this.scrollValue-=50*t:this.scrollValue+=50*t):this.scrollValue=this.maxTop,this.CheckShow()}LoadIcon(t){let e=this.promoList.Load();return null!=e&&(this.promoList.Unload(t.data),t.data=e,t.onClick_=(t=>{this.LoadAndShowIcon(t)}),t.DoLoad(),t.infoText.text=1+Math.floor(40*Math.random())/10+"w人在玩"),e}LoadAndShowIcon(t){null!=this.LoadIcon(t)&&t.OnShow()}CheckShow(){for(let t of this.itemList){let e=this.showing.indexOf(t),i=t.owner;Math.abs(-i.y-this.paddingTop-this.prefab.height/2+this.scrollValue+this.scroll.height/2)<this.scroll.height/2?e<0&&(this.showing.push(t),t.OnShow()):e>=0&&this.showing.splice(e,1)}}}h.style="P202";class o extends s{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.layout=null}async OnAwake(){if(this.layout=this.owner.getChildByName("layout"),this.owner.getChildByName("close").clickHandler=new Laya.Handler(null,()=>{this.OnClose()}),TJ.Develop.Yun.Promo.Data.ReportAwake(o.style),this.active=!1,!Laya.Browser.onIOS||TJ.API.AppInfo.Channel()!=TJ.Define.Channel.AppRt.ZJTD_AppRt)if(this.promoList=await TJ.Develop.Yun.Promo.List.Get(o.style),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(o.style);for(let t=0;t<this.layout.cells.length;t++){let e=this.layout.getCell(t);if(t<this.promoList.count){let t=e.getComponent(i);null!=t&&(this.itemList.push(t),t.style=o.style),e.active=e.visible=!0}else e.active=e.visible=!1}for(let t of this.itemList)this.LoadIcon(t);this.active=!0}else this.owner.destroy()}OnEnable(){for(let t of this.itemList)t.OnShow()}async OnDisable(){this.promoList=await TJ.Develop.Yun.Promo.List.Get(o.style);for(let t of this.itemList)this.LoadIcon(t)}LoadIcon(t){let e=this.promoList.Load();return null!=e&&(this.promoList.Unload(t.data),t.data=e,t.onClick_=(t=>{this.LoadAndShowIcon(t)}),t.DoLoad()),e}LoadAndShowIcon(t){null!=this.LoadIcon(t)&&t.OnShow()}OnClose(){let t=this.owner;t.active=t.visible=!1}}o.style="P103";class n extends s{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingLeft=20,this.paddingRight=20,this.toLeft=!1,this.showing=[]}async OnAwake(){if(this.scroll=this.owner.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0),TJ.Develop.Yun.Promo.Data.ReportAwake(n.style),this.active=!1,Laya.Browser.onIOS&&TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return;let t=await TJ.Develop.Yun.Promo.List.Get(n.style);if(null==this.promoList&&(this.promoList=t),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(n.style),this.layout.repeatX=this.promoList.count;for(let t=0;t<this.layout.cells.length;t++){let e=this.layout.getCell(t);if(t<this.promoList.count){let t=e.getComponent(i);null!=t&&(this.itemList.push(t),t.style=n.style),e.active=e.visible=!0}else e.active=e.visible=!1}let t=this.paddingLeft+this.paddingRight;t+=this.prefab.width*this.itemList.length+this.layout.spaceX*(this.itemList.length-1),this.layout.width=t,this.scroll.width<this.layout.width&&(this.scroll.hScrollBarSkin="",this.scroll.hScrollBar.rollRatio=0),this.layout.width=t;for(let t of this.itemList)this.LoadIcon(t);this.active=!0}else this.owner.destroy()}get maxLeft(){return 0}get maxRight(){return this.scroll.hScrollBar.max}get scrollValue(){return null!=this.scroll.hScrollBar?this.scroll.hScrollBar.value:0}set scrollValue(t){null!=this.scroll.hScrollBar&&(this.scroll.hScrollBar.value=t)}OnUpdate(){let t=Laya.timer.delta/1e3;this.scroll.width<this.layout.width?(this.scrollValue>=this.maxRight?this.toLeft=!0:this.scrollValue<=this.maxLeft&&(this.toLeft=!1),this.toLeft?this.scrollValue-=50*t:this.scrollValue+=50*t):this.layout.x=this.maxLeft,this.CheckShow()}LoadIcon(t){let e=this.promoList.Load();if(null!=e){this.promoList.Unload(t.data),t.data=e,t.onClick_=(t=>{this.LoadIcon(t)}),t.DoLoad();let i=this.showing.indexOf(t);i>=0&&this.showing.splice(i,1)}return e}CheckShow(){for(let t of this.itemList){let e=t.owner,i=Math.abs(e.x-this.scrollValue-this.scroll.width/2+e.width/2+this.layout.spaceX),s=this.showing.indexOf(t);i<this.scroll.width/2?s<0&&(this.showing.push(t),t.OnShow()):s>=0&&this.showing.splice(s,1)}}}n.style="P204";class r extends s{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingTop=10,this.paddingBottom=10,this.move=null,this.show=null,this.hide=null,this.maxX=620,this.line=0,this.column=0,this.targetX=0,this.showing=[]}async OnAwake(){this.move=this.owner.getChildByName("move");let t=this.move.getChildByName("button");this.show=t.getChildByName("show"),this.hide=t.getChildByName("hide");let e=this.move.getChildByName("board");this.scroll=e.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0),this.show.clickHandler=new Laya.Handler(null,()=>{this.Show()}),this.hide.clickHandler=new Laya.Handler(null,()=>{this.Hide()});let s=this.scroll.width-this.paddingTop-this.paddingBottom;for(;s>=this.prefab.width;)s=s-this.prefab.width-this.layout.spaceX,this.column++;if(TJ.Develop.Yun.Promo.Data.ReportAwake(r.style),this.show.parent.scaleX<0&&(this.maxX=-this.maxX),TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return Laya.Browser.onIOS?void(this.active=!1):void 0;if(this.active=!1,this.promoList=await TJ.Develop.Yun.Promo.List.Get(r.style),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(r.style),this.line=Math.ceil(this.promoList.count/this.column),this.layout.repeatX=this.column,this.layout.repeatY=this.line;for(let t=0;t<this.layout.cells.length;t++){let e=this.layout.getCell(t);if(t<this.promoList.count){let t=e.getComponent(i);null!=t&&(this.itemList.push(t),t.style=r.style),e.active=e.visible=!0}else e.active=e.visible=!1}this.line=Math.ceil(this.itemList.length/this.column);let t=this.paddingTop+this.paddingBottom;t+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1),this.layout.height=t,this.scroll.height<this.layout.height&&(this.scroll.vScrollBarSkin="",this.scroll.vScrollBar.rollRatio=0);for(let t of this.itemList)this.LoadIcon(t);this.active=!0}else this.owner.destroy()}get scrollValue(){return null!=this.scroll.vScrollBar?this.scroll.vScrollBar.value:0}set scrollValue(t){null!=this.scroll.vScrollBar&&(this.scroll.vScrollBar.value=t)}LoadIcon(t){let e=this.promoList.Load();return null!=e&&(this.promoList.Unload(t.data),t.data=e,t.onClick_=(t=>{this.LoadAndShowIcon(t)}),t.DoLoad()),e}LoadAndShowIcon(t){null!=this.LoadIcon(t)&&t.OnShow()}Show(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt){let t=new TJ.API.Promo.Param;return t.extraData={TJ_App:TJ.API.AppInfo.AppGuid()},void TJ.API.Promo.Pop(t)}this.targetX=this.maxX,this.show.active=this.show.visible=!1,this.hide.active=this.hide.visible=!0,this.scrollValue=0}Hide(){this.targetX=0,this.showing=[]}OnUpdate(){let t=Laya.timer.delta/1e3;if(this.move.centerX!=this.targetX){let e=this.targetX-this.move.centerX,i=3e3*t;e=e>0?Math.min(this.move.centerX+i,this.targetX):Math.max(this.move.centerX-i,this.targetX),this.move.centerX=e,0==this.move.centerX&&(this.show.active=this.show.visible=!0,this.hide.active=this.hide.visible=!1,window.setTimeout(async()=>{this.promoList=await TJ.Develop.Yun.Promo.List.Get(r.style);for(let t of this.itemList)this.LoadIcon(t)},0))}else this.move.centerX==this.maxX&&this.CheckShow()}CheckShow(){for(let t of this.itemList){let e=this.showing.indexOf(t),i=t.owner;Math.abs(-i.y-this.paddingTop-this.prefab.height/2+this.scrollValue+this.scroll.height/2)<this.scroll.height/2?e<0&&(this.showing.push(t),t.OnShow()):e>=0&&this.showing.splice(e,1)}}}r.style="P205";class l extends s{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.layout=null,this.showing=[]}async OnAwake(){if(this.scrollView=this.owner.getChildByName("scroll"),this.layout=this.scrollView.getChildByName("layout"),this.scrollView.vScrollBarSkin="",this.owner.getChildByName("close").clickHandler=new Laya.Handler(null,()=>{this.OnClose()}),TJ.Develop.Yun.Promo.Data.ReportAwake(l.style),this.active=!1,Laya.Browser.onIOS&&TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return;let t=await TJ.Develop.Yun.Promo.List.Get(l.style);if(null==this.promoList&&(this.promoList=t),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(l.style),this.layout.repeatY=this.promoList.count;let t=0;for(let e=0;e<this.layout.cells.length;e++){let a=this.layout.getCell(e);if(e<this.promoList.count){let t=a.getComponent(i);null!=t&&(this.itemList.push(t),t.style=l.style),s.SetActive(a,!0)}else s.SetActive(a,!1);e>0&&(t+=this.layout.spaceY),t+=a.height}this.layout.height=t;for(let t of this.itemList)this.LoadIcon(t);this.active=!0}else this.owner.destroy()}OnEnable(){this.scrollValue=0}async OnDisable(){this.promoList=await TJ.Develop.Yun.Promo.List.Get(l.style);for(let t of this.itemList)this.LoadIcon(t)}OnUpdate(){this.CheckShow()}LoadIcon(t){let e=this.promoList.Load();if(null!=e){this.promoList.Unload(t.data),t.data=e,t.onClick_=(t=>{this.LoadIcon(t)}),t.DoLoad();let i=this.showing.indexOf(t);i>=0&&this.showing.splice(i,1)}return e}get scrollValue(){return null!=this.scrollView.vScrollBar?this.scrollView.vScrollBar.value:0}set scrollValue(t){null!=this.scrollView.vScrollBar&&(this.scrollView.vScrollBar.value=t)}CheckShow(){for(let t of this.itemList){let e=t.owner,i=Math.abs(e.y-this.scrollValue-this.scrollView.height/2+e.height/2+this.layout.spaceY),s=this.showing.indexOf(t);i<this.scrollView.height/2?s<0&&(this.showing.push(t),t.OnShow()):s>=0&&this.showing.splice(s,1)}}OnClose(){let t=this.owner;t.active=t.visible=!1}}l.style="P106";class c extends Laya.Script{onAwake(){this.init()}init(){console.log("ListItem Onawake"),this.List=this.owner,this.List.vScrollBarSkin=""}show(){}_show(){this.show()}refresh(){}_refresh(){this.refresh()}hide(){this.List.visible=!1}_hide(){this.hide()}}var d;!function(t){t.preloadStep="preloadStep",t.preloadCpl="preloadCpl",t.pause="pause",t.energyTick="energyTick",t.showGRVTime="showGRVTime",t.hideGRVTime="hideGRVTime",t.debugExeCmd="debugExeCmd",t.debugBtn1="debugBtn1",t.debugBtn2="debugBtn2",t.debugBtn3="debugBtn3",t.debugBtn4="debugBtn4",t.save="save",t.renderNext="renderNext",t.changeSkin="changeSkin"}(d||(d={}));class u{static get lang(){if(!u._lang&&(u._lang="cn",navigator)){let t=navigator.language;"zh-tw"==t||"zh-hk"==t?u._lang="td":t.indexOf("en")>0&&(u._lang="en")}return u._lang}static get isSubPkg(){return TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt&&u.subPkgInfo.length>0}static get banPromo(){return TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt||TJ.Engine.RuntimeInfo.platform==TJ.Define.Platform.Android}static get onTT(){return TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt}static get onWx(){return TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt}static getSoundPath(t,e){let i;return 1==e?(TJ.Engine.RuntimeInfo.platform,TJ.Define.Platform.Android,i=".wav"):i=".mp3",this.debug&&(i=".mp3"),u._soundsPath+t+i}static get preloadList(){return this._preloadList}}u.debug=!1,u.version="",u.showGRV=!1,u.subPkgInfo=[{name:"sp1",root:"res3d/p1/"},{name:"sp2",root:"res3d/p2/"}],u._soundsPath="res/sounds/",u.playerLocalKeys={gameId:0,version:1,sound:1,signTimes:0,lastSignTs:0,energy:()=>u.maxEnergy,energyTs:"__ts__",lv:0,exp:0,best:0,skinId:1,skinList:{1:-1},guide:1,lastDay:1,todayshow:0,Money:0,FurnitureLevel:1,level:0,newPlay:0},u.maxEnergy=0,u.recoverEnergyTs=0,u.startScene={path:"",nodeConf:["Game"]},u._preloadList=[],u.shareTopics=["西瓜拼拼乐","番茄小游戏","抖音小游戏"];class g{constructor(t){this.map={},this._file=t}}let m={LangConf:new g("lang"),SignConf:new g("sign"),SkinConf:new g("skin")};class p{static calcBorder(t){let e=Laya.Browser.width,i=Laya.Browser.height,s=t.orthographicVerticalSize,a=e/i*s;return{w:a,h:s,hw:.5*a,hh:.5*s}}static randomInRange_i(t,e,i=null){let s;if(t==e)s=t;else{if(!(e>t))throw"x > y";s=((e-t)*(null==i?Math.random():i)+t).toFixed()}return Number(s)}static near(t,e){return Math.abs(t-e)<p.lim}static randomInRange_f(t,e,i=null){let s,a=e-t;if(a<0)throw"x > y";return s=a<p.lim?t:a*(null==i?Math.random():i)+t,Number(s)}static setVec2(t,e,i,s){let a=t[e];a.setValue(null!=i?i:a.x,null!=s?s:a.y),t[e]=a}static setVec3(t,e,i,s,a){let h=t[e];h.setValue(null!=i?i:h.x,null!=s?s:h.y,null!=a?a:h.z),t[e]=h}static setVec4(t,e,i,s,a,h){let o=t[e];o.setValue(null!=i?i:o.x,null!=s?s:o.y,null!=a?a:o.z,null!=h?h:o.w),t[e]=o}static setQuat(t,e,i,s,a,h){let o=t[e];null!=i&&(o.x=i),null!=s&&(o.y=s),null!=a&&(o.z=a),null!=h&&(o.w=h),t[e]=o}static clamp(t,e,i){let s;return s=t<e?e:t>i?i:t}static shakeByFactor(t,e){let i=0,s=t,a=Math.floor(s);i+=a;for(let t=1;t<e;t++)s=10*(s-a),i+=a=Math.floor(s);return 0==(1&i)?1:-1}static rgb2hsv_arr(t,e){p.rgb2hsv(t[0],t[1],t[2],e)}static rgb2hsv(t,e,i,s){let a,h,o,n=Math.max(t,e,i),r=Math.min(t,e,i);a=n==r?e:p.near(t,n)?(e-i)/(n-r):p.near(e,n)?2+(i-t)/(n-r):4+(t-e)/(n-r),(a*=60)<0&&(a+=360),a/=360,h=(n-r)/n,o=n,s.h=a,s.s=h,s.v=o}static hsv2rgb(t,e){let i,s,a,h=t.h,o=t.s,n=t.v;if(0==o)i=s=a=n;else{h*=6;let t=Math.floor(h),e=h-t,r=n*(1-o),l=n*(1-o*e),c=n*(1-o*(1-e));switch(t){case 0:i=n,s=c,a=r;break;case 1:i=l,s=n,a=r;break;case 2:i=r,s=n,a=c;break;case 3:i=r,s=l,a=n;break;case 4:i=c,s=r,a=n;break;case 5:i=n,s=r,a=l;break;default:i=1,s=1,a=1,console.error("hsv transfer error!")}}e[0]=i,e[1]=s,e[2]=a}static getFixedRandom(t){let e=t,i=987654321,s=4294967295;return function(){let t=((i=36969*(65535&i)+(i>>16)&s)<<16)+(e=18e3*(65535&e)+(e>>16)&s)&s;return parseFloat(((t/=4294967296)+.5).toFixed(2))}}static breakMS(t){return p.breakS(Math.round(t/1e3))}static breakS(t){let e=Math.floor(t/60);return t-=60*e,`${("0"+e).slice(-2)}:${("0"+t).slice(-2)}`}static pieMask(t,e,i,s){e.graphics.clear();let a=.5*t.width,h=.5*t.height,o=a>h?h:a;e.graphics.drawPie(a,h,o,i-90,s-90,"fff")}static precision(t,e){let i=t<0?-.5:.5;if(0==e)return parseInt(Number(t)+i+"");{let s=Math.pow(10,e);return parseInt(t*s+i+"")/s}}static formatCrc(t,e=2){let i;return i=t>=1e27?(t/1e27).toFixed(e)+"ae":t>=1e24?(t/1e24).toFixed(e)+"ad":t>=1e21?(t/1e21).toFixed(e)+"ac":t>=1e18?(t/1e18).toFixed(e)+"ab":t>=1e15?(t/1e15).toFixed(e)+"aa":t>=1e12?(t/1e12).toFixed(e)+"t":t>=1e9?(t/1e9).toFixed(e)+"b":t>=1e6?(t/1e6).toFixed(e)+"m":t>=1e3?(t/1e3).toFixed(e)+"k":Math.round(t).toString()}static normV2(t,e,i){let s=Math.sqrt(t*t+e*e),a=t/s,h=e/s;return Array.isArray(i)?(i[0]=a,i[1]=h):(i.x=a,i.y=h),s}static genArcPoint(t,e,i,s){return[[t,e],[t+.134*i,e+.5*s],[t+.5*i,e+.866*s],[t+i,e+s],[t+i+.5*i,e+.866*s],[t+i+.866*i,e+.5*s],[t+2*i,e],[t+i+.866*i,e-.5*s],[t+i+.5*i,e-.866*s],[t+i,e-s],[t+.5*i,e-.866*s],[t+.134*i,e-.5*s],[t,e],[t-.134*i,e+.5*s],[t-.5*i,e+.866*s],[t-i,e+s],[t-i-.5*i,e+.866*s],[t-i-.866*i,e+.5*s],[t-2*i,e],[t-i-.866*i,e-.5*s],[t-i-.5*i,e-.866*s],[t-i,e-s],[t-.5*i,e-.866*s],[t-.134*i,e-.5*s]]}static checkNewDay(t){if(0==t)return!0;let e=new Date(t),i=e.getFullYear(),s=e.getMonth(),a=e.getDate(),h=Date.now(),o=new Date,n=o.getFullYear(),r=o.getMonth(),l=o.getDate();return h>t&&(n>i||r>s||l>a)}static genConf(t){let e={},i=e.map={};e.arr=t;for(let e of t)i[e.id]=e;return e}static custBackOut(t=1.70158){return(e,i,s,a)=>s*((e=e/a-1)*e*((t+1)*e+t)+1)+i}static vibrate(){TJ.API.Vibrate.Short()}static getWord(t){return m.LangConf.map[t][u.lang]}static setSkin(t,e){TJ.Engine.RuntimeInfo.platform==TJ.Define.Platform.Android&&"cn"!=u.lang&&(t.skin="langPic/"+u.lang+"/"+m.LangConf.map[e].name+".png")}}p.lim=1e-5,p.deg2rad=Math.PI/180,p.rad2deg=180/Math.PI;let S=window.G;S||(S={},window.G=S);let C=S,L=window.F;L||(L={},window.F=L);var y;!function(t){let e,i,s,a,h,o,n,r,l;!function(t){class e{constructor(){this.dispatcher=new Laya.EventDispatcher}init(t){e.notify("preloadStep",t),B.autoLoadNext()}static reg(t,i,s){i||console.error("caller must exist!"),e.I.dispatcher.on(t.toString(),i,s)}static notify(t,i){e.I.dispatcher.event(t.toString(),i)}static off(t,i,s){e.I.dispatcher.off(t.toString(),i,s)}static offAll(t){e.I.dispatcher.offAll(t.toString())}static offCaller(t){e.I.dispatcher.offAllCaller(t)}}t.Mgr=e}(e=t.Event||(t.Event={})),function(t){class e{constructor(){this.id=e.internalId,this.inParams=[],this.outParams=[]}static get internalId(){return++e._internalId}set factor(t){this.update&&(this._factor=t,this.update.runWith(this))}get factor(){return this._factor}beforeRun(){this.pause=!1;for(let t of this.inParams)t.length=0;for(let t of this.outParams)t.length=0;this.delayCounter=0}play(){this.beforeRun(),this.counter=0,this.factor=0,this.dir=!0}reverse(t=!1){0==this.loopDir&&(this.beforeRun(),t?this.counter=this.duration*this.factor:(this.counter=this.duration,this.factor=1),this.dir=!1)}discard(){this.hasClear=!0,this.complete&&(this.complete.recover(),this.complete=null),this.update&&(this.update.recover(),this.update=null)}stop(){this.pause=!0}_conf(t,e,i,s,a,h,o,n){this.duration=t,this.update=e,this.complete=i,this.loopDir=s,this.autoClear=a,this.ignoreTime=h,this.ease=o,this.delay=n,this.hasClear=!1,this.pause=!0}_step(t){if(!this.pause&&!this.hasClear)if(this.delayCounter<this.delay)this.delayCounter+=t;else if(this.dir){this.counter+=t;let e=p.clamp(this.counter/this.duration,0,1);this.factor=1==e?1:this.ease(this.counter,0,1,this.duration),1==this.factor&&(0==this.loopDir?(this.pause=!0,this.complete&&this.complete.run(),this.autoClear&&this.discard()):1==this.loopDir?(this.dir=!0,this.counter=0,this.delayCounter=0):2==this.loopDir&&(this.dir=!1,this.counter=this.duration,this.delayCounter=0))}else{this.counter-=t;let e=p.clamp(this.counter/this.duration,0,1);this.factor=0==e?0:this.ease(this.counter,0,1,this.duration),0==this.factor&&(0==this.loopDir?(this.pause=!0,this.complete&&this.complete.run(),this.autoClear&&this.discard()):1==this.loopDir?console.error("unvalid tween"):2==this.loopDir&&(this.dir=!0,this.counter=0,this.delayCounter=0))}}getPG(t,e){let i=this[t],s=i[e];return s||(s=[],i[e]=s),s}}e._internalId=0,t.Tweener=e;class i{constructor(){this.idle=[],this.busy={},this.clearCounter=0}init(t){Laya.timer.frameLoop(1,this,this._update),w.reg("pause",this,this.gamePause),this.pause=!1,w.notify("preloadStep",t),B.autoLoadNext()}gamePause(t){this.pause=t}_update(){let t=this.busy;for(let e in t){let i=t[e];this.pause&&!i.ignoreTime||i._step(Laya.timer.delta)}if(this.clearCounter+=1,10==this.clearCounter){this.clearCounter=0;for(let e in t){let i=t[e];i.hasClear&&(delete t[e],this.idle.push(i))}}}doTween(t,i,s,a,h,o,n,r){let l=this.idle.pop()||new e;return l._conf(t,i,s,a,h,o,n,r),this.busy[l.id]=l,l}static tweenTiny(t,e,s,a,h=!1,o=Laya.Ease.linearNone,n=0){i.I.doTween(t,Laya.Handler.create(e,s,null,!1),a&&Laya.Handler.create(e,a,null,!1),0,!0,h,o,n).play()}static tweenCust(t,e,s,a,h=!1,o=Laya.Ease.linearNone,n=0){return i.I.doTween(t,Laya.Handler.create(e,s,null,!1),a&&Laya.Handler.create(e,a,null,!1),0,!1,h,o,n)}static tweenLoop(t,e,s,a=1,h=0,o=Laya.Ease.linearNone,n=!1){return i.I.doTween(t,Laya.Handler.create(e,s,null,!1),null,a,!1,n,o,h)}static _getFactor(t){return Number(t.factor.toFixed(4))}static lerp_Num(t,e,s,a=0){let h=s.getPG("inParams",a);0==h.length&&(h[0]=t,h[1]=e),s.getPG("outParams",a)[0]=h[0]+(h[1]-h[0])*i._getFactor(s)}static lerp_Vec2(t,e,s,a=0){let h=s.getPG("inParams",a);0==h.length&&(h[0]=t.x,h[1]=e.x-t.x,h[2]=t.y,h[3]=e.y-t.y);let o=s.getPG("outParams",a),n=i._getFactor(s);o[0]=h[0]+h[1]*n,o[1]=h[2]+h[3]*n}}t.Mgr=i}(i=t.Tween||(t.Tween={})),function(t){class e{init(t){B.autoLoadNext()}doGetLh(t){this.willLoad=t,this.poolSign="LH_"+t;let e=Laya.Pool.getItemByCreateFun(this.poolSign,this.createFun,this);return e.active=!0,e}createFun(){let t=Laya.Loader.getRes(`res3d/${this.willLoad}.lh`).clone();return t._orgName=this.poolSign,t}static getLh(t){return e.I.doGetLh(t)}static recycleLh(t,e=!1){e&&t._destroyAllComponent.call(t),t.removeSelf(),t.active=!1,Laya.Pool.recover(t._orgName,t)}}t.Mgr=e;t.BaseObj=class{constructor(){this._isInit=!1}get trans(){return this.obj.transform}recycle(){this._isRecycle||(this._isRecycle=!0,Laya.timer.clearAll(this),this.onRecycle(),i._recycle(this))}useUpdate(){Laya.timer.frameLoop(1,this,this.onUpdate)}onUpdate(){}onRecycle(){this.obj&&D.recycleLh(this.obj)}};class i{static get interId(){return i._id+=1,i._id}static get(t,e){let s=t._cls;if(!s)return void console.error("_cls not implement");let a=i.map[s];a||(i.map[s]=a={});let h=Laya.Pool.getItemByClass(s,t);return h._isInit||(h._clsName=s,h._mid=i.interId,h.onInit(),h._isInit=!0),a[h._mid]=h,h._isRecycle=!1,h.onRecover(e),h}static _recycle(t){delete i.map[t._clsName][t._mid],Laya.Pool.recover(t._clsName,t)}static recycleAll(){for(let t in i.map){let e=i.map[t];for(let t in e)e[t].recycle();e={}}}}i.map={},i._id=0,t.ObjPool=i}(s=t.Resource||(t.Resource={})),function(t){class e{constructor(){this.playerData={}}init(t){let e=u.playerLocalKeys,s=this.doGetValue("gameId");if(u.fstPlay=s!=e.gameId,u.fstPlay){Laya.LocalStorage.clear();for(let t in e)this.doSetValue(t,this.getDf(e[t]))}else{let t=this.doGetValue("version"),i=e.version;if(t<i){this.doSetValue("version",i);for(let t in e){let i=this.doGetValue(t);null==i?this.doSetValue(t,this.getDf(e[t])):this.playerData[t]=i}}else for(let t in e)this.playerData[t]=this.doGetValue(t)}u.maxEnergy>0&&new i(u.recoverEnergyTs,u.maxEnergy);let a=m,h=[],o=[];for(let t in a)h.push(`config/${a[t]._file}.json`),o.push(t);let n=null,r=Laya.Handler.create(null,e=>{let i=null==n?e:e-n;w.notify("preloadStep",i*t),n=e},null,!1),l=Laya.Handler.create(null,t=>{for(let t=0,e=h.length;t<e;t++){let e=Laya.Loader.getRes(h[t].url),i=a[o[t]];if(i.arr=e,e[0].id)for(let t of e)i.map[t.id]=t}r.recover(),B.autoLoadNext()});Laya.loader.create(h,l,r)}getDf(t){return"__ts__"==t?Date.now():"function"==typeof t?t():t}doGetValue(t){let e=Laya.LocalStorage.getItem(t);return""===e?"":JSON.parse(e)}doSetValue(t,e){""!==e&&null!==e||console.error("save data error, key is: ",t);let i=this.playerData[t]!=e;return i&&(this.playerData[t]=e,Laya.LocalStorage.setItem(t,JSON.stringify(e))),i}doSetObjItem(t,e,i){let s=this.playerData[t];s[e]!=i&&(s[e]=i,Laya.LocalStorage.setItem(t,JSON.stringify(s)))}doDeltaNum(t,e){if(0!=e){let i=this.playerData[t];i+=e,this.playerData[t]=i,Laya.LocalStorage.setItem(t,JSON.stringify(i))}}doSetArray(t,e){let i=this.playerData[t];if(e!=i){i.length=0;for(let t=0,s=e.length;t<s;t++)i[t]=e[t]}Laya.LocalStorage.setItem(t,JSON.stringify(i))}doSetObj(t){Laya.LocalStorage.setItem(t,JSON.stringify(this.playerData[t]))}static setValue(t,e){return P.I.doSetValue(t,e)}static setObjItem(t,i,s){e.I.doSetObjItem(t,i,s)}static deltaNum(t,i){e.I.doDeltaNum(t,i)}static setArray(t,i){e.I.doSetArray(t,i)}static setObject(t){e.I.doSetObj(t)}static getPlayerData(t){let i=e.I.playerData;return t?i[t]:i}}t.Mgr=e;class i{constructor(t,i,s=1){this.dataKey="energy",this.tsKey="energyTs",this.updateTs=1e3,this.itv=t,this.onceAdd=s,this.max=i;let a=Date.now(),h=Math.floor((a-this.energyTs)/t);e.setValue(this.dataKey,p.clamp(this.value+h*s,0,this.max)),e.setValue(this.tsKey,this.energyTs+t*h);let o=this.value<this.max?a-this.energyTs:0;this.counter=t-o,Laya.timer.loop(this.updateTs,this,this.scdUpdate)}get value(){return e.getPlayerData(this.dataKey)}get energyTs(){return e.getPlayerData(this.tsKey)}scdUpdate(){if(this.value<this.max){let t=Date.now(),i=this.lastCounter?t-this.lastCounter:this.updateTs;if(this.lastCounter=t,this.counter-=i,this.counter>-80&&this.counter<80&&(this.counter=0),this.counter<=0){let i=-1*this.counter,s=Math.floor(i/this.itv),a=i-s*this.itv;this.counter=this.itv-a;let h=this.value+s+1;h>=this.max&&(h=this.max,this.lastCounter=null),e.setValue(this.dataKey,h),e.setValue(this.tsKey,t-a)}w.notify("energyTick",this.counter)}}}}(a=t.Data||(t.Data={})),function(t){class e{constructor(){this.lastOffset=new Laya.Point,this.efxList=[],this.maxTimeMap=[]}init(t){this.nodeMap={};let e=u.startScene;if(""==e.path)w.notify("preloadStep",t),B.autoLoadNext();else{let i=Laya.Handler.create(null,i=>{this.root=Laya.stage.addChildAt(i,0),this.setMap(e.nodeConf),w.notify("preloadStep",t),B.autoLoadNext()});Laya.Scene.load(e.path,i)}Laya.timer.frameLoop(1,this,this.update)}setMap(t){for(let e of t)if("string"==typeof e){(this.nodeMap[e]=this.root.addChild(new Laya.Sprite)).name=e}else{let t=this.root,i=e[0].split("/");for(let e of i)t=t.getChildByName(e);this.nodeMap[e[1]]=t}}doCloseScene(){this.nodeMap={},this.root&&this.root.destroy(!0),this.root=null}doLoadScene(t,e){this.doCloseScene(),""==t.path?e():Laya.Scene.load(t.path,Laya.Handler.create(null,i=>{this.root=Laya.stage.addChildAt(i,0),this.setMap(t.nodeConf),e()}))}update(){let t=Laya.timer.delta;if(this.efxList.length>0)for(let e=0;e<this.efxList.length;e++){let i=this.efxList[e];i[2]+=t,i[2]>=i[1]&&(i[3]&&i[3](),D.recycleLh(i[0]),this.efxList.splice(e,1),e--)}}doAddLittleEfx(t,e,i,s,a,h,o){}static loadScene(t,i){e.I.doLoadScene(t,i)}static shakeNode(t=.05,i=200,s=e.getNode("Camera")){}static getNode(t){return t?e.I.nodeMap[t]:e.I.root}static addObj(t,i){return e.getNode(i).addChild(t),t}static addEfx(t,i=0,s=0,a=0,h,o,n=!0){return e.I.doAddLittleEfx(t,i,s,a,h,o,n)}}t.Mgr=e}(h=t.Scene||(t.Scene={})),function(t){let e;!function(t){t[t.Once=1]="Once",t[t.Unique=2]="Unique",t[t.Attach=3]="Attach",t[t.Promo=4]="Promo",t[t.Top=5]="Top",t[t.Debug=6]="Debug"}(e=t.OpenType||(t.OpenType={}));class i extends Laya.Script{constructor(){super(...arguments),this._openType=e.Unique,this._forceShowPromo=!1,this._fadeIn=!0,this._updateFuncs=[]}get obj(){return this.owner}get uiName(){return this.constructor.UINAME}onInit(){}onShow(t){}onHide(){}onRefresh(){}update(){}onAwake(){this._taRecoard("Load")}onStart(){this._taRecoard("Start")}onEnable(){this._taRecoard("Enable")}onDisable(){this._taRecoard("Disable")}onDestroy(){this._taRecoard("Destroy")}_taRecoard(t){this._openType}_setLiving(t){this._living=this.obj.visible=this.obj.active=t}onUpdate(){for(let t of this._updateFuncs)t();this.update()}vars(t){return this.owner[t]}btnEv(t,e,i=this,s=!0,a=!0){let h=this.vars(t);return I.btnEv(h,e,i,s,a),h}static btnZoom(t){t.target._inScale||(t.target._inScale=!0,t.target._tScale.play())}static btnShrink(t){t.target._inScale&&(t.target._inScale=!1,t.target._tScale.reverse(!0))}initPrg(t,e=!1,i=0,s=!1){let a=this.owner[t].addComponent(n);return a.isH=e,a.RefreshHN(),a.moveFg=s,a.setValue(i),a}initTab(t,e,i,s=0,a=!1){let h=this.owner[t].addComponent(r);return h.init(e,i,s,a),h}initSmartNum(t,e,i){let s=this.owner[t].addComponent(l);return s.init(e,i),s}floatLight(t,e,i,s=12){let a=this.owner[t].getChildByName("FL");a.x=e;let h=1,o=0;this._updateFuncs.push(()=>{if(0==h)(o+=.02)>2&&(o=0,h=1);else{let t=a.x+s;t>i&&(t=e,h=0),a.x=t}})}rotateImgByName(t,e=-1){this.rotateImgByObj(this.owner[t],e)}rotateImgByObj(t,e=-1){this._updateFuncs.push(()=>{t.rotation+=e})}fadeImgByName(t,e=1.5,i=.008){this.fadeImgByObj(this.owner[t],e,i)}fadeImgByObj(t,e=1.5,i=.008){let s,a=1;this._updateFuncs.push(()=>{s=1-((a+=i)-1)/(e-1),a>=e&&(a=1,s=1),t.scale(a,a),t.alpha=s})}zoomImgByName(t,e=.005,i=.1){this.zoomImgByObj(this.owner[t],e,i)}zoomImgByObj(t,e=.005,i=.1){let s=1,a=1,h=a+i,o=a-i;this._updateFuncs.push(()=>{1==s?(a+=e)>=h&&(a=h,s=2):2==s&&(a-=e)<=o&&(a=o,s=1),t.scale(a,a)})}hide(){I.hide(this.uiName)}createRenderScene3d(t,e,i,s=10,a=-1){let h=new Laya.Scene;-1!=a?this.obj.addChildAt(h,a):this.obj.addChild(h);let o=h.addChild(new Laya.Camera(0,.1,100));o.orthographic=!0,o.orthographicVerticalSize=s,o.clearFlag=Laya.BaseCamera.CLEARFLAG_DEPTHONLY,o.transform.localPosition.setValue(t,e,0),o.transform.localRotationEulerX=i,this.s3d=h,this.cam=o}}t.UIBase=i;class s{constructor(){this.steps=2,this.uiMap={},this.openStack=[],this.uiOffset=0}init(t){this.segment=t/this.steps,Laya.Scene.close("sys/UIInit.scene"),this.checkNext(),Laya.Scene.open("sys/UITop.scene",!1,null,Laya.Handler.create(null,t=>{this.uiTop=t.addComponent(h),this.uiTop.onInit(),this.uiOffset+=1,u.debug?Laya.Scene.open("sys/UIDebug.scene",!1,null,Laya.Handler.create(null,t=>{this.uiDebug=t.addComponent(a),this.uiDebug.onInit(),this.uiOffset+=1,this.checkNext()})):this.checkNext()}))}checkNext(){w.notify("preloadStep",this.segment),this.steps--,0==this.steps&&B.autoLoadNext()}doShow(t,e){let i=this.uiMap[t];console.log("dasfadsf=>>>>>",`sys/${t}.scene`),i?this._show(i,e):Laya.Scene.open(`sys/${t}.scene`,!1,null,Laya.Handler.create(null,s=>{let a=C[t];a.UINAME=t,i=s.addComponent(a),this.uiMap[t]=i,i.onInit(),this._show(i,e)}))}_show(t,i){let s=!1;if(t._openType==e.Once||t._openType==e.Unique){s=!0;for(let t of this.openStack)this._hide(t);this.openStack.length=0,this.openStack.push(t)}else this.openStack.push(t);t._setLiving(!0);let a=this.uiOffset;this.uiRoot||(this.uiRoot=Laya.stage.getChildAt(0),a=0);let h=this.uiRoot.numChildren-1-a;this.uiRoot.setChildIndex(t.owner,h),t._fadeIn&&b.tweenTiny(250,null,e=>{t.obj.alpha=e.factor},null,!0),t.onShow(i)}doHide(t){for(let e=0,i=this.openStack.length;e<i;e++){let i=this.openStack[e];if(i.uiName==t){this.openStack.splice(e,1),this._hide(i);break}}}doRefreshCurShowing(){for(let t of this.openStack)t.onRefresh()}_hide(t){t._openType==e.Once?Laya.Scene.close(t.obj.url):t._setLiving(!1),t.onHide()}static show(t,e){s.I.doShow(t,e)}static hide(t){s.I.doHide(t)}static refreshCurShowing(){s.I.doRefreshCurShowing()}static tip(t,e=0){s.I.uiTop.showTip(t,e)}static interim1(t){s.I.uiTop.showInterim1(t)}static interim2(t){s.I.uiTop.showInterim2(t)}static ctrlWait(t){s.I.uiTop.ctrlWait(t)}static ctrlMask(t){s.I.uiTop.ctrlMask(t)}static guide(t){s.I.uiTop.guide(t)}static guideRect(t,e,i,a,h,o,n,r){s.I.uiTop.guideRect(t,e,i,a,h,o,n,r)}static guideCircle(t,e,i,a,h,o,n){s.I.uiTop.guideCircle(t,e,i,a,h,o,n)}static ctrlGuide(t){s.I.uiTop.ctrlGuide(t)}static get(t){let e=s.I.uiMap[t];return e&&e._living?e:null}static debugObj(t){s.I.uiDebug.bindObj(t)}static btnEv(t,e,s,a=!0,h=!0){t.on(Laya.Event.CLICK,s,()=>{a&&B.playSound("btn"),e.call(s)}),h&&(t.on(Laya.Event.MOUSE_DOWN,i,i.btnZoom),t.on(Laya.Event.MOUSE_UP,i,i.btnShrink),t.on(Laya.Event.MOUSE_OUT,i,i.btnShrink),t._tScale=b.tweenCust(100,null,e=>{let i=1+.04*e.factor;t.scale(i,i)},null,!0))}static showP(t,e){}static hideP(t){}}t.Mgr=s;class a extends i{constructor(){super(...arguments),this._openType=e.Debug,this.sldList=[]}get ctrlTrans(){return this.ctrlObj.transform}onInit(){this.obj.alpha=.5,this.btnEv("BtnSwitch",this.onClick_BtnSwitch),this.uiState=!0,this.onClick_BtnSwitch(),this.btnEv("BtnExecute",()=>{w.notify("debugExeCmd",this.vars("InputCmd").text)});for(let t=1;t<=4;t++)this.btnEv("Btn"+t,()=>{w.notify("debugBtn"+t)});this.transTab=this.initTab("RatioGroup",(t,e)=>{this.changeTransOp(t)},(t,e,i)=>{t.getChildAt(0).skin=e?"common/ratio2.png":"common/ratio1.png"});let t=0;for(let e of["SldX","SldY","SldZ"]){let i=this.vars(e),s={id:t,sld:i,sldT:i.getChildByName("SldT"),rangeT:i.getChildByName("Range"),min:0,max:100};this.sldList.push(s),i.on(Laya.Event.CHANGE,this,this.onSldChange,[s]),t++}this.vars("RangeInput").on(Laya.Event.ENTER,this,this.onInputCpl),this.vars("VertionT").text=u.version,this._setLiving(!0)}onClick_BtnSwitch(){this.uiState=!this.uiState,this.vars("TransCtrl").visible=this.vars("InputCtrl").visible=this.vars("BtnCtrl").visible=this.uiState}onInputCpl(t){a.OPRange[this.transTab.curIdx]=Number(t.text),this.transTab.force(this.transTab.curIdx)}bindObj(t){this.ctrlObj=t,this.syncTransUIInfo()}onSldChange(t){if(this.ctrlObj){let e=t.min+(t.max-t.min)*t.sld.value/100;e=p.precision(e,2),t.sldT.text=e,0==t.id?p.setVec3(this.ctrlTrans,this.opName,e):1==t.id?p.setVec3(this.ctrlTrans,this.opName,null,e):2==t.id&&p.setVec3(this.ctrlTrans,this.opName,null,null,e)}}changeTransOp(t){this.opName=a.OPName[t],this.range=a.OPRange[t],this.vars("RangeInput").text=this.range,this.syncTransUIInfo()}syncTransUIInfo(){if(this.ctrlObj){let t=this.ctrlTrans[this.opName];this.setSldItem(0,t.x),this.setSldItem(1,t.y),this.setSldItem(2,t.z)}}setSldItem(t,e){let i=this.sldList[t];i.min=p.precision(e-this.range,2),i.max=p.precision(e+this.range,2),i.rangeT.text=`${i.min} ~ ${i.max}`,50==i.sld.value?this.onSldChange(i):i.sld.value=50}}a.OPName=["localPosition","localRotationEuler","localScale"],a.OPRange=[10,180,2],t.UIDebug=a;class h extends i{constructor(){super(...arguments),this._openType=e.Top,this.cacheSize=new Laya.Point,this.zeroSize=new Laya.Point(0,0),this.tipList=[]}onInit(){(this.interim1=this.vars("Interim1")).visible=!1,(this.interim2=this.vars("Interim2")).visible=!1,(this.waitting=this.vars("Waitting")).visible=!1,(this.finger=this.vars("Finger")).visible=!1,(this.block=this.btnEv("Block",()=>{},null,!1)).visible=!1,this.lt=this.vars("LT"),this.lb=this.vars("LB"),this.rt=this.vars("RT"),this.rb=this.vars("RB");for(let t=0;t<3;t++){let e=this.vars("Tip"+t).addComponent(o);e.init(this.tipList),this.tipList.push(e)}this.tRot=b.tweenLoop(3e3,this,this.tweenRot,1),this.w1=this.vars("W1"),this.w2=this.vars("W2"),this._setLiving(!0)}showTip(t,e){let i=this.tipList.pop();i&&(e?i.showH(t):i.showV(t))}showInterim1(t){this.onCpl=t,this.interim1.visible=this.block.visible=!0,b.tweenTiny(300,this,this.tweenAlpha,this.tweenAlphaCpl,!0)}tweenAlpha(t){this.interim1.alpha=t.factor}tweenAlphaCpl(){this.onCpl&&(this.onCpl(),this.onCpl=null),b.tweenTiny(500,this,this.tweenAlpha2,this.tweenAlphaCpl2,!0,Laya.Ease.linearNone,200)}tweenAlpha2(t){this.interim1.alpha=1-t.factor}tweenAlphaCpl2(){this.interim1.visible=this.block.visible=!1}showInterim2(t){this.onCpl=t,this.interim2.visible=this.block.visible=!0,this.cacheSize.x=.6*Laya.stage.width,this.cacheSize.y=.6*Laya.stage.height,b.tweenTiny(300,this,this.tweenScale,this.tweenScaleCpl,!0)}tweenScale(t){b.lerp_Vec2(this.zeroSize,this.cacheSize,t);let e=t.outParams[0][0],i=t.outParams[0][1];this.lt.size(e,i),this.lb.size(e,i),this.rt.size(e,i),this.rb.size(e,i)}tweenScaleCpl(){this.onCpl&&(this.onCpl(),this.onCpl=null),b.tweenTiny(400,this,this.tweenScale2,this.tweenScaleCpl2,!0,Laya.Ease.linearNone,250)}tweenScale2(t){b.lerp_Vec2(this.cacheSize,this.zeroSize,t);let e=t.outParams[0][0],i=t.outParams[0][1];this.lt.size(e,i),this.lb.size(e,i),this.rt.size(e,i),this.rb.size(e,i)}tweenScaleCpl2(){this.interim2.visible=this.block.visible=!1}ctrlWait(t){t?(this.waitting.visible=this.block.visible=!0,this.tRot.play()):b.tweenTiny(200,this,this.tweenWaitAlpha,this.tweenWaitAlphaCpl,!0,Laya.Ease.linearNone,300)}tweenWaitAlpha(t){this.waitting.alpha=1-t.factor}tweenWaitAlphaCpl(){this.tRot.stop(),this.waitting.visible=this.block.visible=!1}tweenRot(t){this.w1.rotation=this.w2.rotation=360*t.factor}ctrlMask(t){this.block.visible=t}_initGuide(){let t=new Laya.Sprite;Laya.stage.addChild(t),t.cacheAs="bitmap";let e=new Laya.Sprite;t.addChild(e),e.alpha=.5,e.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000");let i=new Laya.Sprite;t.addChild(i),i.blendMode="destination-out";let s=new Laya.HitArea;s.hit.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000"),t.hitArea=s,t.mouseEnabled=!0,this.guideContainer=t,this.hitArea=s,this.interactionArea=i}guideRect(t,e,i,s,a,h,o,n){this._before(),this.hitArea.unHit.clear(),this.hitArea.unHit.drawRect(t,e,i,s,"#000000"),this.interactionArea.graphics.clear(),this.interactionArea.graphics.drawRect(t,e,i,s,"#000000"),this.finger.visible=!0,this.finger.pos(a,h),this._after(a,h,o,n)}guideCircle(t,e,i,s,a,h,o){this._before(),this.hitArea.unHit.clear(),this.hitArea.unHit.drawCircle(t,e,i,"#000000"),this.interactionArea.graphics.clear(),this.interactionArea.graphics.drawCircle(t,e,i,"#000000"),this.finger.visible=!0,this.finger.pos(s,a),this._after(s,a,h,o)}guide(t){this._before();let e=1.1*t.width,i=1.1*t.height,s=t.x-e*t.anchorX,a=t.y-i*t.anchorY,h=t.x+e*(t.anchorX-.5),o=t.y+i*(t.anchorY-.5);this.hitArea.unHit.clear(),this.hitArea.unHit.drawRect(s,a,e,i,"#000000"),this.interactionArea.graphics.clear(),this.interactionArea.graphics.drawRect(s,a,e,i,"#000000"),this.finger.visible=!0,this.finger.pos(h,h),this._after(h,o,h+8,o+8)}_before(){this.guideContainer||this._initGuide(),this.ctrlGuide(!0)}_after(t,e,i,s){this.tFinger=b.tweenLoop(500,null,a=>{b.lerp_Num(t,i,a,0),b.lerp_Num(e,s,a,1),this.finger.pos(a.outParams[0][0],a.outParams[1][0])},2),this.tFinger.play()}ctrlGuide(t){this.guideContainer&&(this.finger.visible=this.guideContainer.visible=t),this.tFinger&&(this.tFinger.discard(),this.tFinger=null)}}t.UITop=h;t.UIPromo=class extends i{constructor(){super(...arguments),this._openType=e.Promo,this.p101List=[]}onInit(){this._setLiving(!0);for(let t=1;t<=6;t++){let e=this.attachCom(`P101_${t}`,C.P101);this.p101List.push(e),e.shake=!0,e.autoRefresh=!0}this.p102=this.attachCom("P102",C.P102),this.p103=this.attachCom("P103",C.P103),this.p104=this.attachCom("P104",C.P104),this.p105=this.attachCom("P105",C.P105),this.p106=this.attachCom("P106",C.P106)}hide(){for(let t of this.p101List)t.hidePromo();this.p102.hidePromo(),this.p103.hidePromo(),this.p104.hidePromo(),this.p105.hidePromo(),this.p106.hidePromo()}attachCom(t,e){let i=this.obj[t].addComponent(e);return i.onInit(),i}showP(t,e){if(!u.banPromo)if(101==t){let t=e.length;for(let i=0;i<this.p101List.length;i++){let s=this.p101List[i];i<t?s.showPromo(e[i]):s.hidePromo()}}else this["p"+t].showPromo()}hideP(t){if(101==t)for(let t of this.p101List)t.hidePromo();else this["p"+t].hidePromo()}};class o extends Laya.Script{init(t){this.belong=t,this.contentT=this.owner.getChildAt(0),void 0===o.initX&&(o.initX=this.obj.x,o.initY=this.obj.y),this.obj.visible=!1,this.tBg=b.tweenCust(300,this,this.tweenAlpha,this.tweenAlphaCpl,!0),this.tVertPos=b.tweenCust(450,this,this.tweenVertPos,this.tweenVertPosCpl,!0,Laya.Ease.linearNone,350),this.tHorzPosIn=b.tweenCust(300,this,this.tweenHorzPosIn,this.tweenHorzPosInCpl,!0,Laya.Ease.backOut),this.tHorzPosOut=b.tweenCust(300,this,this.tweenHorzPosOut,this.clearSelf,!0,Laya.Ease.backIn,350)}get obj(){return this.owner}clearSelf(){this.obj.visible=!1,this.belong.push(this)}tweenAlpha(t){this.obj.alpha=t.factor}tweenAlphaCpl(){0==this.moving?(this.moving=1,this.tVertPos.play()):2==this.moving&&(this.moving=0,this.clearSelf())}tweenVertPos(t){b.lerp_Num(o.MoveY[0],o.MoveY[1],t),this.obj.y=t.outParams[0][0]}tweenVertPosCpl(){this.moving=2,this.tBg.reverse()}showV(t){this.moving=0,this.contentT.text=t,this.obj.visible=!0,this.obj.pos(o.initX,o.MoveY[0]),this.tBg.play()}tweenHorzPosIn(t){b.lerp_Num(o.MoveX[0],o.initX,t),this.obj.x=t.outParams[0][0]}tweenHorzPosInCpl(){this.tHorzPosOut.play()}tweenHorzPosOut(t){b.lerp_Num(o.initX,o.MoveX[1],t),this.obj.x=t.outParams[0][0]}showH(t){this.contentT.text=t,this.obj.alpha=1,this.obj.visible=!0,this.obj.pos(o.MoveX[0],o.initY),this.tHorzPosIn.play()}}o.MoveY=[200,30],o.MoveX=[1050,-350];class n extends Laya.Script{get bg(){return this.owner}onAwake(){this.fg=this.owner.getChildAt(0),this.mask=this.fg.mask,this.flag=this.owner.getChildByName("Flag"),this.flag&&(this.flagInitX=this.flag.x),this.virtualV=0,this.hl=this.owner.getChildByName("HL"),this.hl&&(this.tHL=b.tweenCust(200,this,this.tweenHL),this.hl.alpha=0)}RefreshHN(){this.isH?this.width=this.mask.height:this.width=this.mask.width}aspect(){if(this.isH){let t=this._value*this.width;t<1&&(t=1),this.moveFg?this.fg.height=t:this.mask.height=t,this.flag&&(this.flag.x=this.flagInitX+t)}else{let t=this._value*this.width;t<1&&(t=1),this.moveFg?this.fg.width=t:this.mask.width=t,this.flag&&(this.flag.x=this.flagInitX+t)}}setValue(t){this.virtualV=0,this._value=this.targV=p.clamp(t,0,1),this.aspect()}addValue(t,e=!1){if(e){this.targV+=t;let e=this.targV-Math.floor(this.targV);t>0&&(this.targV=1-e<1e-4?0:e),this.virtualV+=t}else this._value=p.clamp(this._value+t,0,1),this.aspect()}tweenHL(t){let e=t.factor;e<.5?e*=2:e=1-2*(e-.5),this.hl.alpha=e}onUpdate(){if(this.virtualV>0){let t=.01,e=this.virtualV-t;e<=0&&(t=this.virtualV,e=0),this.virtualV=e;let i=this._value+t;(i>=1||0==this.virtualV&&0==this.targV&&0!=i)&&(i=0,this.hl&&this.tHL.play()),this._value=i,this.aspect()}}}t.ProgressBar=n;class r extends Laya.Script{get curIdx(){return this._curIdx}set curIdx(t){this.isCancel?this._curIdx==t?(this.onTabView(this.owner.getChildAt(this._curIdx),!1,this._curIdx),this.onTabChange(this._curIdx,!1),this._curIdx=-1):this.doChangeTab(t):this._curIdx!=t&&this.doChangeTab(t)}doChangeTab(t){-1!=this._curIdx&&this.onTabView(this.owner.getChildAt(this._curIdx),!1,this._curIdx),this._curIdx=t,this.onTabView(this.owner.getChildAt(this._curIdx),!0,this._curIdx),this.onTabChange(this._curIdx,!0)}init(t,e,i,s){this.onTabChange=t,this.onTabView=e,this.isCancel=s,this._curIdx=i;for(let t=0;t<this.owner.numChildren;t++){let e=this.owner.getChildAt(t);e.on(Laya.Event.CLICK,null,()=>{this.curIdx=t}),this.onTabView(e,t==i,t)}-1!=i&&this.onTabChange(i,!0)}force(t){-1==t&&this.isCancel?-1!=this._curIdx&&(this.onTabView(this.owner.getChildAt(this._curIdx),!1,this._curIdx),this._curIdx=-1):this._curIdx==t?this.onTabChange(t,!0):this.doChangeTab(t)}}t.PageTab=r;class l extends Laya.Script{set color(t){this.nt.color=t}init(t=this.dfFmt,e=200){this.fmt=t,this.nt=this.owner;let i=.5*this.nt.width,s=.5*this.nt.height;this.nt.pivot(i,s),this.nt.pos(this.nt.x+i,this.nt.y+s),this.tScale=b.tweenCust(e,this,this.tweenScale,this.tweenScaleCpl,!0)}dfFmt(t){return t}resetNum(t){this.counter=0,this.targV=this.curV=t,this.nt.text=this.fmt(t)}setNum(t){this.targV=t,this.tScale.play()}addNum(t){this.targV+=t,this.tScale.play()}setNumFrom(t,e){this.resetNum(e),this.setNum(t)}tweenScale(t){let e;e=t.factor<.5?1+.3*t.factor/.5:1.3-.3*(t.factor/.5-1),this.nt.scale(e,e)}tweenScaleCpl(){this.nt.scale(1,1)}onUpdate(){if(this.curV!=this.targV&&(this.counter+=Laya.timer.delta,this.counter>=30)){this.counter=0;let t=this.targV-this.curV,e=Math.floor(t/5);0==e&&(e=t>0?1:-1),this.curV+=e,this.nt.text=this.fmt(this.curV)}}}t.SmartNumber=l}(o=t.UI||(t.UI={})),function(t){class e{init(t){console.log("开始分包",e.subPkgInfo),TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt?(this.pkgFlag=0,this.pkgInfo=e.subPkgInfo,this.segment=t/this.pkgInfo.length,this.loadPkg_wx()):(w.notify("preloadStep",t),w.notify("sgl"),B.autoLoadNext())}loadPkg_wx(){if(this.pkgFlag==this.pkgInfo.length)w.notify("sgl"),B.autoLoadNext();else{let t=this.pkgInfo[this.pkgFlag],i=t.name,s=t.root;console.log("开始分包 loadPkg_wx()",e.subPkgInfo),Laya.Browser.window.wx.loadSubpackage({name:i,success:t=>{console.log(`load ${i} suc`),w.notify("preloadStep",this.segment),Laya.MiniAdpter.subNativeFiles[i]=s,Laya.MiniAdpter.nativefiles.push(s),this.pkgFlag++,this.loadPkg_wx()},fail:t=>{console.error(`load ${i} err: `,t)}})}}}e.subPkgInfo=[{name:"sp1",root:"res3d/p1"},{name:"sp2",root:"res3d/p2"}],t.Mgr=e}(n=t.SubPkg||(t.SubPkg={})),function(t){t.BaseState=class{constructor(){this.inited=!1}tryEnter(t){this.inited||(this.inited=!0,this.onInit()),this.onEnter(t)}};t.StateMachine=class{constructor(t,e){this.isStart=!1,this.stateMap={};for(let i=0;i<e.length;i++){let s=new(0,e[i]);s.host=t,s.fsm=this,this.stateMap[s.name]=s,0==i&&(this.curState=s)}}to(t,e){if(this.isStart&&this.curState.name!=t){let i=this.stateMap[t];i&&(this.curState.onExit(),this.curState=i,this.curState.tryEnter(e))}}start(t){this.isStart=!0,this.curState.tryEnter(t)}}}(r=t.Fsm||(t.Fsm={})),function(t){class r{static start(){for(let t of r.mgrs)t.I=new t;r.fsm=new T(this,[C.Game_Init,C.Game_Ready,C.Game_Main,C.Game_Settle]),r.fsm.start()}static readyAll(){r.autoLoadNext()}static autoLoadNext(){r.curLoadPos+=1;let t=r.mgrs[r.curLoadPos];t?t.I.init(r.loadSeg[r.curLoadPos]):Laya.timer.once(300,null,()=>{w.notify("preloadCpl")})}static playSound(t){return Laya.SoundManager.playSound(u.getSoundPath(t,1))}static playMusic(t){return Laya.SoundManager.playMusic(u.getSoundPath(t,2))}static checkSign(t=!0,e=7){let i=0,s=P.getPlayerData("lastSignTs");if(s){let a=P.getPlayerData("signTimes"),h=p.checkNewDay(s);t&&h&&a==e&&(P.setValue("signTimes",0),a=0),i=a<e?h?1:2:3}else i=1;return i}static signWithoutReward(){P.setValue("lastSignTs",Date.now()),P.deltaNum("signTimes",1)}static sign(t,e=1){let i=P.getPlayerData("signTimes"),s=e*m.SignConf.arr[i].reward;return P.deltaNum(t,s),r.signWithoutReward(),s}}r.mgrs=[e.Mgr,n.Mgr,i.Mgr,s.Mgr,a.Mgr,o.Mgr,h.Mgr],r.loadSeg=[.3,.02,.02,.4,.02,.1,.14],r.curLoadPos=-1,t.Mgr=r}(l=t.Game||(t.Game={}))}(y||(y={}));y.SubPkg.Mgr;let w=y.Event.Mgr,b=y.Tween.Mgr,D=(y.Tween.Tweener,y.Resource.Mgr),P=y.Data.Mgr,I=(y.Scene.Mgr,y.UI.Mgr),v=y.UI.UIBase,k=(y.UI.UIDebug,y.UI.UITop,y.UI.OpenType),B=y.Game.Mgr,T=y.Fsm.StateMachine,f=y.Fsm.BaseState;y.Resource.BaseObj,y.Resource.ObjPool;class _{constructor(){this.GRV=null,this.isRecordVideoing=!1,this.isVideoRecord=!1,this.videoRecordTimer=0,this.isHasVideoRecord=!1}static Init(){_.grv=new TJ.Platform.AppRt.DevKit.TT.GameRecorderVideo}static startAutoRecord(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(null==_.grv&&_.Init(),_.recording||(_.autoRecording=!0,console.log("******************开始录屏"),_._start(),_.lastRecordTime=Date.now()))}static stopAutoRecord(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return _.autoRecording?(_.autoRecording=!1,_._end(!1),Date.now()-_.lastRecordTime>6e3||(!(Date.now()-_.lastRecordTime<3e3)||(console.log("小于3秒"),!1))):(console.log("RecordManager.autoRecording",_.autoRecording),!1)}static startRecord(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(_.autoRecording&&this.stopAutoRecord(),_.recording=!0,_._start(),_.lastRecordTime=Date.now())}static stopRecord(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return console.log("time:"+(Date.now()-_.lastRecordTime)),!(Date.now()-_.lastRecordTime<=3e3)&&(_.recording=!1,_._end(!0),!0)}static _start(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(console.log("******************180s  ？？？？？"),_.grv.Start(180))}static _end(t){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(console.log("******************180结束 ？？？？？"),_.grv.Stop(t))}static _share(t,e=null,i=null){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)if(console.log("******************吊起分享 ？？？？？",_.grv,_.grv.videoPath),_.grv.videoPath){let i=new TJ.Platform.AppRt.Extern.TT.ShareAppMessageParam;i.extra.videoTopics=["#学生党#梦幻大明星百变造型#","番茄小游戏","抖音小游戏"],i.channel="video",i.success=(()=>{t()}),i.fail=(()=>{e()}),_.grv.Share(i)}else I.tip("暂无录屏，玩一局游戏可以分享")}}var A,x,N,R,G,O,E;_.recording=!1,_.autoRecording=!1,function(t){t[t.Hair=0]="Hair",t[t.Dress=1]="Dress",t[t.Coat=2]="Coat",t[t.Shirt=3]="Shirt",t[t.Trousers=4]="Trousers",t[t.Socks=5]="Socks",t[t.Shose=6]="Shose",t[t.Ornament=7]="Ornament",t[t.Pet=8]="Pet"}(A||(A={}));class U extends Laya.Script{constructor(){super(...arguments),this.scaleDelta=0,this.stars=[],this.PhotosIndex=0,this.mes=[],this.arr={},this.nowclothData={Hair:0,Dress:0,Coat:0,Shirt:0,Trousers:0,Socks:0,Shose:0,Ornament:0,Pet:0}}onAwake(){U.Instance=this,this.FemaleRoot=this.owner,this.Hair=this.FemaleRoot.getChildByName("Hair"),this.Hair1=this.FemaleRoot.getChildByName("Hair1"),this.Ornament=this.FemaleRoot.getChildByName("Ornament"),this.Ornament1=this.FemaleRoot.getChildByName("Ornament1"),this.Shirt=this.FemaleRoot.getChildByName("Shirt"),this.Shirt1=this.FemaleRoot.getChildByName("Shirt1"),this.Trousers=this.FemaleRoot.getChildByName("Trousers"),this.Trousers1=this.FemaleRoot.getChildByName("Trousers1"),this.Dress=this.FemaleRoot.getChildByName("Dress"),this.Dress1=this.FemaleRoot.getChildByName("Dress1"),this.Socks=this.FemaleRoot.getChildByName("Socks"),this.Socks1=this.FemaleRoot.getChildByName("Socks1"),this.Shose=this.FemaleRoot.getChildByName("Shose"),this.Shose1=this.FemaleRoot.getChildByName("Shose1"),this.Coat=this.FemaleRoot.getChildByName("Coat"),this.Coat1=this.FemaleRoot.getChildByName("Coat1"),this.Pet=this.FemaleRoot.getChildByName("Pet"),this.Man=this.FemaleRoot.getChildByName("Man"),this.Man.visible=!1;for(let t=0;t<8;t++)this._ClothChange(0,t);this.Star=this.FemaleRoot.getChildByName("Star")}_ClothChange(t,e){switch(e){case A.Hair:this.HairChange(t);break;case A.Dress:this.DressChange(t);break;case A.Coat:this.CoatChange(t);break;case A.Shirt:this.ShirtChange(t);break;case A.Trousers:this.TrousersChange(t);break;case A.Socks:this.SocksChange(t);break;case A.Shose:this.ShoseChange(t);break;case A.Ornament:this.OrnamentChange(t);break;case A.Pet:this.PetChange(t)}if(40501==this.nowclothData.Hair&&40502==this.nowclothData.Dress&&40503==this.nowclothData.Ornament&&40504==this.nowclothData.Shose){I.get("UIReady").Pick.disabled=!0,_.startAutoRecord(),this.Man.visible=!0;let t=this.Man;Laya.Tween.to(t,{x:94,update:new Laya.Handler(this,()=>{this.Man.x=t.x})},4e3,Laya.Ease.linearNone),Laya.timer.once(6e3,this,()=>{I.get("UIReady").UIWeddingShare.visible=!0,I.get("UIReady").Pick.disabled=!1,Laya.timer.once(500,this,_.stopAutoRecord)})}else this.Man.x=-310,this.Man.visible=!1}ClothReceive(){for(let t=0;t<8;t++)this._ClothChange(0,t)}GetPhotosData(){q.PhotosData()}Share(){console.log("拍照"),I.tip("拍照成功！");let t=q.PhotosData;if(t){this.mes=t;for(let t=0;t<this.mes.length;t++)if(this.mes[t].Hair==this.nowclothData.Hair&&this.mes[t].Dress==this.nowclothData.Dress&&this.mes[t].Coat==this.nowclothData.Coat&&this.mes[t].Shirt==this.nowclothData.Shirt&&this.mes[t].Trousers==this.nowclothData.Trousers&&this.mes[t].Socks==this.nowclothData.Socks&&this.mes[t].Shose==this.nowclothData.Shose&&this.mes[t].Ornament==this.nowclothData.Ornament)return void console.log("重复了......................")}this.mes.push(this.nowclothData),q.PhotosData=this.mes,console.log(q.PhotosData)}HairChange(t){this.Hair.visible=this.Hair1.visible=!1,null!=t&&0!=t&&this.nowclothData.Hair!=t||(t=10002),this.nowclothData.Hair=t,this.Hair.visible=this.Hair1.visible=!0;let e=q._clothData.get(t);this.Hair.zOrder=e.Sort1,this.Hair1.zOrder=e.Sort2,this.Hair.skin=e.GetPath1(),this.Hair1.skin=e.GetPath2(),this.Hair.centerX=e.GetPosition1().x,this.Hair.centerY=e.GetPosition1().y,console.log("头发的坐标："+this.Hair.centerX),console.log("头发的坐标："+this.Hair.centerY),this.Hair1.centerX=e.GetPosition2().x,this.Hair1.centerY=e.GetPosition2().y}OrnamentChange(t){if(this.Ornament.visible=this.Ornament1.visible=!1,null==t||0==t||this.nowclothData.Ornament==t)return t=0,void(this.nowclothData.Ornament=t);this.nowclothData.Ornament=t,this.Ornament.visible=this.Ornament1.visible=!0;let e=q._ClothData.get(t);if(this.Ornament.zOrder=e.Sort1,this.Ornament1.zOrder=e.Sort2,this.Ornament.skin=e.GetPath1(),this.Ornament1.skin=e.GetPath2(),this.Ornament.centerX=e.GetPosition1().x,this.Ornament.centerY=e.GetPosition1().y,this.Ornament1.centerX=e.GetPosition2().x,this.Ornament1.centerY=e.GetPosition2().y,50404==t){Laya.timer.frameLoop(1,this,this.onScaleChange),this.Star.visible=!0;for(let t=0;t<this.Star.numChildren;t++)this.stars[t]=this.Star.getChildByName("star"+t);Laya.timer.frameLoop(1,this,()=>{var t=Math.sin(this.scaleDelta);this.stars.forEach(e=>{e.scale(t,t)})})}else Laya.timer.clear(this,this.onScaleChange),this.Ornament.scale(1,1),this.Star.visible=!1}ShirtChange(t){this.Shirt.visible=this.Shirt1.visible=!1,null==t||0==t||this.nowclothData.Shirt==t?t=1e4:(this.DressClose(),this.UpDownOpen()),this.nowclothData.Shirt=t,this.Shirt.visible=this.Shirt1.visible=!0;let e=q._ClothData.get(t);this.Shirt.zOrder=e.Sort1,this.Shirt1.zOrder=e.Sort2,this.Shirt.skin=e.GetPath1(),this.Shirt1.skin=e.GetPath2(),this.Shirt.centerX=e.GetPosition1().x,this.Shirt.centerY=e.GetPosition1().y,this.Shirt1.centerX=e.GetPosition2().x,this.Shirt1.centerY=e.GetPosition2().y}TrousersChange(t){this.Trousers.visible=this.Trousers1.visible=!1,null==t||0==t||this.nowclothData.Trousers==t?t=10001:(this.DressClose(),this.UpDownOpen()),this.nowclothData.Trousers=t,this.Trousers.visible=this.Trousers1.visible=!0;let e=q._ClothData.get(t);this.Trousers.visible=this.Trousers1.visible=!0,this.Trousers.zOrder=e.Sort1,this.Trousers1.zOrder=e.Sort2,this.Trousers.skin=e.GetPath1(),this.Trousers1.skin=e.GetPath2(),this.Trousers.centerX=e.GetPosition1().x,this.Trousers.centerY=e.GetPosition1().y,this.Trousers1.centerX=e.GetPosition2().x,this.Trousers1.centerY=e.GetPosition2().y}DressChange(t){if(this.Dress.visible=this.Dress1.visible=!1,null==t||0==t||this.nowclothData.Dress==t)return t=0,this.nowclothData.Dress=t,void this.UpDownOpen();this.DressOpen(),this.nowclothData.Dress=t,this.Dress.visible=this.Dress1.visible=!0,this.UpDownClose();let e=q._ClothData.get(t);this.Dress.zOrder=e.Sort1,this.Dress1.zOrder=e.Sort2,this.Dress.skin=e.GetPath1(),this.Dress1.skin=e.GetPath2(),this.Dress.centerX=e.GetPosition1().x,this.Dress.centerY=e.GetPosition1().y,this.Dress1.centerX=e.GetPosition2().x,this.Dress1.centerY=e.GetPosition2().y}SocksChange(t){if(this.Socks1.visible=this.Socks.visible=!1,null==t||0==t||this.nowclothData.Socks==t)return t=0,void(this.nowclothData.Socks=t);this.Socks1.visible=this.Socks.visible=!0,this.nowclothData.Socks=t;let e=q._ClothData.get(t);this.Socks.zOrder=e.Sort1,this.Socks1.zOrder=e.Sort2,this.Socks.skin=e.GetPath1(),this.Socks1.skin=e.GetPath2(),this.Socks.centerX=e.GetPosition1().x,this.Socks.centerY=e.GetPosition1().y,this.Socks1.centerX=e.GetPosition2().x,this.Socks1.centerY=e.GetPosition2().y}ShoseChange(t){if(this.Shose.visible=this.Shose1.visible=!1,null==t||0==t||this.nowclothData.Shose==t)return t=0,void(this.nowclothData.Shose=t);this.Shose.visible=this.Shose1.visible=!0,this.nowclothData.Shose=t;let e=q._ClothData.get(t);this.Shose.zOrder=e.Sort1,this.Shose1.zOrder=e.Sort2,this.Shose.skin=e.GetPath1(),this.Shose1.skin=e.GetPath2(),this.Shose.centerX=e.GetPosition1().x,this.Shose.centerY=e.GetPosition1().y,this.Shose1.centerX=e.GetPosition2().x,this.Shose1.centerY=e.GetPosition2().y}CoatChange(t){if(this.Coat.visible=this.Coat1.visible=!1,null==t||0==t||this.nowclothData.Coat==t)return t=0,void(this.nowclothData.Coat=t);this.Coat.visible=this.Coat1.visible=!0,this.nowclothData.Coat=t;let e=q._ClothData.get(t);this.Coat.zOrder=e.Sort1,this.Coat1.zOrder=e.Sort2,this.Coat.skin=e.GetPath1(),this.Coat1.skin=e.GetPath2(),this.Coat.centerX=e.GetPosition1().x,this.Coat.centerY=e.GetPosition1().y,this.Coat1.centerX=e.GetPosition2().x,this.Coat1.centerY=e.GetPosition2().y}PetChange(t){if(this.Pet.visible=!1,null==t||0==t||this.nowclothData.Pet==t)return t=0,void(this.nowclothData.Pet=t);this.Pet.visible=!0;let e=q._ClothData.get(t);this.Pet.skin=e.GetPath1(),this.Pet.centerX=e.GetPosition1().x,this.Pet.centerY=e.GetPosition1().y,this.Pet.zOrder=e.Sort1}UpDownClose(){this.ShirtChange(0),this.TrousersChange(0),this.Shirt.visible=this.Shirt1.visible=!1,this.Trousers.visible=this.Trousers1.visible=!1}UpDownOpen(){this.Shirt.visible=this.Shirt1.visible=!0,this.Trousers.visible=this.Trousers1.visible=!0}DressOpen(){this.Dress.visible=this.Dress1.visible=!0}DressClose(){this.DressChange(0),this.Dress.visible=this.Dress1.visible=!1}onScaleChange(){this.scaleDelta+=.02;var t=Math.sin(this.scaleDelta);this.Ornament.scale(t,1)}CharmValueChange(){let t,e,i,s,a,h,o,n;t=0==this.nowclothData.Hair?0:q._ClothData.get(this.nowclothData.Hair).Star?q._ClothData.get(this.nowclothData.Hair).Star:0,e=0==this.nowclothData.Dress?0:q._ClothData.get(this.nowclothData.Dress).Star?q._ClothData.get(this.nowclothData.Dress).Star:0,i=0==this.nowclothData.Coat?0:(i=q._ClothData.get(this.nowclothData.Coat).Star)?q._ClothData.get(this.nowclothData.Coat).Star:0,s=0==this.nowclothData.Shirt?0:q._ClothData.get(this.nowclothData.Shirt).Star?q._ClothData.get(this.nowclothData.Shirt).Star:0,a=0==this.nowclothData.Trousers?0:q._ClothData.get(this.nowclothData.Trousers).Star?q._ClothData.get(this.nowclothData.Trousers).Star:0,h=0==this.nowclothData.Socks?0:q._ClothData.get(this.nowclothData.Socks).Star?q._ClothData.get(this.nowclothData.Socks).Star:0,o=0==this.nowclothData.Shose?0:q._ClothData.get(this.nowclothData.Shose).Star?q._ClothData.get(this.nowclothData.Shose).Star:0,n=0==this.nowclothData.Ornament?0:q._ClothData.get(this.nowclothData.Ornament).Star?q._ClothData.get(this.nowclothData.Ornament).Star:0,q.CharmValue||(q.CharmValue="0");let r=t+e+i+n+s+o+h+a;q.CharmValue=r.toString()}}class M{constructor(){}static ShowBanner(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return;let t=new TJ.ADS.Param;t.place=TJ.ADS.Place.BOTTOM|TJ.ADS.Place.CENTER,TJ.ADS.Api.ShowBanner(t)}static CloseBanner(){let t=new TJ.ADS.Param;t.place=TJ.ADS.Place.BOTTOM|TJ.ADS.Place.CENTER,TJ.ADS.Api.RemoveBanner(t)}static ShowNormal(){let t=new TJ.API.AdService.Param;TJ.API.AdService.ShowNormal(t)}static showNormal2(){TJ.API.AdService.ShowNormal(new TJ.API.AdService.Param)}static ShowReward(t,e=null){return null!=t&&t(),!0}static Event(t,e=null){console.log("Param:>"+t+"Value:>"+e);let i=new TJ.GSA.Param;i.id=null==e?t:t+e,console.log(i.id),TJ.GSA.Api.Event(i)}static initShare(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt&&(this.wx.onShareAppMessage(()=>({title:this.shareContent,imageUrl:this.shareImgUrl,query:""})),this.wx.showShareMenu({withShareTicket:!0,success:null,fail:null,complete:null}))}static lureShare(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt&&this.wx.shareAppMessage({title:this.shareContent,imageUrl:this.shareImgUrl,query:""})}static VibrateShort(){TJ.API.Vibrate.Short()}static Vibratelong(){TJ.API.Vibrate.Long()}static TAPoint(t,e){let i=new TJ.API.TA.Param;switch(i.id=e,t){case x.BtnShow:TJ.API.TA.Event_Button_Show(i);break;case x.BtnClick:TJ.API.TA.Event_Button_Click(i);break;case x.PageShow:TJ.API.TA.Event_Page_Show(i);break;case x.PageEnter:TJ.API.TA.Event_Page_Enter(i);break;case x.PageLeave:TJ.API.TA.Event_Page_Leave(i);break;case x.LevelStart:TJ.API.TA.Event_Level_Start(i);break;case x.LevelFail:TJ.API.TA.Event_Level_Fail(i);break;case x.LevelFinish:TJ.API.TA.Event_Level_Finish(i)}}}M.wx=Laya.Browser.window.wx,M.shareImgUrl="http://image.tomatojoy.cn/bf7e3448ee1868f50a37d6518ada84d5",M.shareContent="快来试试制作美味的牛排吧！",function(t){t[t.BtnShow=0]="BtnShow",t[t.BtnClick=1]="BtnClick",t[t.PageShow=2]="PageShow",t[t.PageEnter=3]="PageEnter",t[t.PageLeave=4]="PageLeave",t[t.LevelStart=5]="LevelStart",t[t.LevelFinish=6]="LevelFinish",t[t.LevelFail=7]="LevelFail"}(x||(x={}));!function(t){t[t.low=0]="low",t[t.mid=1]="mid",t[t.high=2]="high"}(N||(N={}));class F{constructor(){this.tt=Laya.Browser.window.tt,this.shieldLevel=N.high,this.prk_init="platform_init",this.prk_shareTimes="platform_shareTimes",this.prk_shareTs="platform_shareTs",this.shareItv=36e5,this.shareMaxTimes=5,this.shareImgUrl="http://image.tomatojoy.cn/fkbxs01.jpg",this.shareContent="消灭方块，人人有责！",this.shieldArea=!1,this.shieldUser=!1,this.shieldVersion=!1,this.shieldtime=!1,this.shareTimes=0,this.lastShareTs=0,this.configInited=!1,this.ipInfoInited=!1,this.inited=!1,this.playVideoIndex=0,F.ins=this,this.requestInfo()}async GameCfg(){let t=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(await t.Send(),null!=t.error||null==t.text){{let t=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(await t.Send(),null==t.error&&null!=t.text)return void this.onGameCfgSuccess(t.text);{let t=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(await t.Send(),null==t.error&&null!=t.text)return void this.onGameCfgSuccess(t.text)}}return null}this.onGameCfgSuccess(t.text)}async GetIP(){let t=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(await t.Send(),null!=t.error||null==t.text){{let t=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(await t.Send(),null==t.error&&null!=t.text)return void this.onGetIpSuccess(t.text);{let t=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(await t.Send(),null==t.error&&null!=t.text)return void this.onGetIpSuccess(t.text);console.log(t.error)}}return null}this.onGetIpSuccess(t.text)}onGameCfgSuccess(t){let e=JSON.parse(t);this.configinfo=e,this.configInited=!0,this.ipInfoInited&&this.init()}onGetIpSuccess(t){let e=JSON.parse(t);this.iPInfo=e,this.ipInfoInited=!0,this.configInited&&this.init()}requestInfo(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(this.GameCfg(),this.GetIP())}init(){if(this.configinfo.shieldStatus&&TJ.API.AppInfo.VersionName()==this.configinfo.codeVer&&(this.shieldVersion=!0),null!=this.iPInfo)if(200==this.iPInfo.code){let e=this.iPInfo.data.city;if(""!=this.configinfo.shieldCity)if("all"==this.configinfo.shieldCity)this.shieldArea=!0;else{this.shieldArea=!1;let i=this.configinfo.shieldCity.split(",");for(var t=0;t<i.length;t++)if(e.indexOf(i[t])>=0){this.shieldArea=!0;break}}else this.shieldArea=!1}else this.shieldArea=!0;if(this.configinfo.shieldTime.status){let t=this.configinfo.shieldTime.time.split("-"),e=new Date;e.getHours()>=Number(t[0])&&e.getHours()<=Number(t[1])?this.shieldtime=!0:this.shieldtime=!1}else this.shieldtime=!1;let e=this.tt.getLaunchOptionsSync();if(console.log(e),this.configinfo.ShieldScene.status){let t=this.configinfo.ShieldScene.Scene.split("|");this.shieldUser=t.indexOf(e.scene)>=0,console.log(this.shieldUser)}this.inited=!0,null!=this.onConFigInited&&this.onConFigInited();this.tt.getNetworkType({success:t=>{M.TAPoint(x.BtnShow,"okpb_num"),"wifi"==t.networkType?F.ins.shieldArea?(M.TAPoint(x.BtnShow,"wifipb_num"),F.ins.shieldLevel=N.high):F.ins.shieldLevel=N.low:(M.TAPoint(x.BtnShow,"llpb_num"),F.ins.shieldLevel=N.high),F.ins.shieldUser&&(F.ins.shieldLevel=N.high),F.ins.shieldVersion&&(F.ins.shieldLevel=N.high),F.ins.shieldtime&&(F.ins.shieldLevel=N.high),console.log("--------ZJADMgr.ins.shieldLevel-------"),console.log(F.ins.shieldLevel)},fail:null,complete:null}),this.showVideo=this.configinfo.ADPoint}CheckPlayVideo(){return!!this.inited&&(this.shieldLevel==N.mid&&("0"==this.showVideo[this.playVideoIndex%this.showVideo.length]?(this.playVideoIndex++,!1):(this.playVideoIndex++,!0)))}}class H extends Laya.Script{constructor(){super(...arguments),this.HeightMax=85,this.WidthtMax=80,this.count=2}onAwake(){console.log(F.ins.shieldLevel+"风险等级"),this.SkinChose=this.owner,this.BG=this.SkinChose.getChildByName("BG"),this.IconParent=this.SkinChose.getChildByName("IconParent"),this.Icon=this.IconParent.getChildByName("Icon"),this.Lock=this.SkinChose.getChildByName("Lock"),this.Adimage=this.Lock.getChildAt(1),this.smallLock=this.Lock.getChildAt(0),this.Icon.anchorX=this.Icon.anchorY=.5,this.Star=this.SkinChose.getChildByName("Star"),this.Select=this.SkinChose.getChildByName("Select"),F.ins.shieldLevel==N.high&&this.SkinChose.on(Laya.Event.CLICK,this,this.onClickTest),F.ins.shieldLevel==N.mid&&(F.ins.CheckPlayVideo()?this.SkinChose.on(Laya.Event.MOUSE_DOWN,this,this.onClickTest):this.SkinChose.on(Laya.Event.CLICK,this,this.onClickTest)),F.ins.shieldLevel==N.low&&this.SkinChose.on(Laya.Event.MOUSE_DOWN,this,this.onClickTest)}fell(t){switch(this.ID=t.ID,this.type=t.Type,this.skinname=t.Name,this.Select.visible=!1,this.type2=t.GetType2,this.Star.skin="Btnbar/xing"+t.Star+".png",this.Lock.visible=!q.ClothCanUse(t.ID),null!=t.GetType2||50404==t.ID||40601==t.ID||40602==t.ID||40603==t.ID||40604==t.ID||40605==t.ID||70201==t.ID||70202==t.ID?(this.Adimage.visible=!1,this.smallLock.visible=!0):(this.Adimage.visible=!0,this.smallLock.visible=!1),this.type){case A.Hair:U.Instance.nowclothData.Hair==this.ID&&(this.Select.visible=!0);break;case A.Dress:U.Instance.nowclothData.Dress==this.ID&&(this.Select.visible=!0);break;case A.Coat:U.Instance.nowclothData.Coat==this.ID&&(this.Select.visible=!0);break;case A.Shirt:U.Instance.nowclothData.Shirt==this.ID&&(this.Select.visible=!0);break;case A.Trousers:U.Instance.nowclothData.Trousers==this.ID&&(this.Select.visible=!0);break;case A.Socks:U.Instance.nowclothData.Socks==this.ID&&(this.Select.visible=!0);break;case A.Shose:U.Instance.nowclothData.Shose==this.ID&&(this.Select.visible=!0);break;case A.Ornament:U.Instance.nowclothData.Ornament==this.ID&&(this.Select.visible=!0);break;case A.Pet:U.Instance.nowclothData.Pet==this.ID&&(this.Select.visible=!0)}this.Icon.skin=t.GetPath1();let e=parseFloat(this.Icon.height.toString()),i=parseFloat(this.Icon.width.toString());this.IconParent.width=100,this.IconParent.height=100;let s=0;s=i>e?this.WidthtMax/i:this.HeightMax/e,this.Icon.scaleX=s,this.Icon.scaleY=s,this.Icon.centerX=0,this.Icon.centerY=0}onClickTest(){M.TAPoint(x.BtnClick,"ADhair"+this.ID+"_click"),this.Lock.visible?this.Adimage.visible?M.ShowReward(()=>{this.Select.visible=!0,U.Instance._ClothChange(this.ID,this.type),Z.Instance.getlist(this.type)._refresh();let t=q.ClothDataRefresh;t[this.ID]=0,q.ClothDataRefresh=t,I.tip("恭喜获得一件装扮"),U.Instance.CharmValueChange(),I.get("UIReady").CharmValueShow()},()=>{I.show("UITip",()=>{this.Select.visible=!0,U.Instance._ClothChange(this.ID,this.type),Z.Instance.getlist(this.type)._refresh();let t=q.ClothDataRefresh;t[this.ID]=0,q.ClothDataRefresh=t,I.tip("恭喜获得一件装扮"),U.Instance.CharmValueChange(),I.get("UIReady").CharmValueShow()})}):I.tip("当前装扮未解锁"):(console.log("点击选择衣服-------",this.ID,"------",this.skinname),console.log("                                                     "),this.Select.visible=!0,U.Instance._ClothChange(this.ID,this.type),Z.Instance.getlist(this.type)._refresh(),U.Instance.CharmValueChange(),I.get("UIReady").CharmValueShow())}}class V extends c{onAwake(){super.onAwake(),this._refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this._refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.OrnamentData,this.List.refresh()}hide(){super.hide()}}class J extends c{onAwake(){super.onAwake(),this.refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this.refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.HairData,this.List.refresh()}hide(){super.hide(),console.log("hairList,hide",this.List.visible)}}class W extends c{onAwake(){console.log("DressList OnAwake"),this.init(),this.refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}init(){super.init()}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){console.log("DressList Onshow"),this.refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.DressData,this.List.refresh()}hide(){super.hide(),console.log("DressListHide",this.List.visible)}}class Y extends c{onAwake(){super.onAwake(),this._refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this.refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.ShirtData,this.List.refresh(),console.log("UpList刷新列表")}hide(){super.hide()}}class X extends c{onAwake(){super.onAwake(),this.refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this._refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.TrousersData,this.List.refresh()}hide(){super.hide()}}class z extends c{onAwake(){super.onAwake(),this._refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this._refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.SocksData,this.List.refresh()}hide(){super.hide()}}class j extends c{onAwake(){super.onAwake(),this.refresh(),this.List.dataSource=this.Data,this.List.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(H).fell(this.Data[e])}show(){this.refresh(),this.List.dataSource=this.Data}refresh(){this.Data=q.ShoseData,this.List.refresh()}hide(){super.hide()}}class K extends Laya.Script{onAwake(){this.Btn=this.owner.getChildAt(0),this.icon=this.owner.getChildAt(1),this.Btn.on(Laya.Event.CLICK,this,this.click)}fell(t,e){this.data=t,this.Btn.skin=this.data+".png",this.icon.skin=this.data+"1.png",this.index=e,this.icon.visible=!1,this.ID=e,this.ID>1&&(this.ID+=1),Z.Instance.SelectIndex==this.ID?this.icon.visible=!0:this.icon.visible=!1}click(){switch(this.index){case 0:Z.Instance.ClothesPageChange(0);break;case 1:Z.Instance.ClothesPageChange(1);break;case 2:Z.Instance.ClothesPageChange(3);break;case 3:Z.Instance.ClothesPageChange(4);break;case 4:Z.Instance.ClothesPageChange(5);break;case 5:Z.Instance.ClothesPageChange(6);break;case 6:Z.Instance.ClothesPageChange(7);break;case 7:Z.Instance.ClothesPageChange(8)}}}class Z extends Laya.Script{constructor(){super(...arguments),this.listtype=R.HairList,this.ListMap=new Map,this.SelectIndex=0,this.Data=["Btnbar/hair","Btnbar/dress","Btnbar/shirt","Btnbar/trousers","Btnbar/socks","Btnbar/shose","Btnbar/ornament"],this.listnameitem=R.HairList}onAwake(){Z.Instance=this,this.Bag=this.owner,this.BtnBar=this.Bag.getChildByName("BtnBar"),this.ShowView=this.Bag.getChildByName("ShowView"),this.ListBtn=this.BtnBar.getChildByName("ListBtn"),this.hairList=this.ShowView.getChildByName("hair").getChildByName("hairList");let t=this.hairList.getComponent(J);this.dressList=this.ShowView.getChildByName("dress").getChildByName("dressList");let e=this.dressList.getComponent(W);this.shirtList=this.ShowView.getChildByName("shirt").getChildByName("shirtList");let i=this.shirtList.getComponent(Y);this.trousersList=this.ShowView.getChildByName("trousers").getChildByName("trousersList");let s=this.trousersList.getComponent(X);this.socksList=this.ShowView.getChildByName("socks").getChildByName("socksList");let a=this.socksList.getComponent(z);this.shoesList=this.ShowView.getChildByName("shose").getChildByName("shoseList");let h=this.shoesList.getComponent(j);this.ornamentList=this.ShowView.getChildByName("ornament").getChildByName("ornamentList");let o=this.ornamentList.getComponent(V);this.ListMap.set(R.HairList,t),this.ListMap.set(R.DressList,e),this.ListMap.set(R.ShirtList,i),this.ListMap.set(R.TrousersList,s),this.ListMap.set(R.SocksList,a),this.ListMap.set(R.ShoesList,h),this.ListMap.set(R.OrnamentList,o),console.log("BagListControllerOnawake",this.ListMap),this.Up=this.BtnBar.getChildByName("Up"),this.Down=this.BtnBar.getChildByName("Down"),this.Hair=this.BtnBar.getChildByName("Hair"),this.Acc=this.BtnBar.getChildByName("Acc"),this.Shoes=this.BtnBar.getChildByName("Shoes"),this.Dress=this.BtnBar.getChildByName("Dress"),this.Sock=this.BtnBar.getChildByName("Sock"),this.BtnBarListFell()}BtnBarListFell(){this.ListBtn.hScrollBarSkin="",this.ListBtn.array=this.Data,this.ListBtn.renderHandler=new Laya.Handler(this,this.onWrapItem)}onWrapItem(t,e){t.getComponent(K).fell(this.Data[e],e)}onStart(){this.ClothesPageChange(0)}btnev(t,e){t.on(Laya.Event.CLICK,this,e)}ClothesPageChange(t){switch(this.SelectIndex=t,t){case R.HairList:this.showList(R.HairList),M.TAPoint(x.BtnShow,"ADhair40101_click"),M.TAPoint(x.BtnShow,"ADhair50101_click"),M.TAPoint(x.BtnShow,"ADhair50201_click"),M.TAPoint(x.BtnShow,"ADhair10301_click"),M.TAPoint(x.BtnShow,"ADhair30301_click"),M.TAPoint(x.BtnShow,"ADhair50301_click");break;case R.DressList:this.showList(R.DressList),M.TAPoint(x.BtnShow,"ADdress40102_click"),M.TAPoint(x.BtnShow,"ADdress50102_click"),M.TAPoint(x.BtnShow,"ADdress50202_click"),M.TAPoint(x.BtnShow,"ADdress50302_click");break;case R.ShoesList:this.showList(R.ShoesList),M.TAPoint(x.BtnShow,"ADshoes20205_click"),M.TAPoint(x.BtnShow,"ADshoes30205_click"),M.TAPoint(x.BtnShow,"ADshoes40104_click"),M.TAPoint(x.BtnShow,"ADshoes40204_click"),M.TAPoint(x.BtnShow,"ADshoes50104_click"),M.TAPoint(x.BtnShow,"ADshoes50203_click"),M.TAPoint(x.BtnShow,"ADshoes10305_click"),M.TAPoint(x.BtnShow,"ADshoes20303_click"),M.TAPoint(x.BtnShow,"ADshoes30305_click"),M.TAPoint(x.BtnShow,"ADshoes50303_click");break;case R.OrnamentList:this.showList(R.OrnamentList),M.TAPoint(x.BtnShow,"ADring10201_click"),M.TAPoint(x.BtnShow,"ADring40105_click"),M.TAPoint(x.BtnShow,"ADring50204_click"),M.TAPoint(x.BtnShow,"ADring20304_click"),M.TAPoint(x.BtnShow,"ADring50304_click");break;case R.SocksList:this.showList(R.SocksList),M.TAPoint(x.BtnShow,"ADsocks20204_click"),M.TAPoint(x.BtnShow,"ADsocks50103_click"),M.TAPoint(x.BtnShow,"ADsocks30304_click");break;case R.TrousersList:this.showList(R.TrousersList),M.TAPoint(x.BtnShow,"ADpants10203_click"),M.TAPoint(x.BtnShow,"ADpants20203_click"),M.TAPoint(x.BtnShow,"ADpants30203_click"),M.TAPoint(x.BtnShow,"ADpants40203_click"),M.TAPoint(x.BtnShow,"ADpants10304_click"),M.TAPoint(x.BtnShow,"ADpants20302_click"),M.TAPoint(x.BtnShow,"ADpants30303_click");break;case R.ShirtList:this.showList(R.ShirtList),M.TAPoint(x.BtnShow,"ADshirt10202_click"),M.TAPoint(x.BtnShow,"ADshirt20202_click"),M.TAPoint(x.BtnShow,"ADshirt30202_click"),M.TAPoint(x.BtnShow,"ADshirt40202_click"),M.TAPoint(x.BtnShow,"ADshirt10303_click"),M.TAPoint(x.BtnShow,"ADshirt20301_click"),M.TAPoint(x.BtnShow,"ADshirt30302_click");break;case R.PetList:this.showList(R.PetList)}this.ListBtn.refresh()}showList(t=this.listnameitem){this.listnameitem=t,this.ListMap.forEach((e,i)=>{i==t?(e.owner.parent.visible=!0,e._refresh()):e.owner.parent.visible=!1})}getlist(t){return this.ListMap.get(t)}refresh(){this.ListMap.forEach((t,e)=>{t._refresh()})}}!function(t){t[t.HairList=0]="HairList",t[t.DressList=1]="DressList",t[t.CoatList=2]="CoatList",t[t.ShirtList=3]="ShirtList",t[t.TrousersList=4]="TrousersList",t[t.SocksList=5]="SocksList",t[t.ShoesList=6]="ShoesList",t[t.OrnamentList=7]="OrnamentList",t[t.PetList=8]="PetList"}(R||(R={})),function(t){function obj_DeepCopy(t){var e={};for(var i in t)e[i]="object"==typeof t[i]?obj_DeepCopy(t[i]):t[i];return e}t.taskCircleCountdown=function(t,e,i){if(t.cacheAs="bitmap",t.numChildren>0){let s=t.getChildAt(0);return console.log("endAngle",i),s.graphics.drawPie(t.width/2,t.height/2,t.width/2+10,e,i,"#000000")}{let s=new Laya.Sprite;return t.addChild(s),s.graphics.drawPie(t.width/2,t.height/2,t.width/2+10,e,i,"#000000")}},t.arrayRandomGetOut=function(e,i){i||(i=1);let s=t.array_Copy(e),a=[];if(i>s.length)return"数组长度小于取出的数！";for(let t=0;t<i;t++){let t=Math.round(Math.random()*(s.length-1)),e=s[t];s.splice(t,1),a.push(e)}return a},t.array_Copy=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},t.obj_DeepCopy=obj_DeepCopy,t.objArray_Copy=function(t){var e=t instanceof Array?[]:{};for(var i in t)e[i]="object"==typeof t[i]?obj_DeepCopy(t[i]):t[i];return e},t.dataCompareDifferent=function(t,e,i){for(var s=[],a=0;a<t.length;a++){for(var h=t[a],o=h[i],n=!1,r=0;r<e.length;r++)if(e[r][i]==o){n=!0;break}n||s.push(h)}return s},t.data1AddToData2=function(t,e){for(let i=0;i<e.length;i++){const s=e[i];t.push(s)}},t.dataCompare=function(e,i,s){let a;if(Laya.LocalStorage.getJSON(i)){a=JSON.parse(Laya.LocalStorage.getJSON(i))[i],console.log(i+"从本地缓存中获取到数据,将和文件夹的json文件进行对比");try{let h=e;if(h.length>=a.length){let e=t.dataCompareDifferent(h,a,s);console.log("两个数据的差值为：",e),t.data1AddToData2(a,e)}else console.log(i+"数据表填写有误，长度不能小于之前的长度")}catch(t){console.log(i,"数据赋值失败！请检查数据表或者手动赋值！")}}else try{a=e}catch(t){console.log(i+"数据赋值失败！请检查数据表或者手动赋值！")}let h={};return h[i]=a,Laya.LocalStorage.setJSON(i,JSON.stringify(h)),a},t.node_RemoveAllChildren=function(t){t.numChildren>0&&t.removeChildren(0,t.numChildren-1)},t.node_2DShowExcludedChild=function(t,e,i){for(let s=0;s<t.numChildren;s++){let a=t.getChildAt(s);for(let t=0;t<e.length;t++)a.name==e[t]?a.visible=!(!i&&null!=i):a.visible=!i&&null!=i}}}(G||(G={}));class q extends Laya.Script{static get _ClothData(){return this._clothData}static GetFirstLoginTime(){let t=Laya.LocalStorage.getItem("Get");return t||(Laya.LocalStorage.setItem("Get","1562730819957"),t=Laya.LocalStorage.getItem("Get")),parseFloat(t)}static setFirstLoginTime(){let t=Date.now();Laya.LocalStorage.setItem("Get",t+"")}static ClothdatapackSet(t,e){Laya.LocalStorage.setJSON(t,e)}static ClothdatapackGet(t){return Laya.LocalStorage.getJSON(t)}static ClothdatapackRemove(t){return Laya.LocalStorage.removeItem(t)}static set ClothDataRefresh(t){Laya.LocalStorage.setJSON("ClothData",t)}static get ClothDataRefresh(){return Laya.LocalStorage.getJSON("ClothData")}static ClothAlllockNum(t){let e=Object.keys(t).length;console.log(Object.keys(t).length);for(let i in t)1==t[i]||e--;return e}static ClothAllLockArr(t){Object.keys(t).length;console.log(Object.keys(t).length);let e=[];for(let i in t)1==t[i]&&e.push(i);return console.log(e),e}static ClothCanUse(t){if(!this._clothData.has(t))return!1;{let e=this._clothData.get(t);if(!e.GetType2){return null!=this.ClothDataRefresh[t]&&1!=q.ClothDataRefresh[t]}{let i=this.ClothdatapackGet(e.GetType2);if(null==i)return console.log("无当前衣服套装",t),!1;if("1"==e.GetType2.split("_")[0]){if(null!=this.ClothDataRefresh[t])return 1!=q.ClothDataRefresh[t]}else{if("2"==e.GetType2.split("_")[0]){return!(q.ClothAlllockNum(i)>0)}if("3"==e.GetType2.split("_")[0]){if(null!=this.ClothDataRefresh[t])return 1!=q.ClothDataRefresh[t]}else{if("4"!=e.GetType2.split("_")[0])return!0;if(null!=this.ClothDataRefresh[t])return 1!=q.ClothDataRefresh[t]}}}}}static GetFirstToNow(){let t=this.GetFirstLoginTime(),e=Date.now(),i=Math.ceil((e-t)/864e5);return console.log("两天之间的天数",i),i}static set PhotosData(t){Laya.LocalStorage.setJSON("PhotosData",t)}static get PhotosData(){let t=Laya.LocalStorage.getJSON("PhotosData");return t||Laya.LocalStorage.setJSON("PhotosData",null),t}static set PhotosIDarr(t){Laya.LocalStorage.setJSON("PhotosIDarr",t)}static get PhotosIDarr(){let t=Laya.LocalStorage.getJSON("PhotosIDarr");return t||Laya.LocalStorage.setJSON("PhotosIDarr",null),t}static SetLastTime(){let t=Date.now();Laya.LocalStorage.setItem("LastTime",t+"")}static GetLastTime(){let t=Laya.LocalStorage.getItem("LastTime");return null!=t||(Laya.LocalStorage.setItem("LastTime","1562730819957"),t=Laya.LocalStorage.getItem("LastTime")),parseFloat(t)}static IsNewDay(){let t=this.GetLastTime(),e=new Date(t),i=e.getFullYear(),s=e.getMonth(),a=e.getDate(),h=Date.now(),o=new Date,n=o.getFullYear(),r=o.getMonth(),l=o.getDate();return h>t&&(n>i||r>s||l>a)}static set TodayHeCheng(t){Laya.LocalStorage.setItem("TodayHeCheng",t)}static get TodayHeCheng(){return Laya.LocalStorage.getItem("TodayHeCheng")}static set TodaySign(t){Laya.LocalStorage.setItem("TodaySign",t)}static get TodaySign(){return Laya.LocalStorage.getItem("TodaySign")}static set PickNum(t){Laya.LocalStorage.setItem("PickNum",t)}static get PickNum(){return Laya.LocalStorage.getItem("PickNum")}static set TodayWinNum(t){Laya.LocalStorage.setItem("TodayWinNum",t)}static get TodayWinNum(){return Laya.LocalStorage.getItem("TodayWinNum")}static set ShopCharmValue(t){Laya.LocalStorage.setItem("ShopCharmValue",t)}static get ShopCharmValue(){return Laya.LocalStorage.getItem("ShopCharmValue")}static set CharmValue(t){Laya.LocalStorage.setItem("CharmValue",t)}static get CharmValue(){return Laya.LocalStorage.getItem("CharmValue")}static Get_All_UnLock_Cloth(){let t=[];for(let e in q.ClothDataAsy)1!=q.ClothDataAsy[e]||q._ClothData.get(parseInt(e)).GetType2||"10000"!=e&&"10001"!=e&&"10002"!=e&&t.push(e);return t}static Get_All_UnLock_HighStarCloth(){let t=[];for(let e in q.ClothDataAsy)1!=q.ClothDataAsy[e]||q._ClothData.get(parseInt(e)).GetType2||3!=q._ClothData.get(parseInt(e)).Star||"10000"!=e&&"10001"!=e&&"10002"!=e&&t.push(e);let e=G.arrayRandomGetOut(t,1);return q._ClothData.get(parseInt(e))}static Get_All_UnLock_LowStarCloth(){let t=[];for(let e in q.ClothDataAsy)(1==q.ClothDataAsy[e]&&!q._ClothData.get(parseInt(e)).GetType2&&1==q._ClothData.get(parseInt(e)).Star||2==q._ClothData.get(parseInt(e)).Star)&&"10000"!=e&&"10001"!=e&&"10002"!=e&&t.push(e);let e=G.arrayRandomGetOut(t,1);return q._ClothData.get(parseInt(e))}static unlock(t){let e=q.ClothDataRefresh;e[t.ID]=0,q.ClothDataRefresh=e,Z.Instance.showList(),Z.Instance.refresh()}static AddCharmValue(t){if(q.ShopCharmValue){let e=parseInt(q.ShopCharmValue);q.ShopCharmValue=(e+t).toString()}else q.ShopCharmValue=t.toString()}}q._clothData=new Map,q.HairData=[],q.DressData=[],q.ShirtData=[],q.TrousersData=[],q.SocksData=[],q.ShoseData=[],q.OrnamentData=[],q.PetData=[],q.PickData=[],q.ClothDataAsy={};class Q extends Laya.Script{constructor(){super(...arguments),this.cloths1=[],this.cloths2=[],this.cloths3=[],this.cloths4=[]}}class $ extends Laya.Script{constructor(){super(...arguments),this.Datas=[],this.Icons=[],this.Num=0,this.MaxHeight=85,this.MaxWeight=85,this.str={}}onAwake(){let t=this.owner;this.Bg=t.getChildByName("Bg"),this.IconParent=t.getChildByName("IconParent"),this.IconAll=this.IconParent.getChildByName("IconAll"),this.ClothShow=t.getChildByName("ClothShow");for(let t=0;t<this.ClothShow.numChildren;t++)this.Icons.push(this.ClothShow.getChildAt(t).getChildAt(0));this.ADBtn=t.getChildByName("ADBtn"),this.TaskPre=this.ADBtn.getChildByName("TaskPre"),this.ADBtn.on(Laya.Event.CLICK,this,this.adclick),this.PackName=t.getChildByName("PackName")}fell(t,e){let i="Active/taozhuang"+(e+1)+".png",s="Active/Pack"+(e+1)+".png";this.Datas=t,this.IconAll.skin=i,this.PackName.skin=s,console.log(this.Datas),this.Icons.forEach((t,e)=>{if(console.log("橱窗"+e+t),e<this.Datas.length){t.visible=!0,t.skin=this.Datas[e].GetPath1();let i=parseFloat(t.height.toString()),s=parseFloat(t.width.toString()),a=0;a=s>i?this.MaxWeight/s:this.MaxHeight/i,t.scaleX=a,t.scaleY=a,t.centerX=0,t.centerY=0}else t.visible=!1}),this.Datas.forEach((t,e)=>{let i=q.ClothDataRefresh[this.Datas[e].ID];this.str[this.Datas[e].ID]=i,console.log(q.ClothDataRefresh[this.Datas[e].ID])}),console.log(this.str),q.ClothdatapackSet(this.Datas[0].GetType2,this.str),console.log(this.Datas[0].GetType2,this.str),this.Num=q.ClothAlllockNum(this.str),console.log("未解锁数量",this.Num),this.Now=this.Datas.length-this.Num+"",this.Need=this.Datas.length+"",this.TaskPre.text=this.Now+" / "+this.Need,this.ADBtn.visible=this.Num>0,this.ADBtn.visible&&("2_1"==this.Datas[0].GetType2?M.TAPoint(x.BtnShow,"ADtz1_click"):"2_2"==this.Datas[0].GetType2?M.TAPoint(x.BtnShow,"ADtz2_click"):"2_3"==this.Datas[0].GetType2&&M.TAPoint(x.BtnShow,"ADhunsha_click"));for(let t=0;t<this.ClothShow.numChildren;t++)t>=this.Datas.length&&(this.ClothShow.getChildAt(t).visible=!1)}adclick(){"2_1"==this.Datas[0].GetType2?M.TAPoint(x.BtnClick,"ADtz1_click"):"2_2"==this.Datas[0].GetType2?M.TAPoint(x.BtnClick,"ADtz2_click"):"2_3"==this.Datas[0].GetType2&&M.TAPoint(x.BtnClick,"ADhunsha_click"),M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",()=>{this.GetAward()})})}GetAward(){for(let t in this.str)if(1==this.str[t]){console.log("GameDataController.ClothDataRefresh[k]",t,q.ClothDataRefresh[t]);let e=q.ClothDataRefresh;return e[t]=0,q.ClothDataRefresh=e,console.log(this.str,this.Datas[0].GetType2),Laya.LocalStorage.setJSON(this.Datas[0].GetType2,this.str),I.get("UIActive").Refresh(),Z.Instance.showList(),void I.tip("恭喜获得新衣服")}}}class tt extends Laya.Script{constructor(){super(...arguments),this._pos1=new Laya.Point,this._pos2=new Laya.Point}set ID(t){this._ID=t}get ID(){return this._ID}set Name(t){this._Name=t}get Name(){return this._Name}set Level(t){this._Level=t}get Level(){return this._Level}set Gender(t){this._Gender=t}get Gender(){return this._Gender}set Type(t){this._Type=t}get Type(){return this._Type}set IconPath1(t){this._IconPath1=t}get IconPath1(){return this._IconPath1}set Position(t){this._Position=t}get Position(){return this._Position}set Sort1(t){this._Sort1=t-10}get Sort1(){return this._Sort1}set IconPath2(t){this._IconPath2=t}get IconPath2(){return this._IconPath2}set Position2(t){this._Position2=t}get Position2(){return this._Position2}set Sort2(t){this._Sort2=t-10}get Sort2(){return this._Sort2}set NeedItems(t){this._NeedItems=t}get NeedItems(){return this._NeedItems}set Introduce(t){this._Introduce=t}get Introduce(){return this._Introduce}set Label1(t){this._Label1=t}get Label1(){return this._Label1}set Label2(t){this._Label2=t}get Label2(){return this._Label2}set Price(t){this._Price=t}get Price(){return this._Price}set num(t){this._num=t}get num(){return this._num}set Type2(t){this._Type2=t}get Type2(){return this._Type2}set Star(t){this._Star=t}get Star(){return this._Star}GetKey(){return this.ID}GetPosition1(){let t=this.Position;if(null==t)return this._pos1;let e=t.split(",");return this._pos1.x=parseFloat(e[0]),this._pos1.y=-parseFloat(e[1]),this._pos1}GetPosition2(){let t=this.Position2;if(null==t)return this._pos2;let e=t.split(",");return this._pos2.x=parseFloat(e[0]),this._pos2.y=-parseFloat(e[1]),this._pos2}GetPath1(){if(null==this.IconPath1)return null;let t="",e="";return 0==this.Type&&(e="Hair"),1==this.Type&&(e="Dress"),2==this.Type&&(e=""),3==this.Type&&(e="Up"),4==this.Type&&(e="Down"),5==this.Type&&(e="Scoks"),6==this.Type&&(e="Shoes"),7==this.Type&&(e="ACC"),8==this.Type&&(e="Pet"),t="https://h5.tomatojoy.cn/wx/mhdmx/zijie/1.0.8/Cloth/"+e+"/"+this.IconPath1+".png"}GetPath2(){if(null==this.IconPath2)return null;let t="",e="";return 0==this.Type&&(e="Hair"),1==this.Type&&(e="Dress"),2==this.Type&&(e=""),3==this.Type&&(e="Up"),4==this.Type&&(e="Down"),5==this.Type&&(e="Scoks"),6==this.Type&&(e="Shoes"),7==this.Type&&(e="ACC"),t="https://h5.tomatojoy.cn/wx/mhdmx/zijie/1.0.8/Cloth/"+e+"/"+this.IconPath2+".png"}get GetType2(){return null!=this.Type2?this.Type2.substring(0,3):null}}class et extends Laya.Script{constructor(){super(...arguments),this.PickJson=[{ID:"1",Name:"美少女 ",Num:"4"},{ID:"2",Name:"牛奶煮萝莉",Num:"4"},{ID:"3",Name:"凉巷少年与狸猫",Num:"2"},{ID:"4",Name:"亦凡加油",Num:"4"},{ID:"5",Name:"你好亦好",Num:"3"},{ID:"6",Name:"美人性情",Num:"3"},{ID:"7",Name:"迪士尼在逃公主",Num:"3"},{ID:"8",Name:"云淡风轻",Num:"2"},{ID:"9",Name:"南楼月下",Num:"2"},{ID:"10",Name:"梦里遇你",Num:"2"},{ID:"11",Name:"樱花钞",Num:"2"},{ID:"12",Name:"行星饭",Num:"1"},{ID:"13",Name:"烟雨江畔",Num:"1"},{ID:"14",Name:"纪离",Num:"1"},{ID:"15",Name:"谎言",Num:"1"}]}LoadPickJson(){this.PickJson.forEach(t=>{let e=new it;t.ID&&(e.ID=parseInt(t.ID)),t.Name&&(e.Name=t.Name),t.Num&&(e.Num=parseInt(t.Num)),q.PickData.push(e)});let t=new it;t.ID=16,t.Name="我",t.Num=parseInt(Laya.LocalStorage.getItem("TodayWinNum")),q.PickData.push(t)}}class it extends Laya.Script{set ID(t){this._ID=t}get ID(){return this._ID}set Name(t){this._Name=t}get Name(){return this._Name}set Num(t){this._Num=t}get Num(){return this._Num}}class st extends Laya.Script{constructor(){super(...arguments),this.pic=new et,this.ClothJson=[{ID:"10000",Name:"基础上衣",Gender:"2",Type:"3",Position:"7,227.5,0",Label1:"Label_1:100",Label2:"Label_1:100",Sort1:"3",Sort2:"2",IconPath1:"10000"},{ID:"10001",Name:"基础裙子",Gender:"2",Type:"4",Position:"7,53,0",Label1:"Label_1:100",Label2:"Label_1:100",Sort1:"3",Sort2:"3",IconPath1:"10001"},{ID:"10002",Name:"基础发型",Gender:"2",Type:"0",Position:"10.5,317.1,0",Label1:"Label_1:100",Label2:"Label_1:100",Sort1:"4",Sort2:"3",IconPath1:"11101"},{ID:"13202",Name:"珍珠",Price:"0",Star:"1",Gender:"2",Type:"7",Position:"13.8,263,0",Label1:"Label_1:4000",Label2:"Label_2:2000",Sort1:"6",Sort2:"2",IconPath1:"13202"},{ID:"10101",Name:"阳光",Price:"0",Star:"1",Gender:"2",Type:"0",Position:"17.8,315.1,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"7",Sort2:"2",Icon:"icon_10101",IconPath1:"10101"},{ID:"10102",Name:"轻柔",Price:"0",Star:"1",Gender:"2",Type:"3",Position:"19.6,192,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"3",Sort2:"2",IconPath1:"10102"},{ID:"10103",Name:"舒适",Price:"0",Star:"1",Gender:"2",Type:"4",Position:"3.3,32.5,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"6",Sort2:"6",Icon:"10103_icon",IconPath1:"10103_1",IconPath2:"10103_2",Position2:"64.9,-33.4,0"},{ID:"10104",Name:"黑丝",Price:"0",Star:"1",Gender:"2",Type:"5",Position:"23,-220.7,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"2",Sort2:"2",IconPath1:"10104"},{ID:"10105",Name:"可爱皮鞋",Price:"0",Star:"1",Gender:"2",Type:"6",Position:"25.7,-359.6,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"4",Sort2:"2",IconPath1:"10105"},{ID:"10106",Name:"小圆帽",Price:"0",Star:"1",Gender:"2",Type:"7",Position:"23,396,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"9",Sort2:"-20",IconPath1:"10106_1",IconPath2:"10106_2",Position2:"21.4,373.5,0"},{ID:"10201",Name:"海风",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"3.4,-34.6,0",Label1:"Label_4:500",Label2:"Label_5:250",Sort1:"6",Sort2:"1",Icon:"10201_icon",IconPath1:"10201_1",IconPath2:"10201_2",Position2:"17.1,-49.4,0"},{ID:"10202",Name:"诱惑",Price:"1",Star:"2",Gender:"2",Type:"3",Position:"36.9,163.5,0",Label1:"Label_4:2000",Label2:"Label_5:1000",Sort1:"3",Sort2:"2",IconPath1:"10202"},{ID:"10203",Name:"轻纱",Price:"1",Star:"2",Gender:"2",Type:"4",Position:"3.4,51.8,0",Label1:"Label_4:2000",Label2:"Label_5:1000",Sort1:"3",Sort2:"2",IconPath1:"10203"},{ID:"20101",Name:"布偶",Price:"0",Star:"1",Gender:"2",Type:"1",Position:"15.1,113,0",Label1:"Label_1:6000",Label2:"Label_2:3000",Sort1:"4",Sort2:"2",IconPath1:"20101"},{ID:"20102",Name:"粉色",Price:"0",Star:"1",Gender:"2",Type:"5",Position:"23.7,-288.4,0",Label1:"Label_1:800",Label2:"Label_2:400",Sort1:"2",Sort2:"2",IconPath1:"20102"},{ID:"20103",Name:"红色皮鞋",Price:"0",Star:"1",Gender:"2",Type:"6",Position:"30.1,-347.2,0",Label1:"Label_1:800",Label2:"Label_2:400",Sort1:"4",Sort2:"2",IconPath1:"20103"},{ID:"20201",Name:"青春",Price:"0",Star:"1",Gender:"2",Type:"0",Position:"23.29,363.2,0",Label1:"Label_2:1000",Label2:"Label_1:500",Sort1:"3",Sort2:"2",Icon:"icon_20201",IconPath1:"20201"},{ID:"20202",Name:"校服",Price:"1",Star:"2",Gender:"2",Type:"3",Position:"7.6,152.5,0",Label1:"Label_2:2500",Label2:"Label_1:1250",Sort1:"4",Sort2:"2",IconPath1:"20202"},{ID:"20203",Name:"校服短裙",Price:"1",Star:"2",Gender:"2",Type:"4",Position:"7.6,52,0",Label1:"Label_2:2500",Label2:"Label_1:1250",Sort1:"3",Sort2:"2",IconPath1:"20203"},{ID:"20204",Name:"黑色长袜",Price:"1",Star:"3",Gender:"2",Type:"5",Position:"28.33,-278.5,0",Label1:"Label_2:800",Label2:"Label_1:400",Sort1:"2",Sort2:"2",IconPath1:"20204"},{ID:"20205",Name:"小皮鞋",Price:"1",Star:"2",Gender:"2",Type:"6",Position:"23,-365,0",Label1:"Label_2:800",Label2:"Label_1:400",Sort1:"4",Sort2:"2",IconPath1:"20205"},{ID:"30102",Name:"甜蜜",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_1_3",Type:"1",Position:"1.3,102.3,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Sort2:"1",Icon:"30102_icon",IconPath1:"30102_1",IconPath2:"30102_2",Position2:"59.4,105.5,0"},{ID:"30103",Name:"粉色条纹",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_1_4",Type:"5",Position:"24.2,-243.3,0",Label1:"Label_1:1100",Label2:"Label_2:550",Sort1:"2",Sort2:"2",IconPath1:"30103"},{ID:"30104",Name:"粉色皮鞋",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_1_5",Type:"6",Position:"24.1,-361.8,0",Label1:"Label_1:1100",Label2:"Label_2:550",Sort1:"4",Sort2:"2",IconPath1:"30104"},{ID:"30105",Name:"发卡",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_1_1",Type:"7",Position:"16.8,386.2,0",Label1:"Label_1:1500",Label2:"Label_2:750",Sort1:"8",Sort2:"2",IconPath1:"30105"},{ID:"30201",Name:"清凉",Price:"0",Star:"1",Gender:"2",Type:"0",Position:"12.6,358.2,0",Label1:"Label_6:1500",Label2:"Label_1:750",Sort1:"3",Sort2:"2",Icon:"icon_30201",IconPath1:"30201"},{ID:"30202",Name:"水手服",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"18.30,207.2,0",Label1:"Label_6:3000",Label2:"Label_1:1500",Sort1:"4",Sort2:"2",IconPath1:"30202"},{ID:"30203",Name:"水手裙",Price:"1",Star:"3",Gender:"2",Type:"4",Position:"6.4,63.2,0",Label1:"Label_6:3000",Label2:"Label_1:1500",Sort1:"3",Sort2:"2",IconPath1:"30203"},{ID:"30205",Name:"海边",Price:"1",Star:"3",Gender:"2",Type:"6",Position:"20.9,-362.5,0",Label1:"Label_6:1100",Label2:"Label_1:550",Sort1:"4",Sort2:"2",IconPath1:"30205"},{ID:"40101",Name:"披肩长发",Price:"1",Star:"1",Gender:"2",Type:"0",Position:"15.6,351,0",Label1:"Label_3:2000",Label2:"Label_5:1000",Sort1:"3",Sort2:"1",Icon:"icon_40101",IconPath1:"40101_1",IconPath2:"40101_2",Position2:"33.32,179.5,0"},{ID:"40102",Name:"公主",Price:"1",Star:"3",Gender:"2",Type:"1",Position:"24.3,15.5,0",Label1:"Label_3:8000",Label2:"Label_5:4000",Sort1:"4",Sort2:"2",IconPath1:"40102"},{ID:"40104",Name:"高跟鞋",Price:"1",Star:"2",Gender:"2",Type:"6",Position:"46.7,-329.8,0",Label1:"Label_3:1300",Label2:"Label_5:650",Sort1:"4",Sort2:"2",IconPath1:"40104"},{ID:"40105",Name:"诱惑",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"51.5,415.2,0",Label1:"Label_3:2000",Label2:"Label_5:1000",Sort1:"8",Sort2:"5",IconPath1:"40105_1",IconPath2:"40105_2",Position2:"31.5,285.4,0"},{ID:"40201",Name:"成熟",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_1_2",Type:"0",Position:"21.4,345.06,0",Label1:"Label_4:2000",Label2:"Label_2:1000",Sort1:"3",Sort2:"2",Icon:"icon_40201",IconPath1:"40201"},{ID:"40202",Name:"端庄",Price:"1",Star:"2",Gender:"2",Type:"3",Position:"3.4,151.5,0",Label1:"Label_4:3500",Label2:"Label_2:1750",Sort1:"4",Sort2:"1",Icon:"40202_icon",IconPath1:"40202_1",IconPath2:"40202_2",Position2:"17.1,262,0"},{ID:"40203",Name:"性感",Price:"1",Star:"2",Gender:"2",Type:"4",Position:"17.10,-89.6,0",Label1:"Label_4:3500",Label2:"Label_2:1750",Sort1:"4",Sort2:"2",IconPath1:"40203"},{ID:"40204",Name:"稳重",Price:"1",Star:"2",Gender:"2",Type:"6",Position:"23.9,-355.5,0",Label1:"Label_4:1300",Label2:"Label_2:650",Sort1:"5",Sort2:"2",IconPath1:"40204"},{ID:"50101",Name:"紫色",Price:"1",Star:"2",Gender:"2",Type:"0",Position:"9.8,340.6,0",Label1:"Label_1:2500",Label2:"Label_5:1250",Sort1:"3",Sort2:"2",Icon:"icon_50101",IconPath1:"50101"},{ID:"50102",Name:"女仆",Price:"1",Star:"3",Gender:"2",Type:"1",Position:"12.2,105.95,0",Label1:"Label_1:9000",Label2:"Label_5:4500",Sort1:"4",Sort2:"2",IconPath1:"50102"},{ID:"50103",Name:"碎边袜",Price:"1",Star:"3",Gender:"2",Type:"5",Position:"23.8,-307.3,0",Label1:"Label_1:1600",Label2:"Label_5:800",Sort1:"2",Sort2:"2",IconPath1:"50103"},{ID:"50104",Name:"紫色皮鞋",Price:"1",Star:"2",Gender:"2",Type:"6",Position:"24.2,-362.4,0",Label1:"Label_1:1300",Label2:"Label_5:650",Sort1:"4",Sort2:"2",IconPath1:"50104"},{ID:"50201",Name:"天真",Price:"1",Star:"2",Gender:"2",Type:"0",Position:"7.4,317.5,0",Label1:"Label_3:2500",Label2:"Label_2:1250",Sort1:"5",Sort2:"2",Icon:"icon_50201",IconPath1:"50201"},{ID:"50202",Name:"公主裙2",Price:"1",Star:"2",Gender:"2",Type:"1",Position:"8.2,73.46,0",Label1:"Label_3:9000",Label2:"Label_2:4500",Sort1:"4",Sort2:"2",IconPath1:"50202"},{ID:"50203",Name:"优雅",Price:"1",Star:"2",Gender:"2",Type:"6",Position:"27.1,-324.9,0",Label1:"Label_3:1300",Label2:"Label_2:650",Sort1:"4",Sort2:"2",IconPath1:"50203"},{ID:"50204",Name:"花帽",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"32.4,368.3,0",Label1:"Label_3:2500",Label2:"Label_2:1250",Sort1:"8",Sort2:"2",IconPath1:"50204"},{ID:"10401",Name:"灰白",Price:"1",Star:"3",Gender:"2",num:"4",Type2:"1_1_2",Type:"0",Position:"23.29,363.2,0",Label1:"Label_3:1500",Label2:"Label_5:750",Sort1:"3",Sort2:"2",Icon:"icon_10401",IconPath1:"10301"},{ID:"10402",Name:"可爱连衣裙",Price:"1",Star:"3",Gender:"2",num:"4",Type2:"1_1_3",Type:"1",Position:"7.7,87.5,0",Label1:"Label_3:3000",Label2:"Label_5:1500",Sort1:"4",Sort2:"2",IconPath1:"10302"},{ID:"10403",Name:"大白兔",Price:"1",Star:"3",Gender:"2",num:"4",Type2:"1_1_4",Type:"6",Position:"23.29,-370,0",Label1:"Label_3:3000",Label2:"Label_5:1500",Sort1:"5",Sort2:"2",IconPath1:"10303"},{ID:"10405",Name:"发卡",Price:"1",Star:"3",Gender:"2",num:"4",Type2:"1_1_1",Type:"7",Position:"15.1,393.2,0",Label1:"Label_3:1300",Label2:"Label_5:650",Sort1:"8",Sort2:"2",IconPath1:"10305"},{ID:"20301",Name:"海军制服",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"7.98,166,0",Label1:"Label_2:2500",Label2:"Label_3:1250",Sort1:"4",Sort2:"1",IconPath1:"20301",Position2:"17.1,262,0"},{ID:"20302",Name:"海军下装",Price:"1",Star:"3",Gender:"2",Type:"4",Position:"5.7,56.6,0",Label1:"Label_2:2500",Label2:"Label_3:1250",Sort1:"3",Sort2:"2",IconPath1:"20302"},{ID:"20303",Name:"海皮鞋",Price:"1",Star:"3",Gender:"2",Type:"6",Position:"21.40,-216,0",Label1:"Label_2:1200",Label2:"Label_3:600",Sort1:"3",Sort2:"2",IconPath1:"20303"},{ID:"20304",Name:"军帽",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"13.8,404.4,0",Label1:"Label_2:3000",Label2:"Label_3:1500",Sort1:"7",Sort2:"2",IconPath1:"20304"},{ID:"30301",Name:"麻花辫",Price:"1",Star:"3",Gender:"2",Type:"0",Position:"26.93,351.5,0",Label1:"Label_3:1500",Label2:"Label_5:750",Sort1:"3",Sort2:"1",Icon:"30301_icon",IconPath1:"30301_1",IconPath2:"30301_2",Position2:"97,260,0"},{ID:"30302",Name:"披肩斗篷",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"18.1,143,0",Label1:"Label_3:3000",Label2:"Label_5:1500",Sort1:"4",Sort2:"2",IconPath1:"30302"},{ID:"30303",Name:"武士服",Price:"1",Star:"3",Gender:"2",Type:"4",Position:"6.6,41,0",Label1:"Label_3:3000",Label2:"Label_5:1500",Sort1:"5",Sort2:"2",IconPath1:"30303"},{ID:"30304",Name:"黑丝",Price:"1",Star:"3",Gender:"2",Type:"5",Position:"23.30,-199.83,0",Label1:"Label_3:1300",Label2:"Label_5:650",Sort1:"2",Sort2:"2",IconPath1:"30305"},{ID:"30305",Name:"重甲",Price:"1",Star:"3",Gender:"2",Type:"6",Position:"26.8,-286.8,0",Label1:"Label_3:1300",Label2:"Label_5:650",Sort1:"4",Sort2:"2",IconPath1:"30306"},{ID:"40301",Name:"灵逸",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_2",Type:"0",Position:"10.5,308,0",Label1:"Label_1:2000",Label2:"Label_5:1000",Sort1:"3",Sort2:"1",Icon:"40301_icon",IconPath1:"40301_1",IconPath2:"40301_2",Position2:"11.5,222,0"},{ID:"40302",Name:"彩带上衣",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_3",Type:"3",Position:"35.3,110.5,0",Label1:"Label_1:3500",Label2:"Label_5:1750",Sort1:"4",IconPath1:"40302"},{ID:"40303",Name:"碎边红裙",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_4",Type:"4",Position:"0,7,0",Label1:"Label_1:3500",Label2:"Label_5:1750",Sort1:"4",Sort2:"2",IconPath1:"40303"},{ID:"40304",Name:"可爱筒袜",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_5",Type:"5",Position:"25.4,-293.5,0",Label1:"Label_1:1300",Label2:"Label_5:650",Sort1:"2",Sort2:"2",IconPath1:"40304"},{ID:"40305",Name:"铮亮",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_6",Type:"6",Position:"23.29,-367,0",Label1:"Label_1:1300",Label2:"Label_5:650",Sort1:"5",Sort2:"2",IconPath1:"40305"},{ID:"40306",Name:"蝴蝶",Price:"1",Star:"3",Gender:"2",num:"6",Type2:"2_2_1",Type:"7",Position:"37.5,395.2,0",Label1:"Label_1:5000",Label2:"Label_5:2500",Sort1:"1",Sort2:"2",IconPath1:"40306"},{ID:"50301",Name:"温柔",Price:"1",Star:"3",Gender:"2",Type:"0",Position:"10.5,358,0",Label1:"Label_2:2500",Label2:"Label_5:1250",Sort1:"3",Sort2:"2",Icon:"50301_icon",IconPath1:"50301"},{ID:"50302",Name:"和服",Price:"1",Star:"2",Gender:"2",Type:"1",Position:"70.9,53.2,0",Label1:"Label_2:9000",Label2:"Label_5:4500",Sort1:"4",Sort2:"2",IconPath1:"50302"},{ID:"50303",Name:"木屐",Price:"1",Star:"3",Gender:"2",Type:"6",Position:"37.5,-335.1,0",Label1:"Label_2:1300",Label2:"Label_5:650",Sort1:"-9",Sort2:"4",IconPath1:"50303_1",IconPath2:"50303_2",Position2:"37.5,-335.1,0"},{ID:"50304",Name:"向阳花",Price:"1",Star:"2",Gender:"2",Type:"7",Position:"-30.3,340.3,0",Label1:"Label_2:2500",Label2:"Label_5:1250",Sort1:"7",Sort2:"2",IconPath1:"50304"},{ID:"50404",Name:"翅膀",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"15.0,226.0,0",Label1:"Label_2:3000",Label2:"Label_3:1500",Sort1:"-9",IconPath1:"50404"},{ID:"60101",Name:"睡衣头发",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"3_1_1",Type:"0",Position:"28.0,331.0,0",Label1:"Label_4:2000",Label2:"Label_2:1000",Sort1:"3",Sort2:"2",Icon:"icon_60101",IconPath1:"60101"},{ID:"60102",Name:"睡衣裙子",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"3_1_2",Type:"1",Position:"17.0,62.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Sort2:"1",Icon:"60102_icon",IconPath1:"60102"},{ID:"60103",Name:"睡衣拖鞋",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"3_1_3",Type:"6",Position:"23.0,-366.0,0",Label1:"Label_1:1100",Label2:"Label_2:550",Sort1:"4",Sort2:"2",IconPath1:"60103"},{ID:"70101",Name:"淡黄裙子",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"11.0,123.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"70101_icon",IconPath1:"70101"},{ID:"70102",Name:"皮短裙",Price:"1",Star:"3",Gender:"2",Type:"4",Position:"6.0,62.0,0",Label1:"Label_6:3000",Label2:"Label_1:1500",Sort1:"3",IconPath1:"70102"},{ID:"70103",Name:"修身诱惑",Price:"1",Star:"3",Gender:"2",Type:"1",Position:"5.0,127.0,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"3",IconPath1:"70103"},{ID:"70104",Name:"亚麻短裙",Price:"1",Star:"3",Gender:"2",Type:"4",Position:"4.0,39.0,0",Label1:"Label_6:3000",Label2:"Label_1:1500",Sort1:"2",IconPath1:"70104"},{ID:"70105",Name:"民国上衣",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"26.0,150.0,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"4",Sort2:"1",IconPath1:"70105"},{ID:"70106",Name:"青花瓷长裙",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"8.0,114.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"70106_icon",IconPath1:"70106"},{ID:"70107",Name:"丝瓜长裙",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"8.0,143.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"70107_icon",IconPath1:"70107"},{ID:"70108",Name:"情趣",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"5.0,224.0,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"3",IconPath1:"70108"},{ID:"70109",Name:"薰衣草",Price:"1",Star:"3",Gender:"2",Type:"0",Position:"37.0,327.1,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"7",Icon:"icon_70109",IconPath1:"70109"},{ID:"70110",Name:"淡粉红",Price:"1",Star:"3",Gender:"2",Type:"0",Position:"18.0,344.1,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"7",Sort2:"2",Icon:"icon_70110",IconPath1:"70110"},{ID:"70111",Name:"青春韩版",Price:"1",Star:"3",Gender:"2",Type:"3",Position:"18.0,210.0,0",Label1:"Label_1:2000",Label2:"Label_2:1000",Sort1:"3",IconPath1:"70111"},{ID:"40401",Name:"罗丽叶发型",Price:"1",Star:"3",Gender:"2",num:"5",Type:"0",Position:"30.0,354.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"40401_icon",IconPath1:"40401"},{ID:"40402",Name:"罗丽叶裙子",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"15.0,101.0,0",Position2:"24.1,-2.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Sort2:"1",Icon:"40402_icon",IconPath1:"40402_1",IconPath2:"40402_2"},{ID:"40403",Name:"罗丽叶鞋子",Price:"1",Star:"3",Gender:"2",num:"5",Type:"6",Position:"24.1,-359.0,0",Label1:"Label_1:1100",Sort1:"4",IconPath1:"40403"},{ID:"40501",Name:"婚纱头发",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_3_1",Type:"0",Position:"31.0,329.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"40501_icon",IconPath1:"40501"},{ID:"40502",Name:"婚纱裙子",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_3_2",Type:"1",Position:"91.0,-77.0,0",Label1:"Label_1:7000",Sort1:"9",Icon:"40502_icon",IconPath1:"40502"},{ID:"40503",Name:"婚纱头饰",Price:"1",Star:"3",Gender:"2",Type:"7",Type2:"2_3_3",Position:"41.0,123.0,0",Label1:"Label_3:2000",Label2:"Label_5:1000",Sort1:"8",Sort2:"5",IconPath1:"40503_1",IconPath2:"40503_2",Position2:"24.0,390.0,0"},{ID:"40504",Name:"婚纱鞋子",Price:"1",Star:"3",Gender:"2",num:"5",Type2:"2_3_4",Type:"6",Position:"25.1,-350.0,0",Label1:"Label_1:1100",Sort1:"2",IconPath1:"40504"},{ID:"40601",Name:"白雪公主发型",Price:"1",Star:"3",Gender:"2",num:"5",Type:"0",Position:"14.0,343.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"40601_icon",IconPath1:"40601"},{ID:"40602",Name:"白雪公主裙子",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"9.0,156.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"4",Icon:"40602_icon",IconPath1:"40602"},{ID:"40603",Name:"白雪公主长袜",Price:"1",Star:"3",Gender:"2",Type:"5",Position:"22,-208.0,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"2",IconPath1:"40603"},{ID:"40604",Name:"白雪公主鞋子",Price:"1",Star:"3",Gender:"2",Type:"6",Position:"23.0,-359.0,0",Label1:"Label_1:500",Label2:"Label_2:250",Sort1:"4",IconPath1:"40604"},{ID:"40605",Name:"粉红魔杖",Price:"1",Star:"3",Gender:"2",Type:"7",Position:"-11.0,170.0,0",Label1:"Label_1:4000",Label2:"Label_2:2000",Sort1:"-6",IconPath1:"40605"},{ID:"70202",Name:"泳衣",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"6.0,135.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"5",Icon:"70202_icon",IconPath1:"70202"},{ID:"70201",Name:"汉服长裙",Price:"1",Star:"3",Gender:"2",num:"5",Type:"1",Position:"26.0,-31.0,0",Label1:"Label_1:7000",Label2:"Label_2:3500",Sort1:"5",Icon:"70201_icon",IconPath1:"70201"}]}LoadJson(){this.LoadJson2(),this.pic.LoadPickJson()}LoadJson2(){console.log("===========>");let t=new Q,e=new Q,i=new Q,s=new Q;this.ClothJson.forEach(a=>{let h=new tt;if(a.ID&&(h.ID=parseInt(a.ID)),a.Name&&(h.Name=a.Name),a.NeedItems&&(h.NeedItems=a.NeedItems),a.Gender&&(h.Gender=parseInt(a.Gender)),a.Type&&(h.Type=parseInt(a.Type)),a.Level&&(h.Level=parseInt(a.Level)),a.Position&&(h.Position=a.Position),a.Position2&&(h.Position2=a.Position2),a.Label1&&(h.Label1=a.Label1),a.Label2&&(h.Label2=a.Label2),a.Sort1&&(h.Sort1=parseInt(a.Sort1)),a.Sort2&&(h.Sort2=parseInt(a.Sort2)),a.Price&&(h.Price=parseInt(a.Price)),a.IconPath1&&(h.IconPath1=a.IconPath1),a.IconPath2&&(h.IconPath2=a.IconPath2),a.Star&&(h.Star=parseInt(a.Star)),a.Type2&&(h.Type2=a.Type2),a.num&&(h.num=parseInt(a.num)),1e4==h.ID||10001==h.ID||10002==h.ID);else switch(h.Type){case A.Hair:q.HairData.push(h);break;case A.Dress:q.DressData.push(h);break;case A.Shirt:q.ShirtData.push(h);break;case A.Trousers:q.TrousersData.push(h);break;case A.Socks:q.SocksData.push(h);break;case A.Shose:q.ShoseData.push(h);break;case A.Ornament:q.OrnamentData.push(h);break;case A.Pet:q.PetData.push(h)}if(null!=h.Type2){let a=h.Type2.split("_");"1"==a[0]?("1"==a[1]&&t.cloths1.push(h),"2"==a[1]&&t.cloths2.push(h),"3"==a[1]&&t.cloths3.push(h),"4"==a[1]&&t.cloths4.push(h)):"2"==a[0]?("1"==a[1]&&e.cloths1.push(h),"2"==a[1]&&e.cloths2.push(h),"3"==a[1]&&e.cloths3.push(h),"4"==a[1]&&e.cloths4.push(h)):"3"==a[0]?("1"==a[1]&&i.cloths1.push(h),"2"==a[1]&&i.cloths2.push(h),"3"==a[1]&&i.cloths3.push(h),"4"==a[1]&&i.cloths4.push(h)):"4"==a[0]&&("1"==a[1]&&s.cloths1.push(h),"2"==a[1]&&s.cloths2.push(h),"3"==a[1]&&s.cloths3.push(h),"4"==a[1]&&s.cloths4.push(h))}q.ClothPackge1=t,q.ClothPackge2=e,q.ClothPackge3=i,q.ClothPackge4=s,q._clothData.set(h.ID,h),q.ClothDataAsy[h.ID]=0==h.Price?0:1});let a=Laya.LocalStorage.getItem("firstuse");if(a)if("0"==a)Laya.LocalStorage.setJSON("ClothData",q.ClothDataAsy),Laya.LocalStorage.setItem("firstuse","1");else{let t={},e=(Laya.LocalStorage.getJSON("ClothData"),q.ClothDataAsy);for(let i in e){let e=q.ClothDataRefresh[i];null!=e?t[i]=e:(console.log("新ID",i),t[i]=1)}Laya.LocalStorage.setJSON("ClothData",t)}else Laya.LocalStorage.setJSON("ClothData",q.ClothDataAsy),Laya.LocalStorage.setItem("firstuse","1");console.log("===========》"),console.log("_ClothData",q._ClothData),q._ClothData.forEach(t=>{t.GetPath1()&&Laya.loader.load(t.GetPath1())}),w.notify("sgl1")}}!function(t){function getProperty(t,e,i){let s=null,a=getClassArr(t);for(let t=0;t<a.length;t++){const h=a[t];if(h.name===e){s=h[i];break}}return null!==s?s:(console.log(e+"找不到属性:"+i,s),null)}function setProperty(e,i,s,a){let h=getClassArr(e);for(let t=0;t<h.length;t++){const e=h[t];if(e.name===i){e[s]=a;break}}let o={};o[e]=h,Laya.LocalStorage.setJSON(e,JSON.stringify(o)),t._TaskList&&t._TaskList.refresh()}function getClassArr(e){let s=[];switch(e){case i.everyday:s=t._everydayTask;break;case i.perpetual:s=t._perpetualTask}return s}function doDetection(e,i,s){s||(s=1);let a=t.getProperty(e,i,t.Property.resCondition),h=t.getProperty(e,i,t.Property.condition),o=-1;return console.log(a,h),-1!==t.getProperty(e,i,t.Property.get)&&(h<=a+s?(t.setProperty(e,i,t.Property.resCondition,h),t.setProperty(e,i,t.Property.get,1),o=1):(t.setProperty(e,i,t.Property.resCondition,a+s),o=0)),t._TaskList&&t._TaskList.refresh(),o}let e,i,s,a,h,o;t._taskPerpetualData=[{name:"PK3次",taskType:"PK",condition:3,resCondition:0,rewardType:"scratchTicket",rewardNum:1,ticketNum:0,get:0},{name:"观看一个视频",taskType:"ads",condition:1,resCondition:0,rewardType:"scratchTicket",rewardNum:1,ticketNum:0,get:0},{name:"观看一个视频 ",taskType:"ads",condition:1,resCondition:0,rewardType:"scratchTicket",rewardNum:1,ticketNum:0,get:0},{name:"观看一个视频  ",taskType:"ads",condition:1,resCondition:0,rewardType:"scratchTicket",rewardNum:1,ticketNum:0,get:0}],t._today={get date(){return Laya.LocalStorage.getItem("Task_todayDate")?Number(Laya.LocalStorage.getItem("Task_todayDate")):null},set date(t){Laya.LocalStorage.setItem("Task_todayDate",t.toString())}},t.getProperty=getProperty,t.setProperty=setProperty,t.getClassArr=getClassArr,t.doDetection=doDetection,t.getReward=function(i,s){let a=getProperty(i,s,e.rewardType),h=getProperty(i,s,e.rewardNum);return 1==getProperty(i,s,e.get)?(setProperty(i,s,e.get,-1),t._TaskList&&t._TaskList.refresh(),{rewardType:a,rewardNum:h}):(console.log("领取条件不足"),-1)},function(t){t.name="name",t.explain="explain",t.taskType="taskType",t.condition="condition",t.resCondition="resCondition",t.rewardType="rewardType",t.rewardNum="rewardNum",t.arrange="arrange",t.time="time",t.get="get"}(e=t.Property||(t.Property={})),function(t){t.everyday="Task_Everyday",t.perpetual="Task_Perpetual1"}(i=t.Classify||(t.Classify={})),function(t){t.scratchTicket="scratchTicket",t.gold="gold",t.diamond="diamond"}(s=t.RewardType||(t.RewardType={})),function(t){t.getAward="Task_getAward",t.adsGetAward_Every="Task_adsGetAward_Every",t.useSkins="Task_useSkins",t.victory="Task_victory",t.watchAds="Task_watchAds",t.victoryBox="Task_victoryBox",t.PK="Task_PK"}(a=t.EventType||(t.EventType={})),function(t){t.PK="PK",t.ads="ads",t.victory="victory",t.useSkins="useSkins",t.treasureBox="treasureBox"}(h=t.CompeletType||(t.CompeletType={})),function(t){t["PK3次"]="PK3次",t["观看一个视频"]="观看一个视频",t["观看两个视频"]="观看两个视频",t["观看3个视频"]="观看3个视频"}(o=t.name||(t.name={})),t.init=function(){t._perpetualTask=G.dataCompare(G.objArray_Copy(t._taskPerpetualData),i.perpetual,e.name),w.reg(a.PK,t,()=>{doDetection(i.perpetual,o.PK3次)})},t.refreshTask=function(){let e={};e[i.perpetual]=G.objArray_Copy(t._taskPerpetualData),Laya.LocalStorage.setJSON(i.perpetual,JSON.stringify(e)),t._TaskList.array=t._perpetualTask=G.objArray_Copy(t._taskPerpetualData),t._TaskList&&t._TaskList.refresh()};t.UIabc=class{}}(O||(O={})),function(t){let e,i,s;t._scratchersArr=[],t._scratchersNum={get num(){return Laya.LocalStorage.getItem("Scratchers_scratchersNum")?Number(Laya.LocalStorage.getItem("Scratchers_scratchersNum")):0},set num(t){Laya.LocalStorage.setItem("Scratchers_scratchersNum",t.toString())}},function(t){t.tedeng="未解锁高星级衣服一件",t.yideng="未解锁底衣服一件",t.erdeng="魅力值10",t.zailai="再开一次",t.xiexie="谢谢惠顾"}(e=t._RewardType||(t._RewardType={})),function(t){t.tedeng="tedeng",t.yideng="yideng",t.erdeng="erdeng",t.zailai="zailai",t.xiexie="xiexie"}(i=t._Word||(t._Word={})),function(t){t.startScratcher="startScratcher",t.endScratcher="endScratcher"}(s=t.EventType||(t.EventType={})),t._randomReward=function(){let e=Math.floor(100*Math.random());return t._scratchersNum.num%5==0&&0!==t._scratchersNum.num?i.tedeng:0<=e&&e<2?i.tedeng:2<=e&&e<5?i.yideng:5<=e&&e<35?i.erdeng:35<=e&&e<65?i.zailai:65<=e&&e<100?i.xiexie:(console.log("概率计算错误"),i.xiexie)}}(E||(E={}));class at extends Laya.Script{constructor(){super(...arguments),this.MaxHeight=90,this.MaxWidth=90,this.BtnID=0,this.BtnIndex=0,this.str={}}onAwake(){let t=this.owner;this.ADBtn=t.getChildByName("ADBtn"),this.Btn=t.getChildByName("Btn"),this.Lock=t.getChildByName("Lock"),this.Icon=t.getChildByName("icon"),this.Btn.on(Laya.Event.CLICK,this,this.BtnClick),this.ADBtn.on(Laya.Event.CLICK,this,this.ADBtnClick)}Fell(t,e){this.BtnIndex=e,this.data=t,this.Icon.skin=this.data.GetPath1(),this.BtnID=this.data.ID;let i=parseFloat(this.Icon.height.toString()),s=parseFloat(this.Icon.width.toString()),a=0;a=s>i?this.MaxWidth/s:this.MaxHeight/i,this.Icon.scaleX=a,this.Icon.scaleY=a,this.Icon.centerX=0,this.Icon.centerY=0;let h=q.GetFirstToNow();console.log("SignBtn,Fell,GameDataController.ClothDataRefresh",q.ClothDataRefresh[this.BtnID]),1==q.ClothDataRefresh[this.BtnID]?h-1>e?(console.log("过期的"),this.ADSignBtnOn()):h-1==e?(console.log("当前天"),this.SignBtnOn()):(console.log("过后天"),this.BtnClose()):(console.log("SignBtn,Fell  this.BtnID已解锁 ",this.BtnID),this.BtnClose())}Refresh(){let t=q.ClothDataRefresh[this.data.ID];this.Lock.visible=1==t}BtnClick(){q.TodaySign="1",q.SetLastTime(),console.log("今日签到成功");let t=q.ClothDataRefresh;t[this.BtnID]=0,q.ClothDataRefresh=t,Z.Instance.refresh(),I.get("UISign").Refresh()}ADBtnClick(){console.log("补签",this.BtnIndex),M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",()=>{this.GetAward()})})}GetAward(){q.SetLastTime(),console.log("补签成功");let t=q.ClothDataRefresh;t[this.BtnID]=0,q.ClothDataRefresh=t,Z.Instance.refresh(),I.get("UISign").Refresh()}SignBtnOn(){0==q.ClothDataRefresh[this.BtnID]?this.BtnClose():(this.ADBtn.visible=!1,this.Btn.visible=!0)}ADSignBtnOn(){0==q.ClothDataRefresh[this.BtnID]?this.BtnClose():(this.ADBtn.visible=!0,this.Btn.visible=!1)}BtnClose(){this.ADBtn.visible=!1,this.Btn.visible=!1}}class ht extends Laya.Script{constructor(){super(...arguments),this.photoindex=0,this.photoMax=0,this.mes=[]}onAwake(){this.FemaleRoot=this.owner,this.Hair=this.FemaleRoot.getChildByName("Hair"),this.Hair1=this.FemaleRoot.getChildByName("Hair1"),this.Ornament=this.FemaleRoot.getChildByName("Ornament"),this.Ornament1=this.FemaleRoot.getChildByName("Ornament1"),this.Shirt=this.FemaleRoot.getChildByName("Shirt"),this.Shirt1=this.FemaleRoot.getChildByName("Shirt1"),this.Trousers=this.FemaleRoot.getChildByName("Trousers"),this.Trousers1=this.FemaleRoot.getChildByName("Trousers1"),this.Dress=this.FemaleRoot.getChildByName("Dress"),this.Dress1=this.FemaleRoot.getChildByName("Dress1"),this.Socks=this.FemaleRoot.getChildByName("Socks"),this.Socks1=this.FemaleRoot.getChildByName("Socks1"),this.Shose=this.FemaleRoot.getChildByName("Shose"),this.Shose1=this.FemaleRoot.getChildByName("Shose1"),this.Coat=this.FemaleRoot.getChildByName("Coat"),this.Coat1=this.FemaleRoot.getChildByName("Coat1"),this.nophoto=this.FemaleRoot.getChildByName("nophoto");for(let t=0;t<8;t++)this._ClothChange(0,t)}_ClothChange(t,e){switch(e){case A.Hair:this.HairChange(t);break;case A.Dress:this.DressChange(t);break;case A.Coat:this.CoatChange(t);break;case A.Shirt:this.ShirtChange(t);break;case A.Trousers:this.TrousersChange(t);break;case A.Socks:this.SocksChange(t);break;case A.Shose:this.ShoseChange(t);break;case A.Ornament:this.OrnamentChange(t)}}ClothReceive(){for(let t=0;t<8;t++)this._ClothChange(0,t)}InitMes(){let t=q.PhotosData;if(console.log("PhotosChange==》item",t),t&&(this.mes=t),console.log("PhotosChange==mes",this.mes),this.mes.length<=0)return this.CanShowPhoto=!1,this.nophoto.visible=!0,void console.log("PhotosChange==》是否可以展示photo",!this.nophoto.visible);this.CanShowPhoto=!0,this.nophoto.visible=!1,this.photoMax=this.mes.length-1,console.log("PhotosChange==》是否可以展示photo",!this.nophoto.visible),this.ChangeAllCloth()}ChangeAllCloth(){this.HairChange(this.mes[this.photoindex].Hair),this.CoatChange(this.mes[this.photoindex].Coat),this.ShirtChange(this.mes[this.photoindex].Shirt),this.TrousersChange(this.mes[this.photoindex].Trousers),this.SocksChange(this.mes[this.photoindex].Socks),this.ShoseChange(this.mes[this.photoindex].Shose),this.OrnamentChange(this.mes[this.photoindex].Ornament),this.DressChange(this.mes[this.photoindex].Dress)}ChangeNextPhoto(){0!=this.CanShowPhoto&&(this.photoindex++,this.photoindex>this.photoMax&&(this.photoindex=0),this.ChangeAllCloth())}ChangeLastPhoto(){0!=this.CanShowPhoto&&(this.photoindex--,this.photoindex<0&&(this.photoindex=this.photoMax),this.ChangeAllCloth())}HairChange(t){this.Hair.visible=this.Hair1.visible=!1,null!=t&&0!=t||(t=10002),this.Hair.visible=this.Hair1.visible=!0;let e=q._clothData.get(t);this.Hair.skin=e.GetPath1(),this.Hair1.skin=e.GetPath2(),this.Hair.centerX=e.GetPosition1().x,this.Hair.centerY=e.GetPosition1().y,this.Hair1.centerX=e.GetPosition2().x,this.Hair1.centerY=e.GetPosition2().y,this.Hair.zOrder=e.Sort1,this.Hair1.zOrder=e.Sort2}OrnamentChange(t){if(this.Ornament.visible=this.Ornament1.visible=!1,null==t||0==t)return void(t=0);this.Ornament.visible=this.Ornament1.visible=!0;let e=q._ClothData.get(t);this.Ornament.skin=e.GetPath1(),this.Ornament1.skin=e.GetPath2(),this.Ornament.centerX=e.GetPosition1().x,this.Ornament.centerY=e.GetPosition1().y,this.Ornament1.centerX=e.GetPosition2().x,this.Ornament1.centerY=e.GetPosition2().y,this.Ornament.zOrder=e.Sort1,this.Ornament1.zOrder=e.Sort2}ShirtChange(t){this.Shirt.visible=this.Shirt1.visible=!1,null==t||0==t?t=1e4:(this.DressClose(),this.UpDownOpen()),this.Shirt.visible=this.Shirt1.visible=!0;let e=q._ClothData.get(t);this.Shirt.skin=e.GetPath1(),this.Shirt1.skin=e.GetPath2(),this.Shirt.centerX=e.GetPosition1().x,this.Shirt.centerY=e.GetPosition1().y,this.Shirt1.centerX=e.GetPosition2().x,this.Shirt1.centerY=e.GetPosition2().y,this.Shirt.zOrder=e.Sort1,this.Shirt1.zOrder=e.Sort2}TrousersChange(t){this.Trousers.visible=this.Trousers1.visible=!1,null==t||0==t?t=10001:(this.DressClose(),this.UpDownOpen()),this.Trousers.visible=this.Trousers1.visible=!0;let e=q._ClothData.get(t);this.Trousers.visible=this.Trousers1.visible=!0,this.Trousers.skin=e.GetPath1(),this.Trousers1.skin=e.GetPath2(),this.Trousers.centerX=e.GetPosition1().x,this.Trousers.centerY=e.GetPosition1().y,this.Trousers1.centerX=e.GetPosition2().x,this.Trousers1.centerY=e.GetPosition2().y,this.Trousers.zOrder=e.Sort1,this.Trousers1.zOrder=e.Sort2}DressChange(t){if(this.Dress.visible=this.Dress1.visible=!1,null==t||0==t)return t=0,void this.UpDownOpen();this.DressOpen(),this.Dress.visible=this.Dress1.visible=!0,this.UpDownClose();let e=q._ClothData.get(t);this.Dress.skin=e.GetPath1(),this.Dress1.skin=e.GetPath2(),this.Dress.centerX=e.GetPosition1().x,this.Dress.centerY=e.GetPosition1().y,this.Dress1.centerX=e.GetPosition2().x,this.Dress1.centerY=e.GetPosition2().y,this.Dress.zOrder=e.Sort1,this.Dress1.zOrder=e.Sort2}SocksChange(t){if(this.Socks1.visible=this.Socks.visible=!1,null==t||0==t)return void(t=0);this.Socks1.visible=this.Socks.visible=!0;let e=q._ClothData.get(t);this.Socks.skin=e.GetPath1(),this.Socks1.skin=e.GetPath2(),this.Socks.centerX=e.GetPosition1().x,this.Socks.centerY=e.GetPosition1().y,this.Socks1.centerX=e.GetPosition2().x,this.Socks1.centerY=e.GetPosition2().y,this.Socks.zOrder=e.Sort1,this.Socks1.zOrder=e.Sort2}ShoseChange(t){if(this.Shose.visible=this.Shose1.visible=!1,null==t||0==t)return void(t=0);this.Shose.visible=this.Shose1.visible=!0;let e=q._ClothData.get(t);this.Shose.skin=e.GetPath1(),this.Shose1.skin=e.GetPath2(),this.Shose.centerX=e.GetPosition1().x,this.Shose.centerY=e.GetPosition1().y,this.Shose1.centerX=e.GetPosition2().x,this.Shose1.centerY=e.GetPosition2().y,this.Shose.zOrder=e.Sort1,this.Shose1.zOrder=e.Sort2}CoatChange(t){if(this.Coat.visible=this.Coat1.visible=!1,null==t||0==t)return void(t=0);this.Coat.visible=this.Coat1.visible=!0;let e=q._ClothData.get(t);this.Coat.skin=e.GetPath1(),this.Coat1.skin=e.GetPath2(),this.Coat.centerX=e.GetPosition1().x,this.Coat.centerY=e.GetPosition1().y,this.Coat1.centerX=e.GetPosition2().x,this.Coat1.centerY=e.GetPosition2().y,this.Coat.zOrder=e.Sort1,this.Coat1.zOrder=e.Sort2}UpDownClose(){this.ShirtChange(0),this.TrousersChange(0),this.Shirt.visible=this.Shirt1.visible=!1,this.Trousers.visible=this.Trousers1.visible=!1}UpDownOpen(){this.Shirt.visible=this.Shirt1.visible=!0,this.Trousers.visible=this.Trousers1.visible=!0}DressOpen(){this.Dress.visible=this.Dress1.visible=!0}DressClose(){this.DressChange(0),this.Dress.visible=this.Dress1.visible=!1}}class ot extends Laya.Script{onAwake(){ot.Instance=this,this.FemaleRoot=this.owner,this.Hair=this.FemaleRoot.getChildByName("Hair"),this.Hair1=this.FemaleRoot.getChildByName("Hair1"),this.Ornament=this.FemaleRoot.getChildByName("Ornament"),this.Ornament1=this.FemaleRoot.getChildByName("Ornament1"),this.Shirt=this.FemaleRoot.getChildByName("Shirt"),this.Shirt1=this.FemaleRoot.getChildByName("Shirt1"),this.Trousers=this.FemaleRoot.getChildByName("Trousers"),this.Trousers1=this.FemaleRoot.getChildByName("Trousers1"),this.Dress=this.FemaleRoot.getChildByName("Dress"),this.Dress1=this.FemaleRoot.getChildByName("Dress1"),this.Socks=this.FemaleRoot.getChildByName("Socks"),this.Socks1=this.FemaleRoot.getChildByName("Socks1"),this.Shose=this.FemaleRoot.getChildByName("Shose"),this.Shose1=this.FemaleRoot.getChildByName("Shose1"),this.Coat=this.FemaleRoot.getChildByName("Coat"),this.Coat1=this.FemaleRoot.getChildByName("Coat1");for(let t=0;t<8;t++)this._ClothChange(0,t)}ChangeAllCloth(){this.HairChange(U.Instance.nowclothData.Hair),this.CoatChange(U.Instance.nowclothData.Coat),this.ShirtChange(U.Instance.nowclothData.Shirt),this.TrousersChange(U.Instance.nowclothData.Trousers),this.SocksChange(U.Instance.nowclothData.Socks),this.ShoseChange(U.Instance.nowclothData.Shose),this.OrnamentChange(U.Instance.nowclothData.Ornament),this.DressChange(U.Instance.nowclothData.Dress)}_ClothChange(t,e){switch(e){case A.Hair:this.HairChange(t);break;case A.Dress:this.DressChange(t);break;case A.Coat:this.CoatChange(t);break;case A.Shirt:this.ShirtChange(t);break;case A.Trousers:this.TrousersChange(t);break;case A.Socks:this.SocksChange(t);break;case A.Shose:this.ShoseChange(t);break;case A.Ornament:this.OrnamentChange(t)}}HairChange(t){this.Hair.visible=this.Hair1.visible=!1,null!=t&&0!=t||(t=10002),this.Hair.visible=this.Hair1.visible=!0;let e=q._clothData.get(t);this.Hair.zOrder=e.Sort1,this.Hair1.zOrder=e.Sort2,this.Hair.skin=e.GetPath1(),this.Hair1.skin=e.GetPath2(),this.Hair.centerX=e.GetPosition1().x,this.Hair.centerY=e.GetPosition1().y,this.Hair1.centerX=e.GetPosition2().x,this.Hair1.centerY=e.GetPosition2().y}DressChange(t){if(this.Dress.visible=this.Dress1.visible=!1,null==t||0==t)return t=0,void this.UpDownOpen();this.DressOpen(),40502==t&&(this.Shose.visible=this.Shose1.visible=!1),this.Dress.visible=this.Dress1.visible=!0,this.UpDownClose();let e=q._ClothData.get(t);this.Dress.zOrder=e.Sort1,this.Dress1.zOrder=e.Sort2,this.Dress.skin=e.GetPath1(),this.Dress1.skin=e.GetPath2(),this.Dress.centerX=e.GetPosition1().x,this.Dress.centerY=e.GetPosition1().y,this.Dress1.centerX=e.GetPosition2().x,this.Dress1.centerY=e.GetPosition2().y}CoatChange(t){if(this.Coat.visible=this.Coat1.visible=!1,null==t||0==t)return void(t=0);this.Coat.visible=this.Coat1.visible=!0;let e=q._ClothData.get(t);this.Coat.zOrder=e.Sort1,this.Coat1.zOrder=e.Sort2,this.Coat.skin=e.GetPath1(),this.Coat1.skin=e.GetPath2(),this.Coat.centerX=e.GetPosition1().x,this.Coat.centerY=e.GetPosition1().y,this.Coat1.centerX=e.GetPosition2().x,this.Coat1.centerY=e.GetPosition2().y}ShirtChange(t){this.Shirt.visible=this.Shirt1.visible=!1,null==t||0==t?t=1e4:(this.DressClose(),this.UpDownOpen()),this.Shirt.visible=this.Shirt1.visible=!0;let e=q._ClothData.get(t);this.Shirt.zOrder=e.Sort1,this.Shirt1.zOrder=e.Sort2,this.Shirt.skin=e.GetPath1(),this.Shirt1.skin=e.GetPath2(),this.Shirt.centerX=e.GetPosition1().x,this.Shirt.centerY=e.GetPosition1().y,this.Shirt1.centerX=e.GetPosition2().x,this.Shirt1.centerY=e.GetPosition2().y}TrousersChange(t){this.Trousers.visible=this.Trousers1.visible=!1,null==t||0==t?t=10001:(this.DressClose(),this.UpDownOpen()),this.Trousers.visible=this.Trousers1.visible=!0;let e=q._ClothData.get(t);this.Trousers.visible=this.Trousers1.visible=!0,this.Trousers.zOrder=e.Sort1,this.Trousers1.zOrder=e.Sort2,this.Trousers.skin=e.GetPath1(),this.Trousers1.skin=e.GetPath2(),this.Trousers.centerX=e.GetPosition1().x,this.Trousers.centerY=e.GetPosition1().y,this.Trousers1.centerX=e.GetPosition2().x,this.Trousers1.centerY=e.GetPosition2().y}SocksChange(t){if(this.Socks1.visible=this.Socks.visible=!1,null==t||0==t)return void(t=0);this.Socks1.visible=this.Socks.visible=!0;let e=q._ClothData.get(t);this.Socks.zOrder=e.Sort1,this.Socks1.zOrder=e.Sort2,this.Socks.skin=e.GetPath1(),this.Socks1.skin=e.GetPath2(),this.Socks.centerX=e.GetPosition1().x,this.Socks.centerY=e.GetPosition1().y,this.Socks1.centerX=e.GetPosition2().x,this.Socks1.centerY=e.GetPosition2().y}ShoseChange(t){if(this.Shose.visible=this.Shose1.visible=!1,null==t||0==t)return void(t=0);this.Shose.visible=this.Shose1.visible=!0;let e=q._ClothData.get(t);this.Shose.zOrder=e.Sort1,this.Shose1.zOrder=e.Sort2,this.Shose.skin=e.GetPath1(),this.Shose1.skin=e.GetPath2(),this.Shose.centerX=e.GetPosition1().x,this.Shose.centerY=e.GetPosition1().y,this.Shose1.centerX=e.GetPosition2().x,this.Shose1.centerY=e.GetPosition2().y}OrnamentChange(t){if(this.Ornament.visible=this.Ornament1.visible=!1,null==t||0==t)return void(t=0);this.Ornament.visible=this.Ornament1.visible=!0;let e=q._ClothData.get(t);this.Ornament.zOrder=e.Sort1,this.Ornament1.zOrder=e.Sort2,this.Ornament.skin=e.GetPath1(),this.Ornament1.skin=e.GetPath2(),this.Ornament.centerX=e.GetPosition1().x,this.Ornament.centerY=e.GetPosition1().y,this.Ornament1.centerX=e.GetPosition2().x,this.Ornament1.centerY=e.GetPosition2().y}UpDownOpen(){this.Shirt.visible=this.Shirt1.visible=!0,this.Trousers.visible=this.Trousers1.visible=!0}UpDownClose(){this.ShirtChange(0),this.TrousersChange(0),this.Shirt.visible=this.Shirt1.visible=!1,this.Trousers.visible=this.Trousers1.visible=!1}DressOpen(){this.Dress.visible=this.Dress1.visible=!0}DressClose(){this.DressChange(0),this.Dress.visible=this.Dress1.visible=!1}}class nt extends Laya.Script{onAwake(){nt.Instance=this,this.FemaleRoot=this.owner,this.Hair=this.FemaleRoot.getChildByName("Hair"),this.Hair1=this.FemaleRoot.getChildByName("Hair1"),this.Ornament=this.FemaleRoot.getChildByName("Ornament"),this.Ornament1=this.FemaleRoot.getChildByName("Ornament1"),this.Shirt=this.FemaleRoot.getChildByName("Shirt"),this.Shirt1=this.FemaleRoot.getChildByName("Shirt1"),this.Trousers=this.FemaleRoot.getChildByName("Trousers"),this.Trousers1=this.FemaleRoot.getChildByName("Trousers1"),this.Dress=this.FemaleRoot.getChildByName("Dress"),this.Dress1=this.FemaleRoot.getChildByName("Dress1"),this.Socks=this.FemaleRoot.getChildByName("Socks"),this.Socks1=this.FemaleRoot.getChildByName("Socks1"),this.Shose=this.FemaleRoot.getChildByName("Shose"),this.Shose1=this.FemaleRoot.getChildByName("Shose1"),this.Coat=this.FemaleRoot.getChildByName("Coat"),this.Coat1=this.FemaleRoot.getChildByName("Coat1");for(let t=0;t<8;t++)this._ClothChange(0,t)}HairRandomFuc(){let t=q.HairData.length,e=p.randomInRange_i(0,t-1);return q.HairData[e].ID}DressRandomFuc(){let t=q.DressData.length,e=p.randomInRange_i(0,t-1);return q.DressData[e].ID}ShirtRandomFuc(){let t=q.ShirtData.length,e=p.randomInRange_i(0,t-1);return q.ShirtData[e].ID}TrousersRandomFuc(){let t=q.TrousersData.length,e=p.randomInRange_i(0,t-1);return q.TrousersData[e].ID}SocksRandomFuc(){let t=q.SocksData.length,e=p.randomInRange_i(0,t-1);return q.SocksData[e].ID}ShoseRandomFuc(){let t=q.ShoseData.length,e=p.randomInRange_i(0,t-1);return q.ShoseData[e].ID}OrnamentRandomFuc(){let t=q.OrnamentData.length,e=p.randomInRange_i(0,t-1);return q.OrnamentData[e].ID}ChangeAllCloth(){this.HairChange(this.HairRandomFuc()),this.OrnamentChange(this.OrnamentRandomFuc()),this.CoatChange(0),this.ShirtChange(this.ShirtRandomFuc()),this.SocksChange(this.SocksRandomFuc()),this.TrousersChange(this.TrousersRandomFuc()),this.DressChange(this.DressRandomFuc()),this.ShoseChange(this.ShoseRandomFuc())}_ClothChange(t,e){switch(e){case A.Hair:this.HairChange(t);break;case A.Dress:this.DressChange(t);break;case A.Coat:this.CoatChange(t);break;case A.Shirt:this.ShirtChange(t);break;case A.Trousers:this.TrousersChange(t);break;case A.Socks:this.SocksChange(t);break;case A.Shose:this.ShoseChange(t);break;case A.Ornament:this.OrnamentChange(t)}}HairChange(t){this.Hair.visible=this.Hair1.visible=!1,null!=t&&0!=t||(t=10002),this.Hair.visible=this.Hair1.visible=!0;let e=q._clothData.get(t);this.Hair.zOrder=e.Sort1,this.Hair1.zOrder=e.Sort2,this.Hair.skin=e.GetPath1(),this.Hair1.skin=e.GetPath2(),this.Hair.centerX=e.GetPosition1().x,this.Hair.centerY=e.GetPosition1().y,this.Hair1.centerX=e.GetPosition2().x,this.Hair1.centerY=e.GetPosition2().y}DressChange(t){if(this.Dress.visible=this.Dress1.visible=!1,null==t||0==t)return t=0,void this.UpDownOpen();this.DressOpen(),40502==t&&(this.Shose.visible=this.Shose1.visible=!1),this.Dress.visible=this.Dress1.visible=!0,this.UpDownClose();let e=q._ClothData.get(t);this.Dress.zOrder=e.Sort1,this.Dress1.zOrder=e.Sort2,this.Dress.skin=e.GetPath1(),this.Dress1.skin=e.GetPath2(),this.Dress.centerX=e.GetPosition1().x,this.Dress.centerY=e.GetPosition1().y,this.Dress1.centerX=e.GetPosition2().x,this.Dress1.centerY=e.GetPosition2().y}CoatChange(t){if(this.Coat.visible=this.Coat1.visible=!1,null==t||0==t)return void(t=0);this.Coat.visible=this.Coat1.visible=!0;let e=q._ClothData.get(t);this.Coat.zOrder=e.Sort1,this.Coat1.zOrder=e.Sort2,this.Coat.skin=e.GetPath1(),this.Coat1.skin=e.GetPath2(),this.Coat.centerX=e.GetPosition1().x,this.Coat.centerY=e.GetPosition1().y,this.Coat1.centerX=e.GetPosition2().x,this.Coat1.centerY=e.GetPosition2().y}ShirtChange(t){this.Shirt.visible=this.Shirt1.visible=!1,null==t||0==t?t=1e4:(this.DressClose(),this.UpDownOpen()),this.Shirt.visible=this.Shirt1.visible=!0;let e=q._ClothData.get(t);this.Shirt.zOrder=e.Sort1,this.Shirt1.zOrder=e.Sort2,this.Shirt.skin=e.GetPath1(),this.Shirt1.skin=e.GetPath2(),this.Shirt.centerX=e.GetPosition1().x,this.Shirt.centerY=e.GetPosition1().y,this.Shirt1.centerX=e.GetPosition2().x,this.Shirt1.centerY=e.GetPosition2().y}TrousersChange(t){this.Trousers.visible=this.Trousers1.visible=!1,null==t||0==t?t=10001:(this.DressClose(),this.UpDownOpen()),this.Trousers.visible=this.Trousers1.visible=!0;let e=q._ClothData.get(t);this.Trousers.visible=this.Trousers1.visible=!0,this.Trousers.zOrder=e.Sort1,this.Trousers1.zOrder=e.Sort2,this.Trousers.skin=e.GetPath1(),this.Trousers1.skin=e.GetPath2(),this.Trousers.centerX=e.GetPosition1().x,this.Trousers.centerY=e.GetPosition1().y,this.Trousers1.centerX=e.GetPosition2().x,this.Trousers1.centerY=e.GetPosition2().y}SocksChange(t){if(this.Socks1.visible=this.Socks.visible=!1,null==t||0==t)return void(t=0);this.Socks1.visible=this.Socks.visible=!0;let e=q._ClothData.get(t);this.Socks.zOrder=e.Sort1,this.Socks1.zOrder=e.Sort2,this.Socks.skin=e.GetPath1(),this.Socks1.skin=e.GetPath2(),this.Socks.centerX=e.GetPosition1().x,this.Socks.centerY=e.GetPosition1().y,this.Socks1.centerX=e.GetPosition2().x,this.Socks1.centerY=e.GetPosition2().y}ShoseChange(t){if(this.Shose.visible=this.Shose1.visible=!1,null==t||0==t)return void(t=0);this.Shose.visible=this.Shose1.visible=!0;let e=q._ClothData.get(t);this.Shose.zOrder=e.Sort1,this.Shose1.zOrder=e.Sort2,this.Shose.skin=e.GetPath1(),this.Shose1.skin=e.GetPath2(),this.Shose.centerX=e.GetPosition1().x,this.Shose.centerY=e.GetPosition1().y,this.Shose1.centerX=e.GetPosition2().x,this.Shose1.centerY=e.GetPosition2().y}OrnamentChange(t){if(this.Ornament.visible=this.Ornament1.visible=!1,null==t||0==t)return void(t=0);this.Ornament.visible=this.Ornament1.visible=!0;let e=q._ClothData.get(t);console.log(e),this.Ornament.zOrder=e.Sort1,this.Ornament1.zOrder=e.Sort2,this.Ornament.skin=e.GetPath1(),this.Ornament1.skin=e.GetPath2(),this.Ornament.centerX=e.GetPosition1().x,this.Ornament.centerY=e.GetPosition1().y,this.Ornament1.centerX=e.GetPosition2().x,this.Ornament1.centerY=e.GetPosition2().y}UpDownOpen(){this.Shirt.visible=this.Shirt1.visible=!0,this.Trousers.visible=this.Trousers1.visible=!0}UpDownClose(){this.ShirtChange(0),this.TrousersChange(0),this.Shirt.visible=this.Shirt1.visible=!1,this.Trousers.visible=this.Trousers1.visible=!1}DressOpen(){this.Dress.visible=this.Dress1.visible=!0}DressClose(){this.DressChange(0),this.Dress.visible=this.Dress1.visible=!1}}class rt extends Laya.Script{constructor(){super(...arguments),this.Datas=[]}onAwake(){let t=this.owner;this.Name=t.getChildByName("Name"),this.WinCount=t.getChildByName("WinCount"),this.RankNum=t.getChildByName("RankNum"),this.Top1=t.getChildByName("Top1"),this.Top2=t.getChildByName("Top2"),this.Top3=t.getChildByName("Top3"),this.BG_white=t.getChildByName("BG_white"),this.BG_yellow=t.getChildByName("BG_Yellow"),this.IconParent=t.getChildByName("IconParent"),this.hairBox=this.IconParent.getChildByName("hairBox")}fell(t,e){this.Datas=t,this.Name.text=this.Datas[e].Name,this.WinCount.text="胜场:"+this.Datas[e].Num.toString(),this.RankNum.text=(e+1).toString(),this.RankNum.visible=!0,this.Top1.visible=!1,this.Top2.visible=!1,this.Top3.visible=!1,this.BG_white.visible=!0,this.BG_yellow.visible=!1;for(let t=0;t<this.hairBox.numChildren;t++){this.hairBox.getChildAt(t).visible=!1}"我"==this.Datas[e].Name&&(this.BG_white.visible=!1,this.BG_yellow.visible=!0),this.Top1.visible=0==e,this.Top2.visible=1==e,this.Top3.visible=2==e,(this.Top1.visible||this.Top2.visible||this.Top3.visible)&&(this.RankNum.visible=!1);let i=p.randomInRange_i(0,this.hairBox.numChildren-1);this.hairBox.getChildAt(i).visible=!0}}class lt extends v{constructor(){super(...arguments),this._openType=k.Attach,this.rankisopen=!1,this.Data=[],this.isLookVideo=!1}onInit(){lt.ins=this,this.BackBtn=this.vars("BackBtn"),this.Pick=this.vars("Pick"),this.RankListBtn=this.vars("RankListBtn"),this.FemaleRoot=this.vars("FemaleRoot"),this.RankListBox=this.vars("RankListBox"),this._PickClothChange=this.FemaleRoot.getComponent(ot),this.btnEv("BackBtn",()=>{this.hide()}),this.btnEv("RankListBtn",()=>{M.TAPoint(x.BtnClick,"phb_turn"),this.ShowRankListBtnClick()}),this.btnEv("Pick",()=>{_.stopAutoRecord(),_.startAutoRecord(),0==parseInt(Laya.LocalStorage.getItem("PickNum"))?this.ADClick():this.PickBtnClick()}),this.LRank=b.tweenCust(300,this,this.tweenRankLeft,null,!0,Laya.Ease.linearNone),this.RRank=b.tweenCust(300,this,this.tweenRankRight,null,!0,Laya.Ease.linearNone),this.FRL=b.tweenCust(300,this,this.tweenFemaleRootLeft,null,!0,Laya.Ease.linearNone),this.FRR=b.tweenCust(300,this,this.tweenFemaleRootRight,null,!0,Laya.Ease.linearNone),this.PickNumImage=this.vars("PickNumImage"),this.PickNum=this.vars("PickNum"),this.PickNum.text=Laya.LocalStorage.getItem("PickNum"),this.ADImage=this.vars("ADImage"),this.RankList=this.vars("RankList"),this.RankList.vScrollBarSkin="",this.Refresh(),this.RankList.renderHandler=new Laya.Handler(this,this.onWrapItem),this.RankList.refresh()}onWrapItem(t,e){t.getComponent(rt).fell(this.Data,e)}Refresh(){for(let t=0;t<q.PickData.length;t++)"我"==q.PickData[t].Name&&(q.PickData[t].Num=parseInt(Laya.LocalStorage.getItem("TodayWinNum")));q.PickData.sort((t,e)=>e.Num-t.Num);for(let t=0;t<q.PickData.length;t++)this.Data[t]=q.PickData[t];this.RankList.refresh(),this.RankList.array=this.Data}onShow(){M.TAPoint(x.BtnShow,"meiripk_turn"),M.TAPoint(x.BtnShow,"ADpk_turn"),M.TAPoint(x.BtnShow,"phb_turn"),this.isLookVideo=!1,this._PickClothChange.ChangeAllCloth(),"0"==Laya.LocalStorage.getItem("PickNum")&&(this.ADImage.visible=!0,this.PickNumImage.visible=!1)}tweenRankLeft(t){console.log(this.RankListBox),console.log("RankListBox.............");let e=this.RankListBox.right;b.lerp_Num(e,0,t),this.RankListBox.right=t.outParams[0][0]}tweenRankRight(t){let e=this.RankListBox.right;b.lerp_Num(e,-316,t),this.RankListBox.right=t.outParams[0][0]}tweenFemaleRootLeft(t){let e=this.FemaleRoot.centerX;b.lerp_Num(e,-119,t),this.FemaleRoot.centerX=t.outParams[0][0]}tweenFemaleRootRight(t){let e=this.FemaleRoot.centerX;b.lerp_Num(e,-19,t),this.FemaleRoot.centerX=t.outParams[0][0]}ShowRankListBtnClick(){this.rankisopen=!this.rankisopen,this.rankisopen?(this.LRank.play(),this.FRL.play()):(this.RRank.play(),this.FRR.play())}PickBtnClick(){M.TAPoint(x.BtnClick,"meiripk_turn"),q.TodaySign="1",q.SetLastTime();let t=Laya.LocalStorage.getItem("PickNum"),e=parseInt(t);e>0&&(I.show("UIPickLoading"),e--,Laya.LocalStorage.setItem("PickNum",e.toString()),this.PickNum.text=e.toString(),e<=0&&(this.ADImage.visible=!0,this.PickNumImage.visible=!1))}ADImageClick(){M.TAPoint(x.BtnClick,"ADpk_turn"),M.ShowReward(()=>{let t=Laya.LocalStorage.getItem("PickNum"),e=parseInt(t);e++,Laya.LocalStorage.setItem("PickNum",e.toString()),this.PickNum.text=e.toString(),this.isLookVideo=!0,I.tip("PK次数+1")},()=>{I.show("UITip",()=>{let t=Laya.LocalStorage.getItem("PickNum"),e=parseInt(t);e++,Laya.LocalStorage.setItem("PickNum",e.toString()),this.PickNum.text=e.toString(),this.isLookVideo=!0,I.tip("PK次数+1")})})}ADClick(){this.ADImage.visible=!0,this.PickNumImage.visible=!1,M.TAPoint(x.BtnClick,"ADpk_turn"),M.ShowReward(()=>{I.show("UIPickLoading"),I.tip("PK次数+1"),this.isLookVideo=!0})}onHide(){I.get("UIReady").isPicking=!1,_.stopAutoRecord(),console.log("关闭了UIRank")}}C.Game_Init=class extends f{constructor(){super(...arguments),this.name="Game_Init"}onInit(){q.windowWidth=Laya.Browser.width,0==P.getPlayerData("newPlay")?M.Event("NEW_LOAD_START"):M.Event("OLD_LOAD_START"),Laya.MouseManager.multiTouchEnabled=!1,I.show("UIPreload")}onEnter(t){}onExit(){}},C.Game_Ready=class extends f{constructor(){super(...arguments),this.name="Game_Ready"}onInit(){}onEnter(){I.show("UIReady")}onExit(){}},C.Game_Main=class extends f{constructor(){super(...arguments),this.name="Game_Main"}onInit(){}onEnter(t){I.show("UIMain"),B.playMusic("bgm")}onExit(){}},C.Game_Settle=class extends f{constructor(){super(...arguments),this.name="Game_Settle"}onInit(){}onEnter(t){Laya.SoundManager.stopMusic(),w.notify(d.save),w.notify(d.pause,!1),I.interim1(()=>{B.fsm.to("Game_Ready")})}onExit(){}},C.UIPreload=class extends v{constructor(){super(...arguments),this._openType=k.Once,this._fadeIn=!1}StartLoading(){}onInit(){new F,TJ.API.TA.log=!0,O.init(),M.TAPoint(x.PageEnter,"UIPreload");let t=new st;this.loading=this.vars("loading"),Laya.timer.loop(10,this,this.onValueChange),setTimeout(()=>{console.log("开始加载资源延迟5s"),Laya.loader.create("Prefab/CoinPref.prefab"),t.LoadJson()},500),w.reg("sgl1",this,()=>{B.fsm.to("Game_Ready",0),M.TAPoint(x.PageLeave,"UIPreload")})}onValueChange(){this.loading.width>=443&&(this.loading.width=443),this.loading.width+=2}onShow(){w.reg(d.preloadStep,this,this.onLoadStep),w.reg(d.preloadCpl,this,this.onLoadCpl),B.readyAll()}onHide(){w.offCaller(this)}onLoadStep(t){}onLoadCpl(){M.initShare()}},C.UIReady=class extends v{constructor(){super(...arguments),this.clothisopen=!0,this.scaleDelta=0,this.scaleDelta1=0,this.isToOne=!0,this.newmap=new Map,this.oldY=0,this.oldX=0,this.isLeftMove=!1,this.isMusicing=!1,this.oldTime=0,this.str={},this.str1={},this.str2={},this.str3={},this.isPicking=!1}onInit(){M.TAPoint(x.PageEnter,"mainpage"),this.Shop=this.vars("Shop"),this.btnEv("Shop",()=>{I.show("UITask")}),this.Charm=this.vars("Charm"),this.CharmValueShow(),this.Draw=this.vars("Draw"),this.AdDraw=this.Draw.getChildByName("AD"),"1"==Laya.LocalStorage.getItem("DrawAd")&&(this.AdDraw.visible=!0),this.btnEv("Draw",()=>{Laya.LocalStorage.getItem("DrawAd")?(console.log("存在drawad"),"1"==Laya.LocalStorage.getItem("DrawAd")&&M.ShowReward(()=>{I.show("UIDraw")})):(console.log("不存在drawad"),Laya.LocalStorage.setItem("DrawAd","1"),I.show("UIDraw"),this.AdDraw.visible=!0)}),this.btnEv("Combine",()=>{this.UICombine.visible=!0,_.startAutoRecord()}),this.Notice=this.vars("Notice"),this.btnEv("Notice",()=>{I.show("UINotice")}),this.DuihuanBtn=this.vars("DuihuanBtn"),this.btnEv("DuihuanBtn",()=>{I.show("UIDuiHuan")}),this.UICombine=this.vars("UICombine"),this.ConfirmBtn=this.vars("ConfirmBtn"),this.btnEv("ConfirmBtn",()=>{I.show("UICombine"),Laya.timer.once(1e3,this,()=>{this.UICombine.visible=!1})}),this.UIWedding=this.vars("UIWedding"),"1"==q.ClothDataRefresh[40501]&&"1"==q.ClothDataRefresh[40502]&&"1"==q.ClothDataRefresh[40503]?this.UIWedding.visible=!0:this.UIWedding.visible=!1,this.QianWangBtn=this.vars("QianWangBtn"),this.WeddingCloseBtn=this.vars("WeddingCloseBtn"),this.btnEv("QianWangBtn",()=>{I.show("UIActive"),this.UIWedding.visible=!1,this.UIPickReward1.visible=!0}),this.btnEv("WeddingCloseBtn",()=>{this.UIWedding.visible=!1,this.UIPickReward1.visible=!0}),this.UIPickReward1=this.vars("UIPickReward1"),this.UIWedding.visible?this.UIPickReward1.visible=!1:this.UIPickReward1.visible=!0,this.LiKeChuDaoBtn=this.vars("LiKeChuDaoBtn"),this.CloseBtn=this.vars("CloseBtn"),this.btnEv("LiKeChuDaoBtn",()=>{I.show("UIRank"),this.UIPickReward1.visible=!1}),this.btnEv("CloseBtn",()=>{this.UIPickReward1.visible=!1}),this.UIWeddingShare=this.vars("UIWeddingShare"),this.UIWeddingShare.visible=!1,this.WeddingBackBtn=this.vars("WeddingBackBtn"),this.ShareBtn=this.vars("ShareBtn"),this.btnEv("WeddingBackBtn",()=>{this.UIWeddingShare.visible=!1}),this.btnEv("ShareBtn",()=>{M.TAPoint(x.BtnClick,"jiehun_click"),_._share(()=>{I.tip("分享成功"),this.UIWeddingShare.visible=!1},()=>{})}),this.BG=this.vars("BG"),this.BG.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownListen),this.BG.on(Laya.Event.MOUSE_UP,this,this.onMouseUpListen),this.BG.on(Laya.Event.MOUSE_OUT,this,this.onMouseOutListen),this.BG.on(Laya.Event.CLICK,this,this.refreshClock),this.Wing=this.vars("Wing"),Laya.timer.frameLoop(1,this,()=>{this.scaleDelta+=.02;var t=Math.sin(this.scaleDelta);this.Wing.scale(t,1)}),this.Wing.on(Laya.Event.CLICK,this,()=>{I.show("UIWing"),this.Wing.visible=!1}),this.windowheight=Laya.Browser.height,this.windowwidth=Laya.Browser.width,Laya.LocalStorage.getItem("Get")?(console.log("获取到了"),console.log(q.GetFirstToNow())):(q.setFirstLoginTime(),this.UICombine.visible=!0,_.startAutoRecord(),q.ShopCharmValue="0"),this.btnEv("ClothOpenBtn",this.ClothOpenBtnClick),this.btnEv("ActiveBtn",this.ActiveClick),this.btnEv("ClothReceive",()=>{M.TAPoint(x.BtnClick,"chongzhi_click"),U.Instance.ClothReceive(),Z.Instance.ClothesPageChange(Z.Instance.SelectIndex)}),this.btnEv("PhotoBtn",()=>{I.show("UIPhotos"),M.TAPoint(x.BtnClick,"xiangce_click")}),this.btnEv("Share",()=>{U.Instance.Share(),M.TAPoint(x.BtnClick,"paizhao_click")}),this.ClockBtn=this.vars("ClockBtn"),this.refreshClock(),this.btnEv("ClockBtn",()=>{I.show("UITest")}),this.ShowView=this.vars("ShowView"),this.BtnBar=this.vars("BtnBar"),this.ClothOpenBtn=this.vars("ClothOpenBtn"),this.FemaleRoot=this.vars("FemaleRoot"),this.BagAll=this.vars("BagALL"),this.Ubag=b.tweenCust(300,this,this.tweenbagUp,null,!0,Laya.Ease.linearNone),this.Lbtn=b.tweenCust(300,this,this.tweenbtnLeft,null,!0,Laya.Ease.linearNone),this.btnU=b.tweenCust(200,this,this.RoteUp,null,!0,Laya.Ease.linearNone),this.FRS=b.tweenCust(300,this,this.tweenFBTSmall,null,!0,Laya.Ease.linearNone),this.Dbag=b.tweenCust(300,this,this.tweenbagDown,null,!0,Laya.Ease.backOut),this.Rbtn=b.tweenCust(300,this,this.tweenbtnRight,null,!0,Laya.Ease.backOut),this.btnD=b.tweenCust(200,this,this.RoteDown,null,!0,Laya.Ease.linearNone),this.FRB=b.tweenCust(300,this,this.tweenFBTBig,null,!0,Laya.Ease.backOut),this.FRD=b.tweenCust(300,this,this.tweenFRToDown,null,!0,Laya.Ease.backOut),this.FRU=b.tweenCust(300,this,this.tweenFRToUp,null,!0,Laya.Ease.backOut),q.IsNewDay()&&(console.log("GameDataController.IsNewDay",q.TodaySign),q.TodaySign="0",console.log("是新的一天"),q.TodayHeCheng="0");let t=q.TodaySign;t?"1"==t||(Laya.LocalStorage.setItem("PickNum","5"),Laya.LocalStorage.setItem("TodayWinNum","0")):(Laya.LocalStorage.setItem("PickNum","5"),Laya.LocalStorage.setItem("TodayWinNum","0"),q.TodaySign="0"),this.MusicBtn=this.vars("MusicBtn"),Laya.SoundManager.playSound("res/sounds/CCBGM.mp3",0),Laya.timer.frameLoop(1,this,this.MusicRot),this.btnEv("MusicBtn",()=>{this.isMusicing=!this.isMusicing,this.isMusicing?(console.log("xxxxxxxxxxxxxxxxxx2"),Laya.SoundManager.stopSound("res/sounds/CCBGM.mp3"),Laya.timer.clear(this,this.MusicRot),this.MusicBtn.getChildByName("No").visible=!0):(console.log("xxxxxxxxxxxxxxxxxx1"),Laya.SoundManager.playSound("res/sounds/CCBGM.mp3",0),Laya.timer.frameLoop(1,this,this.MusicRot),this.MusicBtn.getChildByName("No").visible=!1)}),this.Pick=this.vars("Pick"),this.btnEv("Pick",()=>{I.show("UIRank"),this.isPicking=!0,M.TAPoint(x.BtnClick,"pk_main")})}refreshClock(){var t=(new Date).getHours();Laya.timer.clear(this,this.ClockShake),t>=12&&t<=14?(this.ClockBtn.visible=!0,Laya.timer.frameLoop(1,this,this.ClockShake)):this.ClockBtn.visible=!1}ClockShake(){this.scaleDelta1+=.02;var t=Math.sin(this.scaleDelta1);this.ClockBtn.scale(t,t)}MusicRot(){this.MusicBtn.rotation+=2}ActiveClick(){I.show("UIActive")}onShow(){this.Refresh(),M.TAPoint(x.BtnShow,"fenxiang_click"),M.TAPoint(x.BtnShow,"paizhao_click"),M.TAPoint(x.BtnShow,"chongzhi_click"),M.TAPoint(x.BtnShow,"fangda_click"),M.TAPoint(x.BtnShow,"xiangce_click"),M.TAPoint(x.BtnShow,"pk_main"),M.TAPoint(x.BtnShow,"jiehun_click"),q.CharmValue="0",this.CharmValueShow()}onHide(){}ClothOpenBtnClick(){this.clothisopen?(M.TAPoint(x.BtnClick,"fangda_click"),console.log("消失"),this.Dbag.play(),this.btnU.play(),this.FRB.play(),Laya.LocalStorage.getJSON("ClothData")):(console.log("展示"),this.Ubag.play(),this.btnD.play(),this.FRS.play()),this.clothisopen=!this.clothisopen}RoteDown(t){let e=this.ClothOpenBtn.rotation;b.lerp_Num(e,180,t),this.ClothOpenBtn.rotation=t.outParams[0][0]}RoteUp(t){let e=this.ClothOpenBtn.rotation;b.lerp_Num(e,0,t),this.ClothOpenBtn.rotation=t.outParams[0][0]}tweenbagUp(t){let e=this.BagAll.bottom;b.lerp_Num(e,-37,t),this.BagAll.bottom=t.outParams[0][0]}tweenbagDown(t){let e=this.BagAll.bottom;b.lerp_Num(e,-485,t),this.BagAll.bottom=t.outParams[0][0]}tweenbtnLeft(t){let e=this.BtnBar.x;b.lerp_Num(e,75,t),this.BtnBar.x=t.outParams[0][0]}tweenbtnRight(t){let e=this.BtnBar.x;b.lerp_Num(e,q.windowWidth-75,t),this.BtnBar.x=t.outParams[0][0]}tweenFBTSmall(t){let e=this.FemaleRoot.scaleX;b.lerp_Num(e,.8,t),this.FemaleRoot.scaleX=this.FemaleRoot.scaleY=t.outParams[0][0],this.BG.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownListen)}tweenFBTBig(t){let e=this.FemaleRoot.scaleX;b.lerp_Num(e,1.2,t),this.FemaleRoot.scaleX=this.FemaleRoot.scaleY=t.outParams[0][0],this.BG.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDownListen)}onClick_Btnshortcut(){I.show("UIMain")}onMouseMoveListen(t){this.BG.mouseY>this.oldY&&this.BG.mouseY-this.oldY>200&&(console.log("下滑"),this.FRD.play(),this.Wing.visible||1!=q.ClothDataRefresh[50404]||(this.Wing.visible=!0)),this.BG.mouseX<this.oldX&&this.oldX-this.BG.mouseX>150&&(console.log("oldX"+this.oldX),console.log(this.BG.mouseX),console.log("左滑"+(this.oldX-this.BG.mouseX)))}onMouseDownListen(){this.oldY=this.BG.mouseY,this.oldX=this.BG.mouseX,this.BG.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMoveListen)}onMouseUpListen(){console.log("鼠标抬起"),this.BG.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMoveListen),this.FRU.play()}onMouseOutListen(){console.log("不在目标区域"),this.FRU.play(),this.BG.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMoveListen)}tweenFRToDown(t){b.lerp_Num(this.FemaleRoot.centerY,-60,t),this.FemaleRoot.centerY=t.outParams[0][0]}tweenFRToUp(t){b.lerp_Num(this.FemaleRoot.centerY,-193,t),this.FemaleRoot.centerY=t.outParams[0][0]}Refresh(){q.ClothPackge2.cloths1.forEach((t,e)=>{let i=q.ClothDataRefresh[q.ClothPackge2.cloths1[e].ID];this.str[q.ClothPackge2.cloths1[e].ID]=i}),q.ClothdatapackSet(q.ClothPackge2.cloths1[0].GetType2,this.str),q.ClothPackge2.cloths2.forEach((t,e)=>{let i=q.ClothDataRefresh[q.ClothPackge2.cloths2[e].ID];this.str1[q.ClothPackge2.cloths2[e].ID]=i}),q.ClothdatapackSet(q.ClothPackge2.cloths2[0].GetType2,this.str1),q.ClothPackge2.cloths3.forEach((t,e)=>{let i=q.ClothDataRefresh[q.ClothPackge2.cloths3[e].ID];this.str2[q.ClothPackge2.cloths3[e].ID]=i}),q.ClothdatapackSet(q.ClothPackge2.cloths3[0].GetType2,this.str2)}CharmValueShow(){console.log("xxxxxxxxxxxxx"),this.Charm.getChildByName("CharmValue").value=(parseInt(q.CharmValue)+parseInt(q.ShopCharmValue)).toString()}},C.UIMain=class extends v{onInit(){this.TouchArea.on(Laya.Event.CLICK,this,()=>{this.Mouse_Click()}),this.TouchArea.on(Laya.Event.MOUSE_MOVE,this,()=>{this.Mouse_Move()}),this.TouchArea.on(Laya.Event.MOUSE_UP,this,()=>{this.Mouse_Up()}),this.TouchArea.on(Laya.Event.MOUSE_DOWN,this,()=>{this.Mouse_Down(),Laya.timer.loop(100,this,this.timeradd)}),this.TouchArea.on(Laya.Event.MOUSE_OUT,this,()=>{this.Mouse_Up()})}timeradd(){}onShow(){}Mouse_Click(){}Mouse_Move(){}Mouse_Up(){}Mouse_Down(){}TimerUpdate(){}update(){}onHide(){}TimeControoler(){}TimeStart(){Laya.timer.loop(10,this,this.TimeControoler)}TimeStop(){Laya.timer.clear(this,this.TimeControoler)}},C.UISettle=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.DefaultTog=!0}onInit(){this.btnEv("BtnHome",()=>{this.HomeBtn()})}TogClick(){}onShow(){B.playSound("success")}HomeBtn(){I.show("UISubMoneyEf",()=>{I.show("UIReady"),this.hide()})}SanBeiBtn(){M.Event("ADV_RDA_CLICK_003"),M.ShowReward(()=>{I.show("UISubMoneyEf",()=>{I.show("UIReady"),this.hide()})})}ShareBtnClick(){M.Event("VID_RDA_CLICK_001"),_._share(()=>{},()=>{I.tip("分享失败")})}},C.UIActive=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.Data=[]}onInit(){this.ActiveList=this.vars("ActiveList"),this.ActiveList.vScrollBarSkin="",this.Refresh(),this.ActiveList.renderHandler=new Laya.Handler(this,this.onWrapItem),this.btnEv("CloseBtn",()=>{this.hide()})}onWrapItem(t,e){t.getComponent($).fell(this.Data[e],e)}onShow(){M.TAPoint(x.PageEnter,"taozhuangpage"),this.Refresh()}Refresh(){this.Data.length=0;let t=[];q.ClothPackge2.cloths3.length>0&&t.push(q.ClothPackge2.cloths3),q.ClothPackge2.cloths1.length>0&&t.push(q.ClothPackge2.cloths1),q.ClothPackge2.cloths2.length>0&&t.push(q.ClothPackge2.cloths2),console.log(t),this.Data=t,this.ActiveList.array=this.Data,this.ActiveList.refresh(),console.log("UIActive",this.Data)}onHide(){M.TAPoint(x.PageLeave,"taozhuangpage"),this.hide()}},C.UISubMoneyEf=class extends v{constructor(){super(...arguments),this._openType=k.Attach}moveFinish(){this.hide(),console.log("paowan")}tweenAlphaFinish(t=null){let e=Laya.loader.getRes("Prefab/CoinPref.prefab").json,i=new Laya.Prefab;i.json=e;let s=this.owner,a=this.vars("icon"),h=a.x,o=a.y;for(let e=0;e<30;e++){let a=i.create();s.addChild(a),a.x=p.randomInRange_f(260,560),a.y=p.randomInRange_f(340,840),b.tweenTiny(100,this,t=>{a.scale(t.factor,t.factor)},()=>{b.tweenTiny(400,this,t=>{let e=t.getPG("inParams",0);0==e.length&&(e[0]=a.x,e[1]=h-a.x,e[2]=a.y,e[3]=o-a.y),a.x=e[0]+e[1]*t.factor,a.y=e[2]+e[3]*t.factor,t.factor>=1&&a.destroy()},29==e?()=>{t(),this.moveFinish()}:null,!1,Laya.Ease.linearNone,550)},!1,Laya.Ease.linearNone,p.randomInRange_f(0,15)*e)}}onShow(t=null){this.tweenAlphaFinish(t)}},C.UISign=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.Data=[],this.str={},this.BtnBar=[],this.func=null}onInit(){this.btnEv("CloseBtn",()=>{this.hide()}),this.SkinBtnBar=this.vars("SkinBtnBar");for(let t=0;t<this.SkinBtnBar.numChildren;t++)this.SkinBtnBar.getChildAt(t).addComponent(at),this.BtnBar.push(this.SkinBtnBar.getChildAt(t))}onShow(t){M.TAPoint(x.PageEnter,"signpage"),this.func=t,this.Data=q.ClothPackge1.cloths1,this.Data.forEach((t,e)=>{this.BtnBar[e].getComponent(at).Fell(t,e)}),this.Refresh()}onRefresh(){}Refresh(){this.Data.forEach((t,e)=>{let i=q.ClothDataRefresh[this.Data[e].ID];this.str[this.Data[e].ID]=i,this.BtnBar[e].getComponent(at).Fell(t,e)}),q.ClothdatapackSet(this.Data[0].GetType2,this.str)}onHide(){M.TAPoint(x.PageLeave,"signpage"),this.hide()}},C.UIPhotos=class extends v{constructor(){super(...arguments),this._openType=k.Attach}onInit(){this.FemaleRoot=this.vars("FemaleRoot"),this._PhotosChange=this.FemaleRoot.getComponent(ht),this.ChangeLeft=this.vars("ChangeLeft"),this.ChangeRight=this.vars("ChangeRight"),this.TweenskewY=this.vars("TweenskewY"),this.btnEv("BackHome",this.TweenOff),this.btnEv("ChangeLeft",this.ChangeLastPhoto),this.btnEv("ChangeRight",this.ChangeNextPhoto)}onShow(){M.TAPoint(x.PageEnter,"xiangcepage"),this.TweenskewY.skewY=-90,this._PhotosChange.InitMes(),this.TweenOn()}ChangeNextPhoto(){this._PhotosChange.ChangeNextPhoto()}ChangeLastPhoto(){this._PhotosChange.ChangeLastPhoto()}TweenOn(){Laya.Tween.to(this.TweenskewY,{skewY:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{}),0,!0,!0)}TweenOff(){Laya.Tween.to(this.TweenskewY,{skewY:-90},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.hide()}),0,!0,!0)}onHide(){M.TAPoint(x.PageLeave,"xiangcepage"),this.hide()}},C.UITest=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.Data=[],this.str={},this.Num=0,this.Now=0,this.Need=0}onInit(){this.first=this.vars("first"),this.second=this.vars("second"),this.third=this.vars("third"),this.ADBtn=this.vars("ADBtn"),this.Refresh(),this.btnEv("BackBtn",()=>{this.hide()}),this.btnEv("ADBtn",()=>{this.ADBtnClick()})}onShow(){M.TAPoint(x.PageEnter,"shuiyipage"),M.TAPoint(x.BtnShow,"ADshuiyi_click"),this.Refresh()}onHide(){M.TAPoint(x.PageLeave,"shuiyipage"),this.hide()}Refresh(){for(let t=0;t<q.ClothPackge3.cloths1.length;t++)this.Data[t]=q.ClothPackge3.cloths1[t];this.Data.forEach((t,e)=>{let i=q.ClothDataRefresh[this.Data[e].ID];this.str[this.Data[e].ID]=i}),this.Num=q.ClothAlllockNum(this.str),this.Now=this.Data.length-this.Num,this.Need=this.Data.length,this.ADBtn.visible=this.Num>0,this.ShowADClickCount(this.Now)}ADBtnClick(){console.log("点击了广告"),console.log(this.Now+"xxxxxxxxxxxxxx"),M.TAPoint(x.BtnClick,"ADshuiyi_click"),M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",()=>{this.GetAward()})})}GetAward(){for(let t in this.str)if(1==this.str[t]){let e=q.ClothDataRefresh;return e[t]=0,q.ClothDataRefresh=e,Laya.LocalStorage.setJSON(this.Data[0].GetType2,this.str),this.Refresh(),Z.Instance.refresh(),console.log("获取一件装扮"),void I.tip("恭喜获得新衣服")}}ShowADClickCount(t){switch(t){case 0:this.first.skin="Egg2/tiao1.png",this.second.skin="Egg2/tiao1.png",this.third.skin="Egg2/tiao1.png";break;case 1:this.first.skin="Egg2/tiao2.png",this.second.skin="Egg2/tiao1.png",this.third.skin="Egg2/tiao1.png";break;case 2:this.first.skin="Egg2/tiao2.png",this.second.skin="Egg2/tiao2.png",this.third.skin="Egg2/tiao1.png";break;case 3:this.first.skin="Egg2/tiao2.png",this.second.skin="Egg2/tiao2.png",this.third.skin="Egg2/tiao2.png"}}},C.UIWing=class extends v{constructor(){super(...arguments),this._openType=k.Attach}onInit(){this.CloseBtn=this.vars("CloseBtn"),this.btnEv("CloseBtn",()=>{this.hide()}),this.ADBtn=this.vars("ADBtn"),this.btnEv("ADBtn",this.ADClick),this.BG=this.vars("BG"),Laya.timer.frameLoop(1,this,()=>{this.BG.rotation+=2})}onShow(){M.TAPoint(x.PageEnter,"chibangpage"),M.TAPoint(x.BtnShow,"ADwings_click")}onHide(){M.TAPoint(x.PageLeave,"chibangpage"),this.hide()}ADClick(){M.TAPoint(x.BtnClick,"ADwings_click"),M.ShowReward(()=>{this.Reward()},()=>{I.show("UITip",this.Reward)})}Reward(){let t=q.ClothDataRefresh;t[50404]=0,q.ClothDataRefresh=t,Z.Instance.showList(),I.tip("成功解锁翅膀!"),this.hide()}},C.UITip=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.func=null}onInit(){this.CloseBtn=this.vars("CloseBtn"),this.CloseBtn.visible=!1,this.BG=this.vars("BG"),this.btnEv("CloseBtn",()=>{this.hide()}),this.ConfirmBtn=this.vars("ConfirmBtn"),this.btnEv("ConfirmBtn",this.onConfirmBtnClick)}onRefresh(){}onShow(t){M.TAPoint(x.BtnShow,"ADrewardbt_tishiAD"),this.func=t,this.CloseBtn.visible=!1,Laya.timer.once(2e3,this,()=>{this.CloseBtn.visible=!0})}onHide(){this.hide()}onConfirmBtnClick(){M.TAPoint(x.BtnClick,"ADrewardbt_tishiAD"),M.ShowReward(()=>{this.func(),this.hide()})}},C.UIPick=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.otherCount=0,this.myCount=0,this.otherNum=0,this.myNum=0,this.isWin=!1,this.isLose=!1,this.PickCount=0}onInit(){this.FemaleRoot=this.vars("FemaleRoot"),this._PickClothChange=this.FemaleRoot.getComponent(ot),this.FemaleRoot1=this.vars("FemaleRoot1"),this._PickClothChangT=this.FemaleRoot1.getComponent(nt),this.BackBtn=this.vars("BackBtn"),this.BackBtn.visible=!1,this.btnEv("BackBtn",()=>{this.hide()}),this.FRToLeft=b.tweenCust(1e3,this,this.tweenFRToLeft,null,!0,Laya.Ease.backOut),this.FRToRight=b.tweenCust(1e3,this,this.tweenFRToRight,null,!0,Laya.Ease.backOut),this.Vote_other=this.vars("Vote_other"),this.otherPre=this.Vote_other.getChildByName("otherPre"),this.Vote_me=this.vars("Vote_me"),this.myPre=this.Vote_me.getChildByName("myPre"),this.WinMark=this.vars("WinMark"),this.LoseMark=this.vars("LoseMark"),this.Light=this.vars("Light"),this.WinUI=this.vars("WinUI"),this.LoseUI=this.vars("LoseUI"),this.WinBox=this.WinUI.getChildByName("WinBox"),this.LoseBox=this.LoseUI.getChildByName("LoseBox"),this.OkBtn=this.WinBox.getChildByName("OkBtn"),this.NoBtn=this.WinBox.getChildByName("NoBtn"),this.VoteNum=this.LoseBox.getChildByName("VoteNum"),this.ContinueBtn=this.LoseBox.getChildByName("ContinueBtn"),this.btnEv("OkBtn",this.OkBtnClick),this.btnEv("NoBtn",this.NoBtnClick),this.btnEv("ContinueBtn",this.ContinueBtnClick),this.ShareUI=this.vars("ShareUI"),this.ShareUI.visible=!1,this.ShareBox=this.ShareUI.getChildByName("ShareBox"),this.ShareBtn=this.ShareBox.getChildByName("ShareBtn"),this.CloseBtn=this.ShareBox.getChildByName("CloseBtn"),this.btnEv("ShareBtn",this.ShareBtnClick),this.btnEv("CloseBtn",this.CloseBtnClick)}onShow(){M.TAPoint(x.BtnShow,"fxpk_turn"),M.TAPoint(x.BtnShow,"nofx_turn"),M.TAPoint(x.BtnShow,"ADpkjiesuan_turn"),M.TAPoint(x.BtnShow,"pkpt_turn"),this.FRToRight.play(),this.FRToLeft.play(),this._PickClothChange.ChangeAllCloth(),this._PickClothChangT.ChangeAllCloth(),Laya.timer.once(1e3,this,this.PickFuc)}onHide(){this.otherPre.text="0",this.myPre.text="0",this.otherNum=0,this.myNum=0,this.WinMark.visible=!1,this.LoseMark.visible=!1,this.Light.visible=!1,this.WinUI.visible=!1,this.LoseUI.visible=!1,this.isWin=!1,this.isLose=!1,this.FemaleRoot.centerX=492,this.FemaleRoot1.centerX=-484,this.BackBtn.visible=!1,w.notify(O.EventType.PK),Laya.timer.clear(this,this.PickFuc)}tweenFRToLeft(t){b.lerp_Num(this.FemaleRoot.centerX,156,t),this.FemaleRoot.centerX=t.outParams[0][0]}tweenFRToRight(t){b.lerp_Num(this.FemaleRoot1.centerX,-147,t),this.FemaleRoot1.centerX=t.outParams[0][0]}PickFuc(){let t=p.randomInRange_i(0,10);if(console.log(t),lt.ins.isLookVideo)return this.WinVoteRadomFuc(),void console.log("必赢..........");let e=parseInt(Laya.LocalStorage.getItem("PickNum"));1==e||2==e||4==e?this.WinVoteRadomFuc():this.LoseVoteRadomFuc()}WinVoteRadomFuc(){this.otherCount=p.randomInRange_i(300,400),this.myCount=p.randomInRange_i(400,600),Laya.timer.loop(3,this,this.otherPreAdd),Laya.timer.loop(3,this,this.myPreAdd)}LoseVoteRadomFuc(){this.otherCount=p.randomInRange_i(400,600),this.myCount=p.randomInRange_i(300,400),Laya.timer.loop(3,this,this.otherPreAdd),Laya.timer.loop(3,this,this.myPreAdd)}otherPreAdd(){this.otherNum+=1,this.otherPre.text=this.otherNum+"",this.otherNum>=this.otherCount&&(Laya.timer.clear(this,this.otherPreAdd),Laya.timer.once(1e3,this,this.checkLose))}myPreAdd(){this.myNum+=1,this.myPre.text=this.myNum+"",this.myNum>=this.myCount&&(Laya.timer.clear(this,this.myPreAdd),Laya.timer.once(1e3,this,this.checkWin))}checkWin(){this.myCount>this.otherCount&&(this.isWin=!0,this.Light.visible=!0,this.WinMark.visible=!0,this.BackBtn.visible=!0),this.isWin&&(this.PickWin(),Laya.timer.once(1e3,this,()=>{this.WinUI.visible=!0}))}checkLose(){this.myCount<this.otherCount&&(this.LoseMark.visible=!0,this.isLose=!0,this.BackBtn.visible=!0),this.isLose&&Laya.timer.once(1e3,this,()=>{this.LoseUI.visible=!0,this.VoteNum.text=this.myPre.text})}OkBtnClick(){M.TAPoint(x.BtnClick,"ADpkjiesuan_turn"),M.ShowReward(()=>{this.PickWin()},()=>{I.show("UITip",()=>{this.PickWin()})}),this.WinUI.visible=!1,this.ShareUI.visible=!0,_.stopAutoRecord()}NoBtnClick(){M.TAPoint(x.BtnClick,"pkpt_turn"),this.WinUI.visible=!1,this.ShareUI.visible=!0,_.stopAutoRecord()}ContinueBtnClick(){this.LoseUI.visible=!1,this.hide()}PickWin(){let t=Laya.LocalStorage.getItem("TodayWinNum"),e=parseInt(t);e+=1,Laya.LocalStorage.setItem("TodayWinNum",e.toString()),I.tip("今日胜场+1"),I.get("UIRank").Refresh()}ShareBtnClick(){console.log("PK分享........."),M.TAPoint(x.BtnClick,"fxpk_turn"),_._share(()=>{I.tip("分享成功"),this.ShareUI.visible=!1},()=>{})}CloseBtnClick(){M.TAPoint(x.BtnClick,"nofx_turn"),this.ShareUI.visible=!1,this.hide()}},C.UIRank=lt,C.UIPickLoading=class extends v{constructor(){super(...arguments),this._openType=k.Attach}onInit(){this.loading=this.vars("loading")}onShow(){Laya.timer.loop(10,this,this.onValueChange)}onValueChange(){this.loading.width>=434&&(this.loading.width=434,Laya.timer.clear(this,this.onValueChange),Laya.timer.once(1e3,this,()=>{this.hide(),I.show("UIPick")})),this.loading.width+=5}onHide(){this.loading.width=0}},C.UIPickReward=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.Data=[],this.str={}}onInit(){this.ADBtn=this.vars("ADBtn"),this.btnEv("ADBtn",this.ADBtnClick),this.CloseBtn=this.vars("CloseBtn"),this.btnEv("CloseBtn",()=>{this.hide()})}onShow(){this.Data=q.ClothPackge1.cloths1,this.Data.forEach((t,e)=>{let i=q.ClothDataRefresh[this.Data[e].ID];this.str[this.Data[e].ID]=i}),console.log(this.Data)}ADBtnClick(){M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",()=>{this.GetAward()})})}GetAward(){for(let t in this.str)if(console.log(this.str[t]),1==this.str[t]){let e=q.ClothDataRefresh;e[t]=0,q.ClothDataRefresh=e,Laya.LocalStorage.setJSON(this.Data[0].GetType2,this.str),Z.Instance.refresh(),I.tip("恭喜获得一套新衣服")}this.hide()}},C.UICombine=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.count=0,this.isWatchAD=!0,this.str={}}onInit(){this.HeCheng=this.vars("HeCheng"),this.CombineBtn=this.HeCheng.getChildByName("CombineBtn"),this.Yanzhi=this.HeCheng.getChildByName("Yanzhi"),this.Fu=this.HeCheng.getChildByName("Fu"),this.QiZhi=this.HeCheng.getChildByName("QiZhi"),this.Aiqing=this.HeCheng.getChildByName("Aiqing"),this.Shuidi=this.HeCheng.getChildByName("Shuidi"),this.FuHei=this.HeCheng.getChildByName("FuHei"),this.Title=this.HeCheng.getChildByName("Title"),this.CombineBtn.on(Laya.Event.CLICK,this,this.DanShengShow),this.HCCloseBtn=this.HeCheng.getChildByName("HCCloseBtn"),this.HCCloseBtn.on(Laya.Event.CLICK,this,()=>{_.stopAutoRecord(),this.hide()}),this.Wan=this.HeCheng.getChildByName("Wan"),this.mask=this.vars("Mask"),this.QiZhi.on(Laya.Event.CLICK,this,this.QiZhiClick),this.Yanzhi.on(Laya.Event.CLICK,this,this.YanzhiClick),this.Fu.on(Laya.Event.CLICK,this,this.FuClick),this.Aiqing.on(Laya.Event.CLICK,this,this.AiqingClick),this.FuHei.on(Laya.Event.CLICK,this,this.FuHeiClick),this.Title.on(Laya.Event.CLICK,this,this.TitleClick),this.DanSheng=this.vars("DanSheng"),this.Guanghuan=this.DanSheng.getChildByName("Guanghuan"),this.StartBtn=this.DanSheng.getChildByName("StartBtn"),this.Role=this.DanSheng.getChildByName("Role"),this.CloseBtn=this.DanSheng.getChildByName("CloseBtn"),this.StartBtn.on(Laya.Event.CLICK,this,()=>{M.TAPoint(x.BtnClick,"zaoren_click"),_.stopAutoRecord(),_._share(()=>{I.tip("视频分享成功！"),this.hide()},()=>{I.tip("视频分享失败..."),this.hide()})}),this.CloseBtn.on(Laya.Event.CLICK,this,()=>{_.stopAutoRecord(),this.hide()}),this.CheckBtn=this.DanSheng.getChildByName("CheckBtn"),this.GetAwardBtn=this.DanSheng.getChildByName("GetAwardBtn"),this.CheckBtn.on(Laya.Event.CLICK,this,()=>{this.isWatchAD=!this.isWatchAD,this.CheckBtn.getChildAt(0).visible=!this.CheckBtn.getChildAt(0).visible,this.GetAwardBtn.getChildAt(0).visible=this.isWatchAD,this.GetAwardBtn.getChildAt(1).visible=!this.isWatchAD}),this.GetAwardBtn.on(Laya.Event.CLICK,this,this.GetAwardBtnClick)}onShow(){0==q.ClothDataRefresh[40201]&&0==q.ClothDataRefresh[40306]&&0==q.ClothDataRefresh[40504]&&(this.GetAwardBtn.visible=!1,this.CheckBtn.visible=!1,this.StartBtn.x=236,this.StartBtn.y=1042),this.HeCheng.visible=!0,this.Shuidi.visible=!1,this.DanSheng.visible=!1,this.isWatchAD=!0,this.CheckBtn.getChildAt(0).visible=!0,this.GetAwardBtn.getChildAt(0).visible=this.isWatchAD,this.GetAwardBtn.getChildAt(1).visible=!this.isWatchAD,this.count=0,this.QiZhi.on(Laya.Event.CLICK,this,this.QiZhiClick),this.Yanzhi.on(Laya.Event.CLICK,this,this.YanzhiClick),this.Fu.on(Laya.Event.CLICK,this,this.FuClick),this.Aiqing.on(Laya.Event.CLICK,this,this.AiqingClick),this.Fu.getChildAt(0).visible=!0,this.QiZhi.getChildAt(0).visible=!0,this.Aiqing.getChildAt(0).visible=!0,this.FuHei.x=343,this.FuHei.y=203,this.GetAwardBtn.visible=!0,this.CheckBtn.visible=!0,this.StartBtn.x=393,this.StartBtn.y=1042,Laya.timer.once(3e3,this,()=>{this.HCCloseBtn.visible=!0}),M.TAPoint(x.BtnShow,"zaoren_click")}onHide(){this.Shuidi.visible=!1,this.DanSheng.visible=!1,this.CloseBtn.visible=!1,Laya.timer.clear(this,this.GuangHuanRot),this.HCCloseBtn.visible=!1,this.mask.centerY=100}GuangHuanRot(){this.Guanghuan.rotation+=2}QiZhiClick(){M.ShowReward(()=>{this.QiZhi.getChildAt(0).visible=!1,this.owner.QiZhiAni.play(0,!1),this.count++,Laya.timer.frameOnce(35,this,()=>{this.mask.centerY-=15}),this.QiZhi.off(Laya.Event.CLICK,this,this.QiZhiClick)})}YanzhiClick(){this.owner.YanZhiAni.play(0,!1),this.count++,Laya.timer.frameOnce(35,this,()=>{this.mask.centerY-=15}),this.Yanzhi.off(Laya.Event.CLICK,this,this.YanzhiClick)}FuClick(){M.ShowReward(()=>{this.Fu.getChildAt(0).visible=!1,this.owner.FuAni.play(0,!1),this.count++,Laya.timer.frameOnce(35,this,()=>{this.mask.centerY-=15}),this.Fu.off(Laya.Event.CLICK,this,this.FuClick)})}AiqingClick(){M.ShowReward(()=>{this.Aiqing.getChildAt(0).visible=!1,this.owner.AiqingAni.play(0,!1),this.count++,Laya.timer.frameOnce(35,this,()=>{this.mask.centerY-=15}),this.Aiqing.off(Laya.Event.CLICK,this,this.AiqingClick)})}FuHeiClick(){M.ShowReward(()=>{this.FuHei.getChildAt(0).visible=!1,this.owner.FuHeiAni.play(0,!1),this.count++,Laya.timer.frameOnce(35,this,()=>{this.mask.centerY-=15}),this.FuHei.off(Laya.Event.CLICK,this,this.FuHeiClick)})}TitleClick(){this.FuHei.x=353.5,this.FuHei.y=902}DanShengShow(){console.log(this.count),this.count>=3?M.ShowReward(()=>{this.DanSheng.visible=!0,this.RoleRandom(),Laya.timer.loop(10,this,this.GuangHuanRot),Laya.timer.once(3e3,this,()=>{this.CloseBtn.visible=!0}),this.HeCheng.visible=!1},()=>{I.show("UITip",()=>{this.DanSheng.visible=!0,this.RoleRandom(),Laya.timer.loop(10,this,this.GuangHuanRot),Laya.timer.once(3e3,this,()=>{this.CloseBtn.visible=!0}),this.HeCheng.visible=!1})}):I.tip("至少增加三种属性才能够合成哦")}RoleRandom(){let t=p.randomInRange_i(1,3);this.Role.skin="Active/taozhuang"+t+".png",1==t&&(this.Datas=q.ClothPackge2.cloths3),2==t&&(this.Datas=q.ClothPackge2.cloths1),3==t&&(this.Datas=q.ClothPackge2.cloths2),this.Refresh(),0==q.ClothDataRefresh[this.Datas[this.Datas.length-1].ID]&&(this.GetAwardBtn.visible=!1,this.CheckBtn.visible=!1,this.StartBtn.x=236,this.StartBtn.y=1042),console.log(t),console.log(this.Datas[0].GetType2),console.log(this.str)}Refresh(){this.Datas.forEach((t,e)=>{let i=q.ClothDataRefresh[this.Datas[e].ID];this.str[this.Datas[e].ID]=i})}GetAwardBtnClick(){this.isWatchAD?M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",()=>{this.GetAward()})}):this.hide()}GetAward(){for(let t in this.str)if(1==this.str[t]){let e=q.ClothDataRefresh;e[t]=0,q.ClothDataRefresh=e,Laya.LocalStorage.setJSON(this.Datas[0].GetType2,this.str),this.Refresh(),I.get("UIReady").Refresh(),Z.Instance.refresh(),I.tip("恭喜解锁一套新衣服")}else I.tip("已经解锁了哦，不要重复解锁")}},C.UIDuiHuan=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.str={111:40601,222:40602,333:40603,444:40604,555:40605,123:70201,321:70202}}onInit(){this.DuiHuanBox=this.vars("DuiHuanBox"),this.InputText=this.vars("InputText"),this.SureBtn=this.DuiHuanBox.getChildByName("SureBtn"),this.btnEv("SureBtn",this.SureBtnClick),this.BackBtn=this.DuiHuanBox.getChildByName("BackBtn"),this.BackBtn.on(Laya.Event.CLICK,this,()=>{this.hide()}),this.GetBox=this.vars("GetBox"),this.Guang=this.GetBox.getChildByName("Guang"),this.ADBtn=this.GetBox.getChildByName("ADBtn"),this.Icon=this.GetBox.getChildByName("Icon"),this.CloseBtn=this.GetBox.getChildByName("CloseBtn"),this.ShareBtn=this.GetBox.getChildByName("ShareBtn"),this.btnEv("CloseBtn",()=>{this.hide()}),this.btnEv("ADBtn",this.ADBtnClick),this.ShareBtn.on(Laya.Event.CLICK,this,this.ShareBtnClick)}onShow(){_.startAutoRecord(),Laya.timer.once(3e3,this,()=>{this.BackBtn.visible=!0}),this.GetBox.visible=!1,this.CloseBtn.visible=!1,this.InputText.text="",this.ADBtn.visible=!0,this.ShareBtn.visible=!1}onHide(){_.stopAutoRecord(),this.DuiHuanBox.visible=!0,this.GetBox.visible=!1,this.CloseBtn.visible=!1,this.BackBtn.visible=!1}SureBtnClick(){for(let t in this.str){if(this.InputText.text==t){let e=this.str[t];1==q.ClothDataRefresh[e]?(this.DuiHuanBox.visible=!1,this.GetBoxShow()):I.tip("已经获取该装扮了，不能重复获取哦！")}null==this.str[this.InputText.text]&&I.tip("兑换码输入错误！")}}ADBtnClick(){M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",this.GetAward)})}GetAward(){let t=q.ClothDataRefresh;t[this.str[this.InputText.text]]=0,q.ClothDataRefresh=t,Z.Instance.showList(),Z.Instance.refresh(),I.tip("成功解一件新的装扮!"),this.ADBtn.visible=!1,Laya.timer.once(1e3,this,()=>{this.ShareBtn.visible=!0})}GetBoxShow(){this.GetBox.visible=!0,Laya.timer.loop(10,this,this.GuangRot),this.Icon.skin="https://h5.tomatojoy.cn/wx/mhdmx/zijie/1.0.8/Cloth/DuiHuanMa/"+this.str[this.InputText.text]+".png",Laya.timer.once(3e3,this,()=>{_.stopAutoRecord(),this.CloseBtn.visible=!0})}ShareBtnClick(){_._share(()=>{I.tip("视频分享成功！")},()=>{I.tip("视频分享失败...")})}GuangRot(){this.Guang.rotation+=2}},C.UINotice=class extends v{constructor(){super(...arguments),this._openType=k.Attach}onInit(){this.TextArea=this.vars("TextArea"),this.CLoseBtn=this.vars("CloseBtn"),this.TextArea.text="1: 兑换码功能和大家见面啦！\n    输入：111 获得白雪头发 \n    输入：222 获得白雪上衣 \n    输入：333 获得白雪长袜 \n    输入：444 获得白雪鞋子 \n    输入：555 获得白雪魔杖 \n    输入：123 获得汉服长裙 \n    输入：321 获得泳装 \n2: 新增绝版服装\n",this.TextArea.padding="10,10,10,50",this.TextArea.leading=10,this.btnEv("CloseBtn",()=>{this.hide()})}},C.UIDraw=class extends v{constructor(){super(...arguments),this._openType=k.Attach,this.nowCaseClue=[],this.nowClueID=1,this.lastPos=null,this.offsetLen=10,this.lineWidth=12,this.drawMinX=0,this.drawMaxX=0,this.drawMinY=0,this.drawMaxY=0,this.boardDrawY=0,this.isTouchOnDraw=!1,this.isOnBoardAnim=!1,this.isBoardUp=!1,this.nowColorID=0,this.lineArr=[],this.isSliderClick=!0,this.colorArr=["#303030","#b7b7b7","#FF69B4","#FF00FF","#00BFFF","#00FF00","#f1e168"],this.paintInited=!1,this.numPdaye=0,this.numPxiaoye=0,this.numPlangong=0,this.arr=[],this.cncountlan=0,this.cncountfen=0}onAwake(){for(let t in q.ClothDataAsy)1!=q.ClothDataAsy[t]||q._ClothData.get(parseInt(t)).GetType2||"10000"!=t&&"10001"!=t&&"10002"!=t&&this.arr.push(t);console.log(this.arr),console.log("xxxxxxxxxxxxx"),this.Colorlan=this.vars("Colorlan"),this.Colorfen=this.vars("Colorfen"),this.UIBox=this.vars("UIBox"),this.SliderBox=this.vars("SliderBox"),this.Board=this.vars("Board"),this.imgBg=this.vars("imgBg"),this.imgRubber=this.vars("imgRubber"),this.DrawBox=this.vars("DrawBox"),this.imgGou=this.vars("imgGou"),this.btnClear=this.vars("btnClear"),this.Get=this.vars("Get"),this.GetBox=this.Get.getChildByName("GetBox"),this.Guang=this.GetBox.getChildByName("Guang"),this.ADBtn=this.GetBox.getChildByName("ADBtn"),this.Icon=this.GetBox.getChildByName("Icon"),this.CloseBtn=this.GetBox.getChildByName("CloseBtn"),this.ShareBtn=this.GetBox.getChildByName("ShareBtn"),this.btnEv("CloseBtn",()=>{this.hide()}),this.btnEv("ADBtn",this.ADBtnClick),this.ShareBtn.on(Laya.Event.CLICK,this,this.ShareBtnClick),this.btnNext=this.vars("btnNext"),this.BackBtn=this.vars("BackBtn"),this.Colorlan.on(Laya.Event.CLICK,this,this.onColorlan),this.Colorfen.on(Laya.Event.CLICK,this,this.onColorfen),this.btnClear.on(Laya.Event.CLICK,this,this.onClickClear),this.btnNext.on(Laya.Event.CLICK,this,this.onClickNext),this.BackBtn.on(Laya.Event.CLICK,this,()=>{_.stopAutoRecord(),this.hide()}),this.SliderBox.on(Laya.Event.MOUSE_DOWN,this,this.onSliderDown),this.SliderBox.on(Laya.Event.MOUSE_MOVE,this,this.onSliderMove),this.SliderBox.on(Laya.Event.MOUSE_UP,this,this.onSliderUp);for(let t=1;t<=7;t++)this.Board.getChildByName("imgColor"+t).on(Laya.Event.CLICK,this,this.onClickColor,[t-1]);this.imgRubber.on(Laya.Event.CLICK,this,this.onClickColor,[-1]),this.refreshShow(),this.drawMinX=this.lineWidth/2,this.drawMaxX=this.DrawBox.width-this.lineWidth/2,this.drawMinY=this.lineWidth/2,this.drawMaxY=this.DrawBox.height-this.lineWidth/2,this.btnNext.visible=!0,this.SliderBox.visible=!1,this.boardDrawY=this.UIBox.height-this.Board.height,this.paintInited=!0,this.onEventFailAgain(),Number("1"==Laya.LocalStorage.getItem("cncountlan"))?this.Colorlan.visible=!1:this.Colorlan.visible=!0,Number("1"==Laya.LocalStorage.getItem("cncountfen"))?this.Colorfen.visible=!1:this.Colorfen.visible=!0,this.trySkinCount=p.randomInRange_i(1,3)}onShow(){_.startAutoRecord(),Laya.timer.once(3e3,this,()=>{this.BackBtn.visible=!0}),this.Get.visible=!1,this.CloseBtn.visible=!1,this.ADBtn.visible=!0,this.ShareBtn.visible=!1}onHide(){_.stopAutoRecord(),this.onClickClear(),this.Get.visible=!1,this.CloseBtn.visible=!1,this.BackBtn.visible=!1}onClickNext(){console.log("确认完成"),this.onClickClear(),0==this.arr.length&&I.tip("你已经解锁了全部的服饰哦~");let t=G.arrayRandomGetOut(this.arr,1);console.log(t);let e=q._ClothData.get(parseInt(t));this.data=e,this.GetBoxShow(),console.log(this.data)}GetBoxShow(){this.Get.visible=!0,Laya.timer.loop(10,this,this.GuangRot),this.Icon.skin=this.data.GetPath1(),Laya.timer.once(3e3,this,()=>{_.stopAutoRecord(),this.CloseBtn.visible=!0})}GuangRot(){this.Guang.rotation+=2}ADBtnClick(){M.ShowReward(()=>{this.GetAward()},()=>{I.show("UITip",this.GetAward)})}GetAward(){let t=q.ClothDataRefresh;t[this.data.ID]=0,q.ClothDataRefresh=t,Z.Instance.showList(),Z.Instance.refresh(),I.tip("成功解一件新的装扮!"),this.ADBtn.visible=!1,Laya.timer.once(1e3,this,()=>{this.ShareBtn.visible=!0})}ShareBtnClick(){_._share(()=>{I.tip("视频分享成功！")},()=>{I.tip("视频分享失败...")})}onColorlan(){this.cncountlan=Number(Laya.LocalStorage.getItem("cncountlan")),M.ShowReward(()=>{console.log("看视频解锁蓝色"),this.Colorlan.visible=!1,this.cncountlan=1,Laya.LocalStorage.setItem("cncountlan",this.cncountlan.toString())})}onColorfen(){this.cncountfen=Number(Laya.LocalStorage.getItem("cncountfen")),M.ShowReward(()=>{console.log("看视频解锁粉色"),this.Colorfen.visible=!1,this.cncountfen=1,Laya.LocalStorage.setItem("cncountfen",this.cncountfen.toString())})}addDrawEvent(){this.DrawBox.on(Laya.Event.MOUSE_DOWN,this,this._onMouseDown),this.DrawBox.on(Laya.Event.MOUSE_MOVE,this,this._onMouseMove),this.DrawBox.on(Laya.Event.MOUSE_UP,this,this._onMouseUP)}removeDrawEvent(){this.DrawBox.off(Laya.Event.MOUSE_DOWN,this,this._onMouseDown),this.DrawBox.off(Laya.Event.MOUSE_MOVE,this,this._onMouseMove),this.DrawBox.off(Laya.Event.MOUSE_UP,this,this._onMouseUP)}upBoardAnim(){this.isOnBoardAnim||(this.isOnBoardAnim=!0,Laya.Tween.to(this.Board,{y:this.boardDrawY+300},500,Laya.Ease.backOut,Laya.Handler.create(this,()=>{this.isOnBoardAnim=!1})))}downBoardAnim(){this.isOnBoardAnim||(this.isOnBoardAnim=!0,Laya.Tween.to(this.Board,{y:this.boardDrawY+300+100},500,Laya.Ease.backOut,Laya.Handler.create(this,()=>{this.isOnBoardAnim=!1})))}onClickClear(){this.DrawBox.destroyChildren(),this.lineArr=[]}onClickUp(){this.isOnBoardAnim||(this.isBoardUp?this.downBoardAnim():this.upBoardAnim(),this.isBoardUp=!this.isBoardUp)}onClickCatch(t){t.stopPropagation()}onClickColor(t){this.nowColorID=t,this.refreshShow()}refreshShow(){let t=this.imgRubber;-1!=this.nowColorID&&(t=this.Board.getChildByName("imgColor"+(this.nowColorID+1))),this.imgGou.x=t.x+30,this.imgGou.y=t.y+35}_onMouseDown(t){if(this.isTouchOnDraw=!0,this.mergeBoard(),-1!=this.nowColorID){let t=new Laya.Sprite;t.width=this.DrawBox.width,t.height=this.DrawBox.height,t.cacheAs="bitmap",this.DrawBox.addChild(t),this.lineArr.push(t)}this.lastPos=new Laya.Point(t.stageX-this.Board.x-this.DrawBox.x,t.stageY-this.Board.y-this.DrawBox.y),this.nowBoard.graphics.drawCircle(this.lastPos.x,this.lastPos.y,this.nowLineWidth/2,this.nowColor)}_onMouseMove(t){if(this.isTouchOnDraw){let e=new Laya.Point(t.stageX-this.Board.x-this.DrawBox.x,t.stageY-this.Board.y-this.DrawBox.y);this.drawLine(e)}}_onMouseUP(t){this.isTouchOnDraw=!1}onSliderDown(t){t.stopPropagation(),this.sliderDownPos=new Laya.Point(t.stageX,t.stageY),this.isSliderClick=!0}onSliderMove(t){}onSliderUp(t){}onEventFailAgain(){this.nowClueID=1,this.SliderBox.visible=!1,this.UIBox.visible=!0,this.Board.y=this.boardDrawY,this.toWitness()}onEventPickAgain(){this.UIBox.visible=!0}drawLine(t){t.x>this.drawMaxX&&(t.x=this.drawMaxX),t.x<this.drawMinX&&(t.x=this.drawMinX),t.y>this.drawMaxY&&(t.y=this.drawMaxY),t.y<this.drawMinY&&(t.y=this.drawMinY);let e=t.x-this.lastPos.x,i=t.y-this.lastPos.y;e*e+i*i>=this.offsetLen*this.offsetLen&&(this.nowBoard.graphics.drawLine(this.lastPos.x,this.lastPos.y,t.x,t.y,this.nowColor,this.nowLineWidth),this.nowBoard.graphics.drawCircle(t.x,t.y,this.nowLineWidth/2,this.nowColor),this.lastPos.x=t.x,this.lastPos.y=t.y)}mergeBoard(){if(-1!=this.nowColorID){let t=this.lineArr.length;if(t>3){let e=this.DrawBox.drawToTexture(this.DrawBox.width,this.DrawBox.height,this.DrawBox.x,this.DrawBox.y),i=new Laya.Sprite;i.width=this.DrawBox.width,i.height=this.DrawBox.height,this.DrawBox.addChild(i),i.texture=e;let s=this.DrawBox.getChildByName("bg");for(s&&s.destroy(),i.name="bg",i.zOrder=-1;0!=t;)this.lineArr.splice(0,1)[0].destroy(),t--}}else{let t=this.DrawBox.drawToTexture(this.DrawBox.width,this.DrawBox.height,this.DrawBox.x,this.DrawBox.y),e=new Laya.Sprite;e.width=this.DrawBox.width,e.height=this.DrawBox.height,e.cacheAs="bitmap",this.DrawBox.addChild(e),e.texture=t;let i=this.DrawBox.getChildByName("bg");i&&i.destroy(),e.name="bg",e.zOrder=-1;let s=this.lineArr.length;for(;0!=s;)this.lineArr.splice(0,1)[0].destroy(),s--;let a=new Laya.Sprite;a.width=this.DrawBox.width,a.height=this.DrawBox.height,a.blendMode="destination-out",e.addChild(a),this.lineArr.push(e)}}toWitness(){this.addDrawEvent(),this.btnClear.visible=!0}toPickSuspect(){this.btnClear.visible=!1,this.SliderBox.visible=!0,this.removeDrawEvent(),this.downBoardAnim(),Laya.timer.once(1e3,this,()=>{})}get nowBoard(){let t=this.lineArr[this.lineArr.length-1];return-1==this.nowColorID&&(t=t.getChildAt(0)),t}get nowColor(){return-1!=this.nowColorID?this.colorArr[this.nowColorID]:"#000000"}get nowLineWidth(){return-1!=this.nowColorID?this.lineWidth:3*this.lineWidth}get nowBubbleInfo(){return this.nowClueID>this.nowCaseClue.length&&(this.nowClueID=this.nowCaseClue.length),{txt:this.nowCaseClue[this.nowClueID-1],pro:this.nowClueID+"/"+this.nowCaseClue.length}}},C.UITask=class extends v{constructor(){super(...arguments),this._openType=k.Attach}onInit(){this.Scratchers=this.vars("Scratchers"),this.ScratchersScrape=this.vars("ScratchersScrape"),this.ScratchersAgainBtn=this.vars("ScratchersAgainBtn"),this.GetReward=this.vars("GetReward"),this.GetRewardCloseBtn=this.vars("GetRewardCloseBtn"),this.ProbabilityBtn=this.vars("ProbabilityBtn"),this.Probability=this.vars("Probability"),this.GetRewardShareBtn=this.vars("GetRewardShareBtn"),this.GetRewardADBtn=this.vars("GetRewardADBtn"),O._TaskList=this.vars("ShopList"),this.Scratchers.visible=!1,this.GetReward.visible=!1,this.event(),this.btnClick()}event(){w.reg(O.EventType.watchAds,this,t=>{O.doDetection(O.Classify.perpetual,t)}),w.reg(E.EventType.startScratcher,this,t=>{_.stopAutoRecord(),_.startAutoRecord(),E._scratchersNum.num++,E._presentReward=E._randomReward(),G.node_2DShowExcludedChild(this.vars("PrizeLevel"),[E._presentReward]),this.Scratchers.visible=!0,this.drawSwitch=!0,O.getReward(O.Classify.perpetual,t)})}btnClick(){this.btnEv("BackBtn",()=>{this.hide(),w.offAll(this),Laya.timer.clearAll(this)}),this.btnEv("refreshBtn",()=>{M.ShowReward(()=>{O.refreshTask()})}),this.btnEv("ProbabilityBtn",()=>{this.Probability.visible=!0}),this.btnEv("ProbabilityCloseBtn",()=>{this.Probability.visible=!1}),this.btnEv("ScratchersCloseBtn",this.closeScratchers),this.btnEv("ScratchersAgainBtn",()=>{this.closeScratchers(),w.notify(E.EventType.startScratcher)}),this.btnEv("GetRewardCloseBtn",this.closeGetReward),this.btnEv("GetRewardADBtn",()=>{M.ShowReward(()=>{I.tip("衣服已获得！"),_.stopAutoRecord(),this.GetRewardShareBtn.visible=!0,this.GetRewardADBtn.visible=!1,this.rewordData&&(console.log(this.rewordData),q.unlock(this.rewordData))})}),this.btnEv("GetRewardShareBtn",()=>{_._share(()=>{I.tip("分享成功！"),this.closeGetReward()})}),this.scratchersClick()}closeScratchers(){this.Scratchers.visible=!1,this.ScratchersAgainBtn.visible=!1,this.drawSwitch=!1,this.DrawSp&&(G.node_RemoveAllChildren(this.ScratchersScrape),this.DrawSp=null,this.drawlength=null,this.drawFrontPos=null)}openGetReward(){let t;var e=()=>{this.GetReward.visible=!0,Laya.timer.once(2e3,this,()=>{this.GetRewardCloseBtn.visible=!0})};switch(E._presentReward){case E._Word.tedeng:t=this.GetReward.getChildByName("GetBox").getChildByName("Icon"),this.rewordData=q.Get_All_UnLock_HighStarCloth(),t.skin=this.rewordData.GetPath1(),e(),this.closeScratchers();break;case E._Word.yideng:t=this.GetReward.getChildByName("GetBox").getChildByName("Icon"),this.rewordData=q.Get_All_UnLock_LowStarCloth(),t.skin=this.rewordData.GetPath1(),this.closeScratchers(),e();break;case E._Word.erdeng:I.tip("增加10点魅力值"),this.closeScratchers(),this.rewordData=null,q.AddCharmValue(10),I.get("UIReady").CharmValueShow();break;case E._Word.zailai:this.ScratchersAgainBtn.visible=!0,this.rewordData=null;break;case E._Word.xiexie:I.tip("增加5点魅力值"),this.closeScratchers(),this.rewordData=null,q.AddCharmValue(5),I.get("UIReady").CharmValueShow()}}closeGetReward(){this.GetReward.visible=!1,this.GetRewardCloseBtn.visible=!1,this.GetRewardShareBtn.visible=!1,this.GetRewardADBtn.visible=!0}scratchersClick(){this.ScratchersScrape.cacheAs="bitmap",this.ScratchersScrape.on(Laya.Event.MOUSE_DOWN,this,t=>{!this.DrawSp&&this.drawSwitch&&(this.drawlength=0,this.DrawSp=new Laya.Image,this.ScratchersScrape.addChild(this.DrawSp),this.DrawSp.name="DrawSp",this.DrawSp.pos(0,0),this.DrawSp=this.DrawSp,this.DrawSp.blendMode="destination-out"),this.drawFrontPos=this.ScratchersScrape.globalToLocal(new Laya.Point(t.stageX,t.stageY))}),this.ScratchersScrape.on(Laya.Event.MOUSE_MOVE,this,t=>{if(this.drawFrontPos&&this.drawSwitch){let e=this.ScratchersScrape.globalToLocal(new Laya.Point(t.stageX,t.stageY));this.DrawSp.graphics.drawLine(this.drawFrontPos.x,this.drawFrontPos.y,e.x,e.y,"#000000",60),this.DrawSp.graphics.drawCircle(e.x,e.y,30,"#000000"),this.drawlength+=this.drawFrontPos.distance(e.x,e.x),this.drawFrontPos=e,this.drawlength>28e3&&(this.drawSwitch=!1,Laya.timer.once(1e3,this,()=>{this.openGetReward()}))}}),this.ScratchersScrape.on(Laya.Event.MOUSE_UP,this,()=>{this.drawFrontPos=null})}onShow(){O._TaskList.selectEnable=!0,O._TaskList.vScrollBarSkin="",O._TaskList.array=O._perpetualTask,O._TaskList.selectHandler=new Laya.Handler(this,t=>{}),O._TaskList.renderHandler=new Laya.Handler(this,(t,e)=>{let i=t.dataSource;t.getChildByName("Name").text=i.name;let s=t.getChildByName("BtnGet");0==i.get?s.skin="UITask/weiwancheng.png":1==i.get?s.skin="UITask/lingqu.png":-1==i.get&&(s.skin="UITask/yilingqu.png");let a=t.getChildByName("ProNum");a.text="("+i.resCondition+"/"+i.condition+")";let h=t.getChildByName("BtnAds");i.name==O.name.PK3次?(h.visible=!1,a.x=270):(h.visible=!0,a.x=370)})}};class ct extends Laya.View{constructor(){super()}onOpened(){B.start()}}class dt extends Laya.Script{onAwake(){this.BtnAds=this.owner.getChildByName("BtnAds"),this.BtnAds.on(Laya.Event.MOUSE_DOWN,this,t=>{t.currentTarget.scale(1.1,1.1)}),this.BtnAds.on(Laya.Event.MOUSE_DOWN,this,t=>{t.currentTarget.scale(1.1,1.1)}),this.BtnAds.on(Laya.Event.MOUSE_UP,this,t=>{t.currentTarget.scale(1,1),M.ShowReward(()=>{w.notify(O.EventType.watchAds,[this.owner._dataSource.name])})}),this.BtnAds.on(Laya.Event.MOUSE_OUT,this,t=>{t.currentTarget.scale(1,1)}),this.BtnGet=this.owner.getChildByName("BtnGet"),this.BtnGet.on(Laya.Event.MOUSE_DOWN,this,t=>{t.currentTarget.scale(1.1,1.1)}),this.BtnGet.on(Laya.Event.MOUSE_DOWN,this,t=>{t.currentTarget.scale(1.1,1.1)}),this.BtnGet.on(Laya.Event.MOUSE_UP,this,t=>{t.currentTarget.scale(1,1),1==this.owner._dataSource.get?w.notify(E.EventType.startScratcher,[this.owner._dataSource.name]):0==this.owner._dataSource.get&&I.tip("任务未完成！")}),this.BtnGet.on(Laya.Event.MOUSE_OUT,this,t=>{t.currentTarget.scale(1,1)})}}class ut extends Laya.Script{constructor(){super(...arguments),this._widthmax=0,this._widthmin=0,this._widthoffset=0}onAwake(){this.Bg=this.owner,console.log(this.Bg),this.Pg=this.Bg.getChildByName("Pg"),this.mask=this.Pg.mask,this._widthmax=this.mask.width,this._widthmin=0,this._widthoffset=this._widthmax-this._widthmin}setvalue(t){this.mask.width=t>=0&&t<=1?this._widthmin+this._widthoffset*t:t>1?this._widthmax:this._widthmin}}class gt{constructor(){}static init(){var s=Laya.ClassUtils.regClass;s("TJ/Promo/script/PromoOpen.ts",t),s("TJ/Promo/script/ButtonScale.ts",e),s("TJ/Promo/script/PromoItem.ts",i),s("TJ/Promo/script/P201.ts",a),s("TJ/Promo/script/P202.ts",h),s("TJ/Promo/script/P103.ts",o),s("TJ/Promo/script/P204.ts",n),s("TJ/Promo/script/P205.ts",r),s("TJ/Promo/script/P106.ts",l),s("script/Game/UI/ActiveItem.ts",$),s("script/AppFacade.ts",ct),s("script/Game/PhotosChange.ts",ht),s("script/Game/PickClothChange.ts",ot),s("script/Game/PickClothChangeT.ts",nt),s("script/Game/UI/RankItem.ts",rt),s("script/Game/ClothChange.ts",U),s("script/Game/UI/Bag/SkinItem.ts",H),s("script/Game/UI/Bag/HairList.ts",J),s("script/Game/UI/Bag/DressList.ts",W),s("script/Game/UI/Bag/AccList.ts",V),s("script/Game/UI/Bag/ShoesList.ts",j),s("script/Game/UI/Bag/SockList.ts",z),s("script/Game/UI/Bag/UpList.ts",Y),s("script/Game/UI/Bag/DownList.ts",X),s("script/Game/UI/Bag/ClothBtn.ts",K),s("script/Game/UI/Bag/BagListController.ts",Z),s("script/Game/UI/UITaskItem.ts",dt),s("script/Game/UI/ProgressBar.ts",ut)}}gt.width=720,gt.height=1280,gt.scaleMode="fixedauto",gt.screenMode="none",gt.alignV="top",gt.alignH="left",gt.startScene="sys/UIInit.scene",gt.sceneRoot="",gt.debug=!1,gt.stat=!1,gt.physicsDebug=!0,gt.exportSceneToJson=!0,gt.init();new class{constructor(){window.Laya3D?Laya3D.init(gt.width,gt.height):Laya.init(gt.width,gt.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=gt.scaleMode,Laya.stage.screenMode=gt.screenMode,Laya.stage.alignV=gt.alignV,Laya.stage.alignH=gt.alignH,Laya.URL.exportSceneToJson=gt.exportSceneToJson,(gt.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),gt.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),gt.stat&&Laya.Stat.show(),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){gt.startScene&&Laya.Scene.open(gt.startScene)}}}();