{
  "code": "import { UIBase, OpenType, GameMgr, EventMgr } from \"../../Frame/Core\";\r\nimport { GameEvent } from \"../Formula\";\r\nimport ADManager from \"../../Admanager\";\r\nexport default class UIPreload extends UIBase {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._openType = OpenType.Once;\r\n        this._fadeIn = false;\r\n        this.AllLength = 0;\r\n    }\r\n    Load1(callback) {\r\n        let self = this;\r\n        let list = [];\r\n        for (let item of UIPreload.resList1) {\r\n            list.push(UIPreload.resRootPath + item + \".lh\");\r\n        }\r\n        for (let item of UIPreload.resList2) {\r\n            list.push(UIPreload.resRootPath2 + item + \".lh\");\r\n        }\r\n        for (let item of list) {\r\n            console.log(\"load -> \" + item);\r\n        }\r\n        let onCpl = Laya.Handler.create(null, (res) => {\r\n            console.log(\"load res=\", res);\r\n            if (callback != null)\r\n                callback();\r\n        });\r\n        let progress = Laya.Handler.create(null, (value) => {\r\n            self.prg.setValue(value);\r\n        });\r\n        Laya.loader.create(list, onCpl, progress);\r\n    }\r\n    Load2(scene) {\r\n        console.log(\"Scene资源\", scene);\r\n        Laya.stage.getChildAt(0).destroy();\r\n        Laya.stage.addChildAt(scene, 0);\r\n        for (let item of UIPreload.resList1) {\r\n            let a = Laya.loader.getRes(UIPreload.resRootPath + item + \".lh\");\r\n            scene.addChild(a);\r\n        }\r\n        for (let item of UIPreload.resList2) {\r\n            let a = Laya.loader.getRes(UIPreload.resRootPath2 + item + \".lh\");\r\n            scene.addChild(a);\r\n        }\r\n        GameMgr.fsm.to(\"Game_Ready\", 0);\r\n        console.log(scene);\r\n    }\r\n    StartLoading() {\r\n    }\r\n    onInit() {\r\n        EventMgr.reg(\"sgl\", this, () => {\r\n            setTimeout(() => {\r\n                console.log(\"开始加载资源延迟5s\");\r\n                this.Load1(() => {\r\n                    this.Load2(newscene);\r\n                });\r\n            }, 500);\r\n        });\r\n        Laya.loader.create(\"Prefab/CoinPref.prefab\");\r\n        this.prg = this.initPrg(\"Prg\");\r\n        this.AllLength = UIPreload.resList1.length;\r\n        let newscene = new Laya.Scene3D();\r\n        console.log(\"开始加载资源\");\r\n    }\r\n    onShow() {\r\n        EventMgr.reg(GameEvent.preloadStep, this, this.onLoadStep);\r\n        EventMgr.reg(GameEvent.preloadCpl, this, this.onLoadCpl);\r\n        GameMgr.readyAll();\r\n    }\r\n    onHide() {\r\n        EventMgr.offCaller(this);\r\n    }\r\n    onLoadStep(value) {\r\n    }\r\n    onLoadCpl() {\r\n        ADManager.initShare();\r\n    }\r\n}\r\nUIPreload.resRootPath = \"res3d/p2/LayaScene_SampleScene/Conventional/\";\r\nUIPreload.resList1 = [];\r\nUIPreload.resRootPath2 = \"res3d/p1/LayaScene_SampleScene/Conventional/\";\r\nUIPreload.resList2 = [];\r\n//# sourceMappingURL=UIPreload.js.map",
  "references": [
    "E:/CookingGame514/src/script/Frame/Core.ts",
    "E:/CookingGame514/src/script/Game/Formula.ts",
    "E:/CookingGame514/src/script/Admanager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"UIPreload.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/script/Game/UI/UIPreload.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
