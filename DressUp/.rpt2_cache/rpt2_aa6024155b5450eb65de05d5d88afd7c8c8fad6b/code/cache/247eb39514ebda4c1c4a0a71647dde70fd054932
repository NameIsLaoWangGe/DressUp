{
  "code": "import ClothChange, { clothtype } from \"../../ClothChange\";\r\nimport BagListController from \"./BagListController\";\r\nimport GameDataController from \"../../GameDataController\";\r\nimport { UIMgr } from \"../../../Frame/Core\";\r\nimport ADManager from \"../../../Admanager\";\r\nexport default class SkinItem extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.HeightMax = 85;\r\n        this.WidthtMax = 80;\r\n        this.count = 2;\r\n    }\r\n    onAwake() {\r\n        this.SkinChose = this.owner;\r\n        this.BG = this.SkinChose.getChildByName(\"BG\");\r\n        this.IconParent = this.SkinChose.getChildByName(\"IconParent\");\r\n        this.Icon = this.IconParent.getChildByName(\"Icon\");\r\n        this.Lock = this.SkinChose.getChildByName(\"Lock\");\r\n        this.Adimage = this.Lock.getChildAt(1);\r\n        this.smallLock = this.Lock.getChildAt(0);\r\n        this.Star = this.SkinChose.getChildByName(\"Star\");\r\n        this.Select = this.SkinChose.getChildByName(\"Select\");\r\n        this.SkinChose.on(Laya.Event.MOUSE_DOWN, this, this.onClick);\r\n    }\r\n    fell(data) {\r\n        this.ID = data.ID;\r\n        this.type = data.Type;\r\n        this.skinname = data.Name;\r\n        this.Select.visible = false;\r\n        this.type2 = data.GetType2;\r\n        this.Star.skin = \"Btnbar/xing\" + data.Star + \".png\";\r\n        console.log(data.ID + \"\" + data.Star);\r\n        this.Lock.visible = !GameDataController.ClothCanUse(data.ID);\r\n        if (data.GetType2 != null || data.ID == 50404) {\r\n            this.Adimage.visible = false;\r\n        }\r\n        else {\r\n            this.Adimage.visible = true;\r\n            this.smallLock.visible = false;\r\n        }\r\n        console.log(GameDataController.ClothDataRefresh[data.ID], data.ID);\r\n        switch (this.type) {\r\n            case clothtype.Hair:\r\n                if (ClothChange.Instance.nowclothData.Hair == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Dress:\r\n                if (ClothChange.Instance.nowclothData.Dress == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Coat:\r\n                if (ClothChange.Instance.nowclothData.Coat == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Shirt:\r\n                if (ClothChange.Instance.nowclothData.Shirt == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Trousers:\r\n                if (ClothChange.Instance.nowclothData.Trousers == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Socks:\r\n                if (ClothChange.Instance.nowclothData.Socks == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Shose:\r\n                if (ClothChange.Instance.nowclothData.Shose == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n            case clothtype.Ornament:\r\n                if (ClothChange.Instance.nowclothData.Ornament == this.ID) {\r\n                    this.Select.visible = true;\r\n                }\r\n                break;\r\n        }\r\n        this.Icon.skin = data.GetPath1();\r\n        let imageHeight = parseFloat(this.Icon.height.toString());\r\n        let imagewidth = parseFloat(this.Icon.width.toString());\r\n        this.IconParent.width = 100;\r\n        this.IconParent.height = 100;\r\n        let pr = 0;\r\n        if (imagewidth > imageHeight) {\r\n            pr = this.WidthtMax / imagewidth;\r\n        }\r\n        else {\r\n            pr = this.HeightMax / imageHeight;\r\n        }\r\n        this.Icon.scaleX = pr;\r\n        this.Icon.scaleY = pr;\r\n        this.Icon.centerX = 0;\r\n        this.Icon.centerY = 0;\r\n    }\r\n    onClick() {\r\n        this.count++;\r\n        if (this.count % 2 == 1) {\r\n            if (this.Lock.visible) {\r\n                if (this.Adimage.visible) {\r\n                    ADManager.ShowReward(() => {\r\n                        this.Select.visible = true;\r\n                        ClothChange.Instance._ClothChange(this.ID, this.type);\r\n                        BagListController.Instance.getlist(this.type)._refresh();\r\n                        let dataall = GameDataController.ClothDataRefresh;\r\n                        dataall[this.ID] = 0;\r\n                        GameDataController.ClothDataRefresh = dataall;\r\n                        UIMgr.tip(\"恭喜获得一件装扮\");\r\n                    }, () => {\r\n                        UIMgr.show(\"UITip\", () => {\r\n                            this.Select.visible = true;\r\n                            ClothChange.Instance._ClothChange(this.ID, this.type);\r\n                            BagListController.Instance.getlist(this.type)._refresh();\r\n                            let dataall = GameDataController.ClothDataRefresh;\r\n                            dataall[this.ID] = 0;\r\n                            GameDataController.ClothDataRefresh = dataall;\r\n                            UIMgr.tip(\"恭喜获得一件装扮\");\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    UIMgr.tip(\"当前装扮未解锁\");\r\n                }\r\n            }\r\n            else {\r\n                console.log(\"xxxxxxxxxxxxxxxxxxxxxx\");\r\n                console.log(\"点击选择衣服-------\", this.ID, \"------\", this.skinname);\r\n                console.log(\"                                                     \");\r\n                this.Select.visible = true;\r\n                ClothChange.Instance._ClothChange(this.ID, this.type);\r\n                BagListController.Instance.getlist(this.type)._refresh();\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SkinItem.js.map",
  "references": [
    "D:/NewProject/src/script/Game/ClothData.ts",
    "D:/NewProject/src/script/Game/ClothChange.ts",
    "D:/NewProject/src/script/Game/UI/Bag/BagListController.ts",
    "D:/NewProject/src/script/Game/GameDataController.ts",
    "D:/NewProject/src/script/Frame/Core.ts",
    "D:/NewProject/src/script/Admanager.ts",
    "D:/NewProject/src/script/Game/Formula.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SkinItem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/script/Game/UI/Bag/SkinItem.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,WAAW,EAAE,EAAE,SAAS,EAAE,MAAM,mBAAmB,CAAC;AAC3D,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AACpD,OAAO,kBAAkB,MAAM,0BAA0B,CAAC;AAC1D,OAAO,EAAS,KAAK,EAAE,MAAM,qBAAqB,CAAC;AACnD,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAG3C,MAAM,CAAC,OAAO,OAAO,QAAS,SAAQ,IAAI,CAAC,MAAM;IAAjD;;QAmBI,cAAS,GAAW,EAAE,CAAC;QACvB,cAAS,GAAW,EAAE,CAAC;QACvB,UAAK,GAAQ,CAAC,CAAC;IAwKnB,CAAC;IAvKG,OAAO;QAGH,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAiB,CAAC;QACxC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAe,CAAC;QAE5D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,YAAY,CAAe,CAAC;QAE5E,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,MAAM,CAAe,CAAC;QAEjE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAe,CAAC;QAChE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAe,CAAC;QACrD,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAe,CAAC;QAErD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAe,CAAC;QAChE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAe,CAAC;QACpE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;IAChE,CAAC;IACD,IAAI,CAAC,IAAe;QAEhB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,GAAC,aAAa,GAAC,IAAI,CAAC,IAAI,GAAC,MAAM,CAAC;QAC9C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAU7D,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAE,IAAI,CAAC,EAAE,IAAE,KAAK,EACzC;YACI,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;SAChC;aAED;YACI,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,SAAS,CAAC,OAAO,GAAC,KAAK,CAAC;SAChC;QACD,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QAEnE,QAAQ,IAAI,CAAC,IAAI,EACjB;YACI,KAAK,SAAS,CAAC,IAAI;gBACf,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,EACrD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,KAAK;gBAChB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,EACtD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,IAAI;gBACf,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,EACrD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,KAAK;gBAChB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,EACtD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,QAAQ;gBACnB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE,EACzD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,KAAK;gBAEhB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,EACtD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,KAAK;gBAChB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,EACtD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;YACV,KAAK,SAAS,CAAC,QAAQ;gBACnB,IAAI,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE,EACzD;oBACI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC9B;gBACD,MAAM;SACb;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjC,IAAI,WAAW,GAAW,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;QAClE,IAAI,UAAU,GAAW,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,IAAI,EAAE,GAAG,CAAC,CAAC;QACX,IAAI,UAAU,GAAG,WAAW,EAC5B;YACI,EAAE,GAAG,IAAI,CAAC,SAAS,GAAG,UAAU,CAAA;SACnC;aAED;YACI,EAAE,GAAG,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;SACrC;QACD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;IAC1B,CAAC;IACD,OAAO;QAEH,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAG,IAAI,CAAC,KAAK,GAAC,CAAC,IAAE,CAAC,EAClB;YACI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EACrB;gBACI,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EACxB;oBACI,SAAS,CAAC,UAAU,CAAC,GAAG,EAAE;wBAEtB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;wBAC3B,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;wBACtD,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;wBACzD,IAAI,OAAO,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;wBAClD,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;wBACrB,kBAAkB,CAAC,gBAAgB,GAAG,OAAO,CAAC;wBAC9C,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBAC1B,CAAC,EAAC,GAAE,EAAE;wBACF,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,GAAE,EAAE;4BACnB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;4BAC3B,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;4BACtD,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;4BACzD,IAAI,OAAO,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;4BAClD,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;4BACrB,kBAAkB,CAAC,gBAAgB,GAAG,OAAO,CAAC;4BAC9C,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;wBAC1B,CAAC,CAAC,CAAA;oBACN,CAAC,CAAC,CAAA;iBACL;qBAED;oBACI,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;iBACxB;aACJ;iBAED;gBACI,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;gBACtC,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC/D,OAAO,CAAC,GAAG,CAAC,uDAAuD,CAAC,CAAC;gBACrE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;gBAC3B,WAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACtD,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;aAC5D;SACJ;IAGL,CAAC;CACJ\"}"
}
